<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Unity - Zhang&#39;s Blog的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Zhang&#39;s Blog" /><meta name="description" content="Step1. Unity开发工具技巧以及相关文档 Step2. 小球项目 通过C#为游戏物体添加日志 使小球朝着指定方向移动 物体的向量 Unity监听键盘事件 控制小球左右移" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.67.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/unity/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Unity" />
<meta property="og:description" content="Step1. Unity开发工具技巧以及相关文档 Step2. 小球项目 通过C#为游戏物体添加日志 使小球朝着指定方向移动 物体的向量 Unity监听键盘事件 控制小球左右移" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/unity/" />
<meta property="article:published_time" content="2020-07-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-29T00:00:00+00:00" />
<meta itemprop="name" content="Unity">
<meta itemprop="description" content="Step1. Unity开发工具技巧以及相关文档 Step2. 小球项目 通过C#为游戏物体添加日志 使小球朝着指定方向移动 物体的向量 Unity监听键盘事件 控制小球左右移">
<meta itemprop="datePublished" content="2020-07-29T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-07-29T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="27491">



<meta itemprop="keywords" content="Unity," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unity"/>
<meta name="twitter:description" content="Step1. Unity开发工具技巧以及相关文档 Step2. 小球项目 通过C#为游戏物体添加日志 使小球朝着指定方向移动 物体的向量 Unity监听键盘事件 控制小球左右移"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Zhang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/home/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">MyBlog</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Zhang&#39;s Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/home/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">MyBlog</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Unity</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-07-29 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#step1-unity开发工具技巧以及相关文档">Step1. Unity开发工具技巧以及相关文档</a>
      <ul>
        <li><a href="#设置ceditor为visual-studio">设置C#Editor为Visual Studio</a></li>
        <li><a href="#project-assets文件夹里放置的是工程相关文件例如材质c脚本以及模板等">Project-&gt;Assets文件夹里放置的是工程相关文件,例如材质、C#脚本以及模板等</a></li>
        <li><a href="#hierarchy里面放的是所有物体基础物体有摄像机和灯光">Hierarchy里面放的是所有物体,基础物体有摄像机和灯光</a></li>
        <li><a href="#在hierarchy里点击一个物体右侧就会出现inspector这是游戏物体的组件transform下的position是物体的位置rotation是角度scale是x轴y轴z轴的尺寸">在Hierarchy里点击一个物体,右侧就会出现Inspector,这是游戏物体的组件,Transform下的Position是物体的位置,Rotation是角度,Scale是x轴、y轴、z轴的尺寸</a></li>
        <li><a href="#这几个功能是操控物体的方式有操纵三维坐标的角度有移动三维坐标的位置">这几个功能是操控物体的方式,有操纵三维坐标的角度,有移动三维坐标的位置</a></li>
        <li><a href="#packages中放置的是unity开发一些常用的插件">Packages中放置的是Unity开发一些常用的插件</a></li>
        <li><a href="#在物体上添加c脚本">在物体上添加C#脚本</a></li>
        <li><a href="#给物体添加材质">给物体添加材质</a></li>
        <li><a href="#unity中制作游戏过程中创建的所有物体如果不保存是不会有效的">Unity中制作游戏过程中创建的所有物体如果不保存是不会有效的</a></li>
        <li><a href="#如果想让物体和地面贴合就将物体的y轴坐标设置为05">如果想让物体和地面贴合,就将物体的y轴坐标设置为0.5</a></li>
        <li><a href="#project栏目下文件夹里内容的图标可以通过底部的拖动功能更改图标的大小">Project栏目下文件夹里内容的图标可以通过底部的拖动功能更改图标的大小</a></li>
        <li><a href="#unity切换视角">Unity切换视角</a></li>
        <li><a href="#通过smoothness可以更改光滑度">通过Smoothness可以更改光滑度</a></li>
        <li><a href="#layer常常用于隔绝物体例如raycast和光源等">Layer常常用于隔绝物体,例如RayCast和光源等</a></li>
        <li><a href="#所有unity脚本都必须继承monobehaviour父类">所有Unity脚本都必须继承MonoBehaviour父类</a></li>
        <li><a href="#所有unity脚本都必须应用以下命名空间">所有Unity脚本都必须应用以下命名空间:</a></li>
        <li><a href="#window-rendering-lighting">Window-&gt;Rendering-&gt;Lighting</a></li>
        <li><a href="#实体类">实体类</a></li>
        <li><a href="#将c4d中的模型导入到unity">将C4D中的模型导入到Unity</a></li>
        <li><a href="#运行项目时出现all-compiler-errors-have-to-be-fixed-before-entering-playmode">运行项目时出现<code>All compiler errors have to be fixed before entering playmode</code></a></li>
        <li><a href="#报错cant-add-the-script-componentbecause-the-script-class-cannot-be-found">报错<code>Can‘t add the script component,because the script class cannot be found</code></a></li>
        <li><a href="#unity应用apply预制体时报错">unity应用(Apply)预制体时报错</a></li>
        <li><a href="#unity导出为android时出错">Unity导出为Android时出错</a></li>
      </ul>
    </li>
    <li><a href="#your-liscense-dose-not-cover-android-publishing">Your liscense dose not cover Android Publishing</a>
      <ul>
        <li><a href="#时间延迟效果">时间延迟效果</a></li>
        <li><a href="#设置物体位置的方法">设置物体位置的方法</a></li>
        <li><a href="#input获取点击触摸事件">Input获取点击触摸事件</a></li>
      </ul>
    </li>
    <li><a href="#step2-小球项目">Step2. 小球项目</a>
      <ul>
        <li><a href="#通过c为游戏物体添加日志">通过C#为游戏物体添加日志</a></li>
        <li><a href="#使小球朝着指定方向移动">使小球朝着指定方向移动</a></li>
        <li><a href="#物体的向量">物体的向量</a></li>
        <li><a href="#unity监听键盘事件">Unity监听键盘事件</a></li>
        <li><a href="#控制小球左右移动">控制小球左右移动</a></li>
        <li><a href="#让摄像机跟随小球移动">让摄像机跟随小球移动</a></li>
        <li><a href="#预制体">预制体</a></li>
        <li><a href="#食物旋转">食物旋转</a></li>
        <li><a href="#检测碰撞事件">检测碰撞事件</a></li>
        <li><a href="#检测触发区">检测触发区</a></li>
        <li><a href="#ui">UI</a>
          <ul>
            <li><a href="#计分器">计分器</a></li>
            <li><a href="#游戏胜利">游戏胜利</a></li>
          </ul>
        </li>
        <li><a href="#游戏打包">游戏打包</a></li>
      </ul>
    </li>
    <li><a href="#step3-unity查询文档">Step3. Unity查询文档</a></li>
    <li><a href="#step4-3d建模机器人">Step4. 3D建模机器人</a>
      <ul>
        <li><a href="#导入资源">导入资源</a></li>
        <li><a href="#项目设置">项目设置</a></li>
      </ul>
    </li>
    <li><a href="#step5-材料">Step5. 材料</a>
      <ul>
        <li><a href="#制作砖墙">制作砖墙</a></li>
        <li><a href="#制作石球">制作石球</a></li>
        <li><a href="#制作天空盒">制作天空盒</a></li>
        <li><a href="#制作场景盒">制作场景盒</a></li>
      </ul>
    </li>
    <li><a href="#step6survivalshooter">Step6.SurvivalShooter</a>
      <ul>
        <li><a href="#场景创建">场景创建</a></li>
        <li><a href="#player">Player</a></li>
        <li><a href="#相机跟随">相机跟随</a></li>
        <li><a href="#创建敌人跟随player">创建敌人跟随Player</a></li>
        <li><a href="#玩家生命值系统">玩家生命值系统</a></li>
      </ul>
    </li>
    <li><a href="#step7tankfire">Step7.TankFire</a>
      <ul>
        <li><a href="#场景创建-1">场景创建</a></li>
        <li><a href="#控制坦克的移动">控制坦克的移动</a></li>
        <li><a href="#两个坦克同时移动">两个坦克同时移动</a></li>
      </ul>
    </li>
    <li><a href="#step8荒岛求生fps项目">Step8.荒岛求生FPS项目</a>
      <ul>
        <li><a href="#地形创建">地形创建</a></li>
      </ul>
    </li>
    <li><a href="#step9我的世界">Step9.我的世界</a>
      <ul>
        <li><a href="#导入资源-1">导入资源</a></li>
      </ul>
    </li>
    <li><a href="#step10发射子弹">Step10.发射子弹</a></li>
    <li><a href="#step11flappybird">Step11.FlappyBird</a>
      <ul>
        <li><a href="#场景搭建">场景搭建</a>
          <ul>
            <li><a href="#如果错创建成3d项目">如果错创建成3D项目</a></li>
            <li><a href="#创建三个场景">创建三个场景</a></li>
            <li><a href="#导入资源-2">导入资源</a></li>
            <li><a href="#导入一个小鸟和弹弓">导入一个小鸟和弹弓</a></li>
          </ul>
        </li>
        <li><a href="#使用springjoint实现小鸟绕着弹弓做弹跳运动">使用SpringJoint实现小鸟绕着弹弓做弹跳运动</a></li>
        <li><a href="#实现鼠标拖拽小鸟效果">实现鼠标拖拽小鸟效果</a></li>
        <li><a href="#实现小鸟拖拽规定范围">实现小鸟拖拽规定范围</a></li>
        <li><a href="#实现发射小鸟">实现发射小鸟</a></li>
        <li><a href="#实现猪受伤">实现猪受伤</a></li>
        <li><a href="#实现弹弓皮筋拖线">实现弹弓皮筋拖线</a></li>
        <li><a href="#实现攻击猪消失爆炸特效以及得分显示">实现攻击猪消失、爆炸特效以及得分显示</a>
          <ul>
            <li><a href="#爆炸特效">爆炸特效</a></li>
            <li><a href="#得分显示">得分显示</a></li>
          </ul>
        </li>
        <li><a href="#实现多个小鸟发射后轮换上来">实现多个小鸟发射后轮换上来</a></li>
        <li><a href="#解决第一只小鸟发射后第二支小鸟嗖的一下就跳上弹弓">解决第一只小鸟发射后第二支小鸟嗖的一下就跳上弹弓</a></li>
        <li><a href="#解决发射小鸟后皮筋不动的尴尬场景">解决发射小鸟后皮筋不动的尴尬场景</a></li>
        <li><a href="#给小鸟添加拖尾效果">给小鸟添加拖尾效果</a></li>
        <li><a href="#创建场景">创建场景</a></li>
        <li><a href="#创建胜利和失败ui界面">创建胜利和失败UI界面</a>
          <ul>
            <li><a href="#失败界面">失败界面</a></li>
            <li><a href="#胜利界面">胜利界面</a></li>
          </ul>
        </li>
        <li><a href="#给胜利ui界面添加三颗星星和星星闪的粒子系统">给胜利UI界面添加三颗星星和星星闪的粒子系统</a></li>
        <li><a href="#unity的渲染层级关系">Unity的渲染层级关系</a>
          <ul>
            <li><a href="#对于不同camera">对于不同Camera</a></li>
          </ul>
        </li>
        <li><a href="#同一个camera">同一个Camera</a>
          <ul>
            <li><a href="#同一个sorting-layer">同一个Sorting Layer</a></li>
          </ul>
        </li>
        <li><a href="#显示星光闪闪星星特效">显示星光闪闪星星特效</a></li>
        <li><a href="#从左往右开始一颗一颗的显示星星">从左往右开始一颗一颗的显示星星</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <!-- TOC -->
<ul>
<li><a href="#step1-unity%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E6%8A%80%E5%B7%A7%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3">Step1. Unity开发工具技巧以及相关文档</a></li>
<li><a href="#step2-%E5%B0%8F%E7%90%83%E9%A1%B9%E7%9B%AE">Step2. 小球项目</a>
<ul>
<li><a href="#%E9%80%9A%E8%BF%87c%E4%B8%BA%E6%B8%B8%E6%88%8F%E7%89%A9%E4%BD%93%E6%B7%BB%E5%8A%A0%E6%97%A5%E5%BF%97">通过C#为游戏物体添加日志</a></li>
<li><a href="#%E4%BD%BF%E5%B0%8F%E7%90%83%E6%9C%9D%E7%9D%80%E6%8C%87%E5%AE%9A%E6%96%B9%E5%90%91%E7%A7%BB%E5%8A%A8">使小球朝着指定方向移动</a></li>
<li><a href="#%E7%89%A9%E4%BD%93%E7%9A%84%E5%90%91%E9%87%8F">物体的向量</a></li>
<li><a href="#unity%E7%9B%91%E5%90%AC%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6">Unity监听键盘事件</a></li>
<li><a href="#%E6%8E%A7%E5%88%B6%E5%B0%8F%E7%90%83%E5%B7%A6%E5%8F%B3%E7%A7%BB%E5%8A%A8">控制小球左右移动</a></li>
<li><a href="#%E8%AE%A9%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F%E5%B0%8F%E7%90%83%E7%A7%BB%E5%8A%A8">让摄像机跟随小球移动</a></li>
<li><a href="#%E9%A2%84%E5%88%B6%E4%BD%93">预制体</a></li>
<li><a href="#%E9%A3%9F%E7%89%A9%E6%97%8B%E8%BD%AC">食物旋转</a></li>
<li><a href="#%E6%A3%80%E6%B5%8B%E7%A2%B0%E6%92%9E%E4%BA%8B%E4%BB%B6">检测碰撞事件</a></li>
<li><a href="#%E6%A3%80%E6%B5%8B%E8%A7%A6%E5%8F%91%E5%8C%BA">检测触发区</a></li>
<li><a href="#ui">UI</a>
<ul>
<li><a href="#%E8%AE%A1%E5%88%86%E5%99%A8">计分器</a></li>
<li><a href="#%E6%B8%B8%E6%88%8F%E8%83%9C%E5%88%A9">游戏胜利</a></li>
</ul>
</li>
<li><a href="#%E6%B8%B8%E6%88%8F%E6%89%93%E5%8C%85">游戏打包</a></li>
</ul>
</li>
<li><a href="#step3-unity%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3">Step3. Unity查询文档</a></li>
<li><a href="#step4-3d%E5%BB%BA%E6%A8%A1%E6%9C%BA%E5%99%A8%E4%BA%BA">Step4. 3D建模机器人</a>
<ul>
<li><a href="#%E5%AF%BC%E5%85%A5%E8%B5%84%E6%BA%90">导入资源</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E8%AE%BE%E7%BD%AE">项目设置</a></li>
</ul>
</li>
<li><a href="#step5-%E6%9D%90%E6%96%99">Step5. 材料</a>
<ul>
<li><a href="#%E5%88%B6%E4%BD%9C%E7%A0%96%E5%A2%99">制作砖墙</a></li>
<li><a href="#%E5%88%B6%E4%BD%9C%E7%9F%B3%E7%90%83">制作石球</a></li>
<li><a href="#%E5%88%B6%E4%BD%9C%E5%A4%A9%E7%A9%BA%E7%9B%92">制作天空盒</a></li>
<li><a href="#%E5%88%B6%E4%BD%9C%E5%9C%BA%E6%99%AF%E7%9B%92">制作场景盒</a></li>
</ul>
</li>
<li><a href="#survivalshooter">SurvivalShooter</a>
<ul>
<li><a href="#%E5%9C%BA%E6%99%AF%E5%88%9B%E5%BB%BA">场景创建</a></li>
<li><a href="#player">Player</a></li>
<li><a href="#%E7%9B%B8%E6%9C%BA%E8%B7%9F%E9%9A%8F">相机跟随</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%95%8C%E4%BA%BA%E8%B7%9F%E9%9A%8Fplayer">创建敌人跟随Player</a></li>
<li><a href="#%E7%8E%A9%E5%AE%B6%E7%94%9F%E5%91%BD%E5%80%BC%E7%B3%BB%E7%BB%9F">玩家生命值系统</a></li>
</ul>
</li>
<li><a href="#tankfire">TankFire</a>
<ul>
<li><a href="#%E5%9C%BA%E6%99%AF%E5%88%9B%E5%BB%BA">场景创建</a></li>
<li><a href="#%E6%8E%A7%E5%88%B6%E5%9D%A6%E5%85%8B%E7%9A%84%E7%A7%BB%E5%8A%A8">控制坦克的移动</a></li>
<li><a href="#%E4%B8%A4%E4%B8%AA%E5%9D%A6%E5%85%8B%E5%90%8C%E6%97%B6%E7%A7%BB%E5%8A%A8">两个坦克同时移动</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<p><img src="https://img-blog.csdnimg.cn/20210825041432992.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBA5a2k5ZCNQA==,size_43,color_FFFFFF,t_70,g_se,x_16" alt="Photo"></p>
<h1 id="step1-unity开发工具技巧以及相关文档">Step1. Unity开发工具技巧以及相关文档</h1>
<p><img src="https://img-blog.csdnimg.cn/20210809015406107.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-01"></p>
<h2 id="设置ceditor为visual-studio">设置C#Editor为Visual Studio</h2>
<blockquote>
<p>File-&gt;Preferences-&gt;External Tools-&gt;External Script Editor</p>
</blockquote>
<h2 id="project-assets文件夹里放置的是工程相关文件例如材质c脚本以及模板等">Project-&gt;Assets文件夹里放置的是工程相关文件,例如材质、C#脚本以及模板等</h2>
<h2 id="hierarchy里面放的是所有物体基础物体有摄像机和灯光">Hierarchy里面放的是所有物体,基础物体有摄像机和灯光</h2>
<p><img src="https://img-blog.csdnimg.cn/20210809020517212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-02"></p>
<h2 id="在hierarchy里点击一个物体右侧就会出现inspector这是游戏物体的组件transform下的position是物体的位置rotation是角度scale是x轴y轴z轴的尺寸">在Hierarchy里点击一个物体,右侧就会出现Inspector,这是游戏物体的组件,Transform下的Position是物体的位置,Rotation是角度,Scale是x轴、y轴、z轴的尺寸</h2>
<h2 id="这几个功能是操控物体的方式有操纵三维坐标的角度有移动三维坐标的位置">这几个功能是操控物体的方式,有操纵三维坐标的角度,有移动三维坐标的位置</h2>
<p><img src="https://img-blog.csdnimg.cn/20210809020550731.png" alt="Photo-03"></p>
<h2 id="packages中放置的是unity开发一些常用的插件">Packages中放置的是Unity开发一些常用的插件</h2>
<h2 id="在物体上添加c脚本">在物体上添加C#脚本</h2>
<blockquote>
<p>在Assets文件夹中新建一个Scripts文件夹,用于放置所有的C#脚本</p>
</blockquote>
<blockquote>
<p>右键文件夹-&gt;Create-&gt;C#Script</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210809022826388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-04"></p>
<blockquote>
<p>脚本创建完成后将这个脚本拖动给物体就可以了</p>
</blockquote>
<blockquote>
<p>这时候点击游戏物体,查看右侧游戏物体的组件,就可以看到下面有一个C#代码显示</p>
</blockquote>
<h2 id="给物体添加材质">给物体添加材质</h2>
<blockquote>
<p>材质就是物体的颜色等,常用为颜色</p>
</blockquote>
<blockquote>
<blockquote>
<p>在Assets文件夹中新建一个Scenes文件夹,用于放置所有的材质</p>
</blockquote>
</blockquote>
<blockquote>
<p>右键文件夹-&gt;Create-&gt;Material</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210809022826388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-04"></p>
<blockquote>
<p>材质创建完成后拖动给物体</p>
</blockquote>
<blockquote>
<p>然后点击材质,可以根据更改材质的颜色更改物体的颜色</p>
</blockquote>
<h2 id="unity中制作游戏过程中创建的所有物体如果不保存是不会有效的">Unity中制作游戏过程中创建的所有物体如果不保存是不会有效的</h2>
<blockquote>
<p>可以将整个项目另存为.unity可执行文件格式</p>
</blockquote>
<h2 id="如果想让物体和地面贴合就将物体的y轴坐标设置为05">如果想让物体和地面贴合,就将物体的y轴坐标设置为0.5</h2>
<h2 id="project栏目下文件夹里内容的图标可以通过底部的拖动功能更改图标的大小">Project栏目下文件夹里内容的图标可以通过底部的拖动功能更改图标的大小</h2>
<h2 id="unity切换视角">Unity切换视角</h2>
<blockquote>
<p>按住Alt键,鼠标就会变成一个眼睛,你就可以通过移动眼睛移动鼠标切换视角了</p>
</blockquote>
<h2 id="通过smoothness可以更改光滑度">通过Smoothness可以更改光滑度</h2>
<p><img src="https://img-blog.csdnimg.cn/20210813002451668.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-05"></p>
<h2 id="layer常常用于隔绝物体例如raycast和光源等">Layer常常用于隔绝物体,例如RayCast和光源等</h2>
<h2 id="所有unity脚本都必须继承monobehaviour父类">所有Unity脚本都必须继承MonoBehaviour父类</h2>
<h2 id="所有unity脚本都必须应用以下命名空间">所有Unity脚本都必须应用以下命名空间:</h2>
<blockquote>
<p>using System.Collections;</p>
</blockquote>
<blockquote>
<p>using System.Collections.Generic;</p>
</blockquote>
<blockquote>
<p>using UnityEngine;</p>
</blockquote>
<h2 id="window-rendering-lighting">Window-&gt;Rendering-&gt;Lighting</h2>
<ul>
<li>
<p>快捷键:</p>
<p>E:旋转</p>
<p>w:位移</p>
<p>Alt:转换视角</p>
<pre><code>  调整UI在Canvas中的位置
</code></pre>
</li>
</ul>
<h2 id="实体类">实体类</h2>
<ul>
<li>Transform</li>
</ul>
<blockquote>
<p>对象的位置、旋转以及缩放</p>
</blockquote>
<blockquote>
<p>transform.Find:查找子项并返回</p>
</blockquote>
<ul>
<li>
<p>Time类</p>
<blockquote>
<p>Time.delTime</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">Time.deltaTime 理解 ：完成上一帧所用的时间
  
FPS:一秒执行多少帧
  
update 是每帧执行一次，transform.Translate 写在 update 中
  
transform.Translate<span class="o">(</span>new Vector3<span class="o">(</span>1,0,0<span class="o">))</span> 每帧向 x 轴正方向移动 <span class="m">1</span> 个单位
  
transform.Translate<span class="o">(</span>new Vector3<span class="o">(</span>1*Time.deltaTime,0,0<span class="o">))</span> 每秒向 x 轴正方向移动 <span class="m">1</span> 个单位
  
Time.deltaTime &lt;<span class="m">1</span> ，也是不固定的 
  
60FPS 的时候 Time.deltaTime<span class="o">=</span>0.02s，transform.Translate<span class="o">(</span>new Vector3<span class="o">(</span>1*Time.deltaTime,0,0<span class="o">))=</span>transform.Translate<span class="o">(</span>new Vector3<span class="o">(</span>0.02f,0,0<span class="o">))</span>，即每帧移动 0.02 个单位，如果 FPS 不变的话，理论就是 <span class="m">60</span> 帧移动了 <span class="m">1</span> 个单位，而 <span class="m">60</span> 帧所用的时间就是 <span class="m">1</span> 秒。所以，就是官方说的要让数值按照每秒多少进行变化时就把这个数值乘以 Time.deltaTime 就可以了
</code></pre></td></tr></table>
</div>
</div><h2 id="将c4d中的模型导入到unity">将C4D中的模型导入到Unity</h2>
<blockquote>
<p>在C4D中将模型导入为.fbx格式</p>
<p>直接拖到Unity的Assets中</p>
<p>设置</p>
<p><img src="https://img-blog.csdnimg.cn/65f49c1df0c444d8a035c9e394732a3c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>run🏃</p>
</blockquote>
</li>
</ul>
<h2 id="运行项目时出现all-compiler-errors-have-to-be-fixed-before-entering-playmode">运行项目时出现<code>All compiler errors have to be fixed before entering playmode</code></h2>
<ul>
<li>说明脚本写错了,根据报错更正脚本</li>
<li>如果是导入外包后报错,可以直接将脚本注释掉</li>
</ul>
<h2 id="报错cant-add-the-script-componentbecause-the-script-class-cannot-be-found">报错<code>Can‘t add the script component,because the script class cannot be found</code></h2>
<ul>
<li>类名和文件名不一致</li>
</ul>
<h2 id="unity应用apply预制体时报错">unity应用(Apply)预制体时报错</h2>
<p><code>错误信息</code></p>
<blockquote>
<p>You are trying to replace or create a prefab from the instance &lsquo;Panel&rsquo; that references a missing script. This is not allowed. Please change the script or remove it from the game object.</p>
</blockquote>
<p><code>解决方法</code></p>
<blockquote>
<p>仔细检查预制体身上引用的组件或者脚本是否已经丢失引用了,如果丢失了引用,那么就把这个丢失的脚本从预制体身上删除，然后在点击Apply</p>
</blockquote>
<hr>
<h2 id="unity导出为android时出错">Unity导出为Android时出错</h2>
<ul>
<li>
<p>显示</p>
<blockquote>
<h1 id="your-liscense-dose-not-cover-android-publishing">Your liscense dose not cover Android Publishing</h1>
</blockquote>
</li>
<li>
<p>关闭项目,登录UnityHub就好了</p>
</li>
</ul>
<h2 id="时间延迟效果">时间延迟效果</h2>
<ul>
<li>
<p>还得整什么隔多少时间执行哪个方法</p>
</li>
<li>
<p>直接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="kt">float</span> <span class="n">lastTime</span><span class="p">;</span>   <span class="c1">//计时器
</span><span class="c1"></span><span class="k">private</span> <span class="kt">float</span> <span class="n">curTime</span><span class="p">;</span>
  
<span class="k">void</span> <span class="n">Start</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">lastTime</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">time</span><span class="p">;</span>      <span class="c1">//这里利用start开始时开始计时
</span><span class="c1"></span>    <span class="p">}</span>
  
<span class="k">void</span> <span class="n">Update</span> <span class="p">()</span> 
<span class="p">{</span>
  <span class="n">curTime</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">time</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">curTime</span> <span class="p">-</span> <span class="n">lastTime</span> <span class="p">&gt;=</span> <span class="m">6</span><span class="p">)</span>   <span class="c1">//时间差大于6秒过后
</span><span class="c1"></span>  <span class="p">{</span>
  
  <span class="p">}</span>   
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="设置物体位置的方法">设置物体位置的方法</h2>
<p>相对父节点</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cs" data-lang="cs"><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>世界坐标</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cs" data-lang="cs"><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="input获取点击触摸事件">Input获取点击触摸事件</h2>
<p><code>Input.GetMouseButtonDown(intbutton)</code></p>
<blockquote>
<ul>
<li>
<p><code>参数</code>：button—表示鼠标上的键</p>
<ul>
<li>0：表示鼠标左键</li>
<li>1：表示鼠标右键</li>
<li>2表示鼠标中键</li>
<li>3：表示鼠标上键</li>
<li>4：表示鼠标下键</li>
</ul>
</li>
<li>
<p><code>返回值</code>:bool —&gt; 当鼠标上某个键被按下之后，其返回值为true，否则为false</p>
</li>
<li>
<p><code>含义</code>:检测鼠标上的某个键是否被按下，如果该键被按下，其返回值为true，否则为false</p>
</li>
</ul>
</blockquote>
<p><code>Input.GetKey(KeyCode key)</code></p>
<blockquote>
<p>检测键盘上的某个键是否被<code>一直按住</code>，如果该键一直按住，其返回值为true，否则为false</p>
</blockquote>
<p><code>Input.GetKeyDown(KeyCodekey)</code></p>
<blockquote>
<p>检测键盘上的某个键是否被按下，如果该键被按下，其返回值为true，否则为false</p>
</blockquote>
<p><code>Input.GetKeyUp(KeyCodekey)</code></p>
<blockquote>
<p>检测键盘上的某个键是否被按下之后抬起，如果该键被按下之后抬起，其返回值为true，否则为false</p>
</blockquote>
<p><code>Input.GetAxis(stringaxisName)</code></p>
<ul>
<li>
<p><code>参数</code></p>
<blockquote>
<p>axisName—轴向</p>
<p>​    Horizontal：表示水平方向，其值从-1到1之间变化</p>
<ul>
<li>当A键被按下的时候其在水平方向上的向量为0-1（取不到0）</li>
<li>当D键被按下的时候其在水平方向上的向量为-1-0（取不到0）</li>
<li>当A键和D键都没有被按下的时候，其水平方向上的向量为0</li>
</ul>
<p>​    Vertical：表示竖直方向，其值从-1到1之间的变化</p>
<ul>
<li>当W键被按下的时候其在竖直方向上的向量为0-1（取不到0）</li>
<li>当S键被按下的时候其在竖直方向上的向量为-1-0（取不到0）</li>
<li>当S键和W键都没有被按下的时候，其竖直方向上的向量为0</li>
</ul>
</blockquote>
</li>
<li>
<p><code>返回值</code>:float—按下设定的某个键之后，表示变化的数值，从-1到1之间变化</p>
</li>
<li>
<p><code>含义</code>:检测键盘上某个按键被一直按住的时候，其在设定的方向上的变化</p>
</li>
</ul>
<p><code>Input.touchCount</code></p>
<blockquote>
<p>触摸点数量(几根手指正在触摸屏幕)</p>
</blockquote>
<p><code>TouchPhase</code></p>
<ul>
<li>Began                     手指已触摸屏幕</li>
<li>Moved                     手指在屏幕上移动</li>
<li>Stationary               手指触摸屏幕，但是并没有移动</li>
<li>Ended                     手指从屏幕上移动，这是一个触摸的最后状态</li>
<li>Canceled                系统取消跟踪触摸，如用户把屏幕放到他的脸上或超过五个接触同时发生。这是一个触摸的最后状态</li>
</ul>
<h1 id="step2-小球项目">Step2. 小球项目</h1>
<h2 id="通过c为游戏物体添加日志">通过C#为游戏物体添加日志</h2>
<p><code>Player.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Player</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span>

    <span class="c1">// 游戏启动进行初始化操作
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&#34;游戏开始!!!&#34;</span><span class="p">);</span>
        <span class="c1">//打印    输出  显示
</span><span class="c1"></span>        <span class="c1">//日志:记录游戏运行的状态
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&#34;游戏正在运行!!!&#34;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Start()方法只有在游戏启动时执行一次</p>
</blockquote>
<blockquote>
<p>而Update方法从游戏运行开始就不停的反复执行</p>
</blockquote>
<blockquote>
<p>所以通常在Start()方法中初始化参数,在Update方法中写业务逻辑</p>
</blockquote>
<h2 id="使小球朝着指定方向移动">使小球朝着指定方向移动</h2>
<ul>
<li>为物体添加刚体组件</li>
</ul>
<blockquote>
<p>点击物体-&gt;Add Component-&gt;Physics-&gt;Rigidbody</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210808232132317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-04"></p>
<ul>
<li>
<p>将C#代码添加到Unity中</p>
<p><code>Player.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Player</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span>
  
    <span class="c1">// 游戏启动进行初始化操作
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&#34;游戏开始!!!&#34;</span><span class="p">);</span>
        <span class="c1">//打印    输出  显示
</span><span class="c1"></span>        <span class="c1">//日志:记录游戏运行的状态
</span><span class="c1"></span>  
        <span class="c1">//获取组件(刚体组件泛型)
</span><span class="c1"></span>        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
  
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&#34;游戏正在运行!!!&#34;</span><span class="p">);</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="物体的向量">物体的向量</h2>
<ul>
<li>
<p>指定方向移动</p>
<blockquote>
<p>rd.AddForce(Vector3.right);</p>
</blockquote>
</li>
<li>
<p>朝着指定向量方向移动</p>
<blockquote>
<p>rd.AddForce(new Vector3(x, y, z));</p>
</blockquote>
</li>
<li>
<p>你也可以通过向量乘以力控制速度</p>
<p>rd.AddForce(new Vector3(x, y, z) * F);</p>
</li>
</ul>
<h2 id="unity监听键盘事件">Unity监听键盘事件</h2>
<ul>
<li>
<p>GetAxis获取一个轴</p>
<blockquote>
<p>Input.GetAxis(&ldquo;Horizontal&rdquo;);</p>
</blockquote>
<blockquote>
<p>这个方法有一个float类型的返回值,就是你按键盘的方向速度的值</p>
</blockquote>
<blockquote>
<p>float h = Input.GetAxis(&ldquo;Horizontal&rdquo;);</p>
</blockquote>
</li>
</ul>
<h2 id="控制小球左右移动">控制小球左右移动</h2>
<p><code>Player2.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span><span class="c1">//导入物理引擎
</span><span class="c1"></span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Player2</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span><span class="c1">//声明刚体组件对象
</span><span class="c1"></span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">force</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span><span class="c1">//力的大小
</span><span class="c1"></span>
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="c1">//实例化刚体组件对象
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span><span class="c1">//得到键盘wasd方向上的控制
</span><span class="c1"></span>        <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">*</span> <span class="n">force</span><span class="p">);</span><span class="c1">//对物体施加力
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="让摄像机跟随小球移动">让摄像机跟随小球移动</h2>
<ul>
<li>
<p>为摄像机编写脚本</p>
<p><code>FollowTransform.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">FollowTarget</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="cm">/*
</span><span class="cm">    * 使用Transform组件获取物体对象位置
</span><span class="cm">    * 这里声明组件是为了储存小球的位置
</span><span class="cm">    */</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">playerTransform</span><span class="p">;</span><span class="c1">//声明Transform类型对象(Transform是一个组件,组件也是对象)
</span><span class="c1"></span>  
    <span class="c1">//Vector3是一个三维向量,也是一个对象
</span><span class="c1"></span>    <span class="c1">//声明一个三维向量做为摄像机和小球的位移差
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">offset</span><span class="p">;</span>
  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//位置偏移量 = 摄像机的位置 - 小球的位置
</span><span class="c1"></span>        <span class="c1">//transform.position-&gt;获取自身对象的位置
</span><span class="c1"></span>        <span class="n">offset</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">playerTransform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//小球的位置加上偏移量就等于摄像机的位置
</span><span class="c1"></span>        <span class="cm">/*
</span><span class="cm">        * 因为
</span><span class="cm">        * 偏移量不仅仅有大小,还有方向
</span><span class="cm">        * offset = transform.position - playerTransform.position;
</span><span class="cm">        * 这行代码是用摄像机的位置减去小球的位置,向量方向从摄像机指向小球
</span><span class="cm">        * 所以你在这里使用小球的位置加上偏移量实质上就是在小球的位置向着这个偏移量向量的方向减去偏移量
</span><span class="cm">        * 就是某一个位置,偏移量向量以这个位置为起点,终点为小球的位置,这个位置就是实时的摄像机位置
</span><span class="cm">        * 就是让摄像机和小球之间一直是这个向量
</span><span class="cm">        * 因为向量有大小有方向
</span><span class="cm">        */</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">playerTransform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">offset</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将要追踪的对象拖动到摄像机的Player(Transform)中</p>
<p><img src="https://img-blog.csdnimg.cn/20210809010358216.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-05"></p>
</li>
<li>
<p>然后就实现摄像机实时跟踪物体运动</p>
</li>
</ul>
<h2 id="预制体">预制体</h2>
<p><img src="https://img-blog.csdnimg.cn/20210809021142396.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-06"></p>
<ul>
<li>
<p>除了小球和食物,其他都是场景,我们就可以创建一个空物体来存放所有的场景</p>
</li>
<li>
<p>来让项目更整洁有序</p>
</li>
<li>
<p>习惯将这个空坐标设置为世界坐标系原点</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210809020517212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-07"></p>
<ul>
<li>
<p>小球项目中,创建多个食物的时候,如果通过不断创建或者Ctrl+C-&gt;Ctrl+V的方式创建的话,由于这些食物很多组件都应该是一样的,后续我们想更改就需要一个一个更改,很繁琐</p>
</li>
<li>
<p>这时候我们使用模板方法</p>
</li>
<li>
<p>我们可以只创建一个食物,然后在Assets中创建Prefabs文件夹用于存放预制体</p>
</li>
<li>
<p>将食物拖动到Prefabs文件夹中,就成功创建模板(预制体)了</p>
</li>
<li>
<p>然后在预制体物体上通过Ctrl+D复制创建多个食物()</p>
</li>
<li>
<p>之后通过更改Prefabs文件夹中模板的组件就可以了</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210809231453879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-08"></p>
<p><img src="https://img-blog.csdnimg.cn/20210810011725603.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-09"></p>
<h2 id="食物旋转">食物旋转</h2>
<ul>
<li>
<p>我们通过C#脚本控制食物的旋转</p>
</li>
<li>
<p>这里需要注意的是,需要先将父食物物体调整角度,使它的一个顶角立在地面上,再进行复制生成食物操作</p>
</li>
<li>
<p>如果先复制再调整父食物的角度,子食物的角度不会被同时更改</p>
</li>
<li>
<p>操作步骤:</p>
<blockquote>
<p>将父食物物体调整角度,使它的一个顶角立在地面上</p>
</blockquote>
<blockquote>
<p>编写C#脚本</p>
</blockquote>
<p><code>Food.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#">  <span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
  <span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
  <span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
  <span class="k">public</span> <span class="k">class</span> <span class="nc">Food</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
  <span class="p">{</span>
      <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>      <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
      <span class="p">{</span>
  
      <span class="p">}</span>
  
      <span class="c1">// Update is called once per frame
</span><span class="c1"></span>      <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
      <span class="p">{</span>
          <span class="c1">//Rotate表示让他自身进行一个旋转
</span><span class="c1"></span>          <span class="c1">//参数为朝着那个方向旋转,转多少度  
</span><span class="c1"></span>          <span class="c1">//由于Update方法是始终执行的,所以食物就会不停地向上转动,从而实现模拟转动的效果
</span><span class="c1"></span>          <span class="n">transform</span><span class="p">.</span><span class="n">Rotate</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">);</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>将脚本添加为父食物的游戏组件</p>
</blockquote>
</li>
</ul>
<h2 id="检测碰撞事件">检测碰撞事件</h2>
<ul>
<li>
<p>小球碰撞到食物食物自动消失</p>
</li>
<li>
<p>物体有名字,也有标签</p>
</li>
<li>
<p>但是我们没法获取名字,但是可以获取标签</p>
</li>
<li>
<p>这之前,我们需要给食物添加标签</p>
<blockquote>
<p>进入父食物组件</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210810015258561.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-10"></p>
<p><img src="https://img-blog.csdnimg.cn/20210810015604427.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-11"></p>
<blockquote>
<p>设置标签名称为Food,点击Save保存</p>
</blockquote>
</li>
<li>
<p>然后编写C#脚本,通过对象属性获取与当前对象发生碰撞的游戏物体的标签,如果获取结果是食物的标签,就将发生碰撞的游戏物体销毁</p>
<p><code>Player2.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span><span class="c1">//导入物理引擎
</span><span class="c1"></span>  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Player2</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span><span class="c1">//声明刚体对象
</span><span class="c1"></span>  
    <span class="k">public</span> <span class="kt">int</span> <span class="n">force</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span><span class="c1">//力的大小
</span><span class="c1"></span>  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="c1">//实例化刚体对象
</span><span class="c1"></span>    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span><span class="c1">//得到键盘wasd方向上的控制
</span><span class="c1"></span>        <span class="c1">//Debug.Log(v);
</span><span class="c1"></span>        <span class="c1">//Debug.Log(h);
</span><span class="c1"></span>        <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">*</span> <span class="n">force</span><span class="p">);</span><span class="c1">//对物体施加力
</span><span class="c1"></span>    <span class="p">}</span>
  
    <span class="c1">//系统事件
</span><span class="c1"></span>    <span class="c1">//Collision是碰撞器,参数主要保存了碰撞信息,你碰撞到了谁
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnCollisionEnter</span><span class="p">(</span><span class="n">Collision</span> <span class="n">collision</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&#34;发生碰撞!!!&#34;</span><span class="p">);</span>
  
    <span class="c1">//    /*
</span><span class="c1"></span>    <span class="c1">//     * collision.collider.tag
</span><span class="c1"></span>    <span class="c1">//     * 也可以通过游戏组件中的标签判断是否碰撞
</span><span class="c1"></span>    <span class="c1">//     */
</span><span class="c1"></span>  
        <span class="c1">//collision.gameObject的含义是碰撞到的物体对象
</span><span class="c1"></span>        <span class="c1">//collision.gameObject.tag的含义是碰撞到的游戏物体对象的标签
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">&#34;Food&#34;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Destroy</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">//private void OnCollisionExit(Collision collision)
</span><span class="c1"></span>    <span class="c1">//{
</span><span class="c1"></span>    <span class="c1">//    Debug.Log(&#34;碰撞结束!!!&#34;);
</span><span class="c1"></span>    <span class="c1">//}
</span><span class="c1"></span>  
    <span class="c1">//private void OnCollisionStay(Collision collision)
</span><span class="c1"></span>    <span class="c1">//{
</span><span class="c1"></span>    <span class="c1">//    Debug.Log(&#34;碰撞过程中!!!&#34;);
</span><span class="c1"></span>    <span class="c1">//}
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将脚本添加为小球的组件</p>
</li>
</ul>
<h2 id="检测触发区">检测触发区</h2>
<ul>
<li>
<p>因为游戏物体相互接触默认是碰撞器,这样游戏物体之间的碰撞会产生物理效果</p>
</li>
<li>
<p>但是我们在玩游戏的时候触碰到物体通常是不会有物理效果而直接穿过的</p>
</li>
<li>
<p>所以我们需要将游戏物体默认的碰撞器更改成触发器</p>
<p><img src="https://img-blog.csdnimg.cn/20210810020709834.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-12"></p>
</li>
<li>
<p>勾选Box Collider和Is Trigger</p>
</li>
<li>
<p>上面的Collision是碰撞器,这里是Collider,是触发器</p>
</li>
<li>
<p>所以方法相似但不相同</p>
</li>
</ul>
<p><code>Player2.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#">  <span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
  <span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
  <span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span><span class="c1">//导入物理引擎
</span><span class="c1"></span>
  <span class="k">public</span> <span class="k">class</span> <span class="nc">Player2</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
  <span class="p">{</span>
      <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span><span class="c1">//声明刚体对象
</span><span class="c1"></span>
      <span class="k">public</span> <span class="kt">int</span> <span class="n">force</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span><span class="c1">//力的大小
</span><span class="c1"></span>
      <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>      <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
      <span class="p">{</span>
          <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="c1">//实例化刚体对象
</span><span class="c1"></span>      <span class="p">}</span>

      <span class="c1">// Update is called once per frame
</span><span class="c1"></span>      <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
      <span class="p">{</span>
          <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
          <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span><span class="c1">//得到键盘wasd方向上的控制
</span><span class="c1"></span>          <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">*</span> <span class="n">force</span><span class="p">);</span><span class="c1">//对物体施加力
</span><span class="c1"></span>      <span class="p">}</span>

      <span class="c1">//Collider是触发器,当前对象进入了那个物体的触发区域
</span><span class="c1"></span>      <span class="k">private</span> <span class="k">void</span> <span class="n">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span>
      <span class="p">{</span>
          <span class="c1">//Debug.Log(&#34;OnTriggerEnter&#34; + other.tag);
</span><span class="c1"></span>          <span class="k">if</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">&#34;Food&#34;</span><span class="p">)</span>
          <span class="p">{</span>
              <span class="n">Destroy</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
          <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">//private void OnTriggerExit(Collider other)
</span><span class="c1"></span>      <span class="c1">//{
</span><span class="c1"></span>
      <span class="c1">//}
</span><span class="c1"></span>
      <span class="c1">//private void OnTriggerStay(Collider other)
</span><span class="c1"></span>      <span class="c1">//{
</span><span class="c1"></span>
      <span class="c1">//}
</span><span class="c1"></span>  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ui">UI</h2>
<ul>
<li>
<p>UI,全称User Interface(用户界面/用户接口)</p>
</li>
<li>
<p>这里我们要通过UI实现计分器和游戏胜利显示</p>
</li>
<li>
<p>首先需要创建UI</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210810021503193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-13"></p>
<p><img src="https://img-blog.csdnimg.cn/20210810021926220.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-14"></p>
<h3 id="计分器">计分器</h3>
<ul>
<li>创建好计分UI后,在Player的C#组件上编写代码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span><span class="c1">//导入物理引擎
</span><span class="c1"></span><span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span><span class="c1">//导入UI命名空间
</span><span class="c1"></span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Player2</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span><span class="c1">//声明刚体对象
</span><span class="c1"></span>        <span class="k">public</span> <span class="kt">int</span> <span class="n">force</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span><span class="c1">//力的大小
</span><span class="c1"></span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">score</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span><span class="c1">//记录得分
</span><span class="c1"></span>        <span class="c1">//类里面声明的属性都是组件,这里将scoreText设置成public,在Inspector面板里就可以看到scoreText了
</span><span class="c1"></span>        <span class="k">public</span> <span class="n">Text</span> <span class="n">scoreText</span><span class="p">;</span><span class="c1">//计分UI组件,Text对象是UI库空间中的一个子类,需要导入命名空间才能使用
</span><span class="c1"></span>
        <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>        <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="c1">//实例化刚体对象
</span><span class="c1"></span>        <span class="p">}</span>

        <span class="c1">// Update is called once per frame
</span><span class="c1"></span>        <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
            <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span><span class="c1">//得到键盘wasd方向上的控制
</span><span class="c1"></span>            <span class="c1">//Debug.Log(v);
</span><span class="c1"></span>            <span class="c1">//Debug.Log(h);
</span><span class="c1"></span>            <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">*</span> <span class="n">force</span><span class="p">);</span><span class="c1">//对物体施加力
</span><span class="c1"></span>        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="n">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//Debug.Log(&#34;OnTriggerEnter&#34; + other.tag);
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">&#34;Food&#34;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Destroy</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>

                <span class="c1">//发生一次碰撞,得分就加1
</span><span class="c1"></span>                <span class="n">score</span><span class="p">++;</span>

                <span class="c1">//更新UI显示
</span><span class="c1"></span>                <span class="c1">//scoreText.text就是用来更新UI的显示内容的(替换字符串)
</span><span class="c1"></span>                <span class="n">scoreText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;分数:&#34;</span> <span class="p">+</span> <span class="n">score</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>然后将UI拖动到Player的C#组件中</p>
<p><img src="https://img-blog.csdnimg.cn/20210810023007137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-15"></p>
</li>
</ul>
<h3 id="游戏胜利">游戏胜利</h3>
<ul>
<li>
<p>创建出游戏胜利显示的UI</p>
</li>
<li>
<p>因为如果这样直接运行屏幕上会一直显示游戏胜利</p>
</li>
<li>
<p>所以我们开始将游戏胜利UI禁用,在C#脚本中判断游戏胜利,游戏胜利时将脚本激活启用,显示内容</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2021081002362124.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-16"></p>
<ul>
<li>
<p>然后编写Player的C#组件</p>
<p><code>Player2.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span><span class="c1">//导入物理引擎
</span><span class="c1"></span><span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span><span class="c1">//导入UI命名空间
</span><span class="c1"></span>  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Player2</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rd</span><span class="p">;</span><span class="c1">//声明刚体对象
</span><span class="c1"></span>  
    <span class="k">public</span> <span class="kt">int</span> <span class="n">force</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span><span class="c1">//力的大小
</span><span class="c1"></span>  
    <span class="k">public</span> <span class="kt">int</span> <span class="n">score</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span><span class="c1">//记录得分
</span><span class="c1"></span>  
    <span class="k">public</span> <span class="n">Text</span> <span class="n">scoreText</span><span class="p">;</span><span class="c1">//计分UI组件
</span><span class="c1"></span>  
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">winText</span><span class="p">;</span><span class="c1">//定义一个游戏物体组件
</span><span class="c1"></span>  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="c1">//实例化刚体对象
</span><span class="c1"></span>    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span><span class="c1">//得到键盘wasd方向上的控制
</span><span class="c1"></span>        <span class="c1">//Debug.Log(v);
</span><span class="c1"></span>        <span class="c1">//Debug.Log(h);
</span><span class="c1"></span>        <span class="n">rd</span><span class="p">.</span><span class="n">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">*</span> <span class="n">force</span><span class="p">);</span><span class="c1">//对物体施加力
</span><span class="c1"></span>    <span class="p">}</span>
  
    <span class="c1">//Collider是触发器,当前对象进入了那个物体的触发区域
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//Debug.Log(&#34;OnTriggerEnter&#34; + other.tag);
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">&#34;Food&#34;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Destroy</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
            <span class="n">score</span><span class="p">++;</span>
  
            <span class="c1">//更新UI显示
</span><span class="c1"></span>            <span class="n">scoreText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;分数:&#34;</span> <span class="p">+</span> <span class="n">score</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">score</span> <span class="p">==</span> <span class="m">8</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/*
</span><span class="cm">                * 为了在游戏运行过程中不让游戏胜利的UI一直显示
</span><span class="cm">                * 将游戏物体禁用
</span><span class="cm">                * 当通关了我们需要将游戏物体激活
</span><span class="cm">                */</span>
                <span class="n">winText</span><span class="p">.</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将游戏胜利UI添加给Player的C#组件的属性</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210810024039737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-17"></p>
<h2 id="游戏打包">游戏打包</h2>
<ul>
<li>
<p>到现在为止,整个游戏项目已经全部完成了</p>
</li>
<li>
<p>现在我们将项目打包成可执行文件,就是说玩家不可能说玩个游戏还要下载Unity吧</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2021081002421989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-18"></p>
<p><img src="https://img-blog.csdnimg.cn/20210810024436290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-19"></p>
<h1 id="step3-unity查询文档">Step3. Unity查询文档</h1>
<p><img src="https://img-blog.csdnimg.cn/20210810012212202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-10"></p>
<p><img src="https://img-blog.csdnimg.cn/20210809224106340.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-11"></p>
<h1 id="step4-3d建模机器人">Step4. 3D建模机器人</h1>
<h2 id="导入资源">导入资源</h2>
<ul>
<li>
<p>新建项目</p>
</li>
<li>
<p>打开AssessStore</p>
<p><img src="https://img-blog.csdnimg.cn/20210812021138973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-12"></p>
</li>
<li>
<p>由于新版本需要从浏览器在线打开资源库,点击这里,通过浏览器打开</p>
<p><img src="https://img-blog.csdnimg.cn/20210812021127994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-13"></p>
</li>
<li>
<p>找到Space Robot Kyle和Basic Motion Free</p>
<p><img src="https://img-blog.csdnimg.cn/20210812021742334.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-14">
<img src="https://img-blog.csdnimg.cn/20210812023526574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-15"></p>
</li>
<li>
<p>将二者分别添加到Unity中并用Unity打开</p>
</li>
<li>
<p>接着返回Unity界面,一顿download+import</p>
</li>
<li>
<p>将两个资源导入即可</p>
<p><img src="https://img-blog.csdnimg.cn/20210812024025139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-16"></p>
</li>
</ul>
<h2 id="项目设置">项目设置</h2>
<ul>
<li>绑定模型的骨骼</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210812024616808.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-17"></p>
<p><img src="https://img-blog.csdnimg.cn/20210812024737425.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-18"></p>
<p><img src="https://img-blog.csdnimg.cn/2021081202475845.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-19"></p>
<ul>
<li>
<p>绑定之后,模型组件中就出现了Avator</p>
<p><img src="https://img-blog.csdnimg.cn/20210812025151890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-20"></p>
</li>
<li>
<p>但是Controler组件还是空的,所以我们需要创建一个行为控制器,之后外部动作资源都需要依靠行为控制器才能发挥作用</p>
</li>
<li>
<p>新建一个Anim文件夹,用于存放行为控制器</p>
</li>
<li>
<p>在Anim中新建行为控制器</p>
<p><img src="https://img-blog.csdnimg.cn/20210812025741336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-21"></p>
</li>
<li>
<p>然后将它拖入到模型的Controler中</p>
<p><img src="https://img-blog.csdnimg.cn/20210812025906872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-22"></p>
</li>
<li>
<p>双击行为控制器</p>
</li>
<li>
<p>将原地站立动作拖到Entry中作为起始动作</p>
</li>
<li>
<p>将行走动作作为第二动作放在原地站立下面</p>
</li>
<li>
<p>将跑步动作作为第三动作放在行走下面</p>
<p><img src="https://img-blog.csdnimg.cn/20210812030046233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-23"></p>
</li>
<li>
<p>然后通过这种方式将三个动作联系起来,目的是实现动作之间的相互转换</p>
<p><img src="https://img-blog.csdnimg.cn/20210812030410916.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-24"></p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210812030250953.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-25"></p>
<ul>
<li>
<p>新建一个名为Speed的float类型的变量</p>
<p><img src="https://img-blog.csdnimg.cn/20210812031945412.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-26"></p>
</li>
<li>
<p>然后点开向下的箭头</p>
<p><img src="https://img-blog.csdnimg.cn/20210812031945412.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-27"></p>
<p><img src="https://img-blog.csdnimg.cn/20210812032529454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-28"></p>
</li>
<li>
<p>这样我们就实现了当速度大于多少多少时候进行(从走路到跑步/从站立到走路)的转换和当速度小于多少多少时候进行(从跑步到走路/从走路到站立)的转换</p>
</li>
<li>
<p>然后为模型编写C#脚本</p>
<p><code>ChaMove.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">robot_move</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
    <span class="n">Animator</span> <span class="n">arim</span><span class="p">;</span>
    <span class="n">Vector3</span> <span class="n">move</span><span class="p">;</span>
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">arim</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Animator</span><span class="p">&gt;();</span><span class="c1">//获取Animator组件
</span><span class="c1"></span>    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span>
        <span class="kt">float</span> <span class="n">z</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
  
        <span class="n">move</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
  
        <span class="cm">/*
</span><span class="cm">        * 重载
</span><span class="cm">        * public void LookAt (Vector3 worldPosition);
</span><span class="cm">        * public void LookAt (Vector3 worldPosition, Vector3 worldUp= Vector3.up);
</span><span class="cm">        * worldPosition    要对准的点
</span><span class="cm">        * worldUp    指定向上方向的矢量。
</span><span class="cm">        * 
</span><span class="cm">        * 描述:旋转变换,使当前向量指向position
</span><span class="cm">        *
</span><span class="cm">        * 实时将人物朝向 按下方向键所导致的模型移动方向(就tm是使人物实时面朝移动方向)
</span><span class="cm">        */</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">LookAt</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">move</span><span class="p">);</span>
  
        <span class="c1">// transform   对象的位置 旋转  和缩放
</span><span class="c1"></span>        <span class="c1">//Time.deltaTime:完成上一帧花费的时间
</span><span class="c1"></span>        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="p">*</span> <span class="n">speed</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
        <span class="n">UpdateArim</span><span class="p">();</span>
      <span class="p">}</span>
  
      <span class="k">void</span> <span class="n">UpdateArim</span><span class="p">()</span>
      <span class="p">{</span>
          <span class="cm">/*
</span><span class="cm">          * Animator.setFloat(String,float value);
</span><span class="cm">          * 将浮点值发送到动画器以影响过渡
</span><span class="cm">          * 简而言之将通过不同的力按键产生的不同长度的向量传递到行为控制器箭头中的的变量中,从而实现不同动作的转换
</span><span class="cm">          * 
</span><span class="cm">          * Vector3.magnitude:返回向量的长度
</span><span class="cm">          */</span>
          <span class="n">arim</span><span class="p">.</span><span class="n">SetFloat</span><span class="p">(</span><span class="s">&#34;Speed&#34;</span><span class="p">,</span> <span class="n">move</span><span class="p">.</span><span class="n">magnitude</span><span class="p">);</span>
      <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>运行程序,模型就可以运动了</p>
</li>
</ul>
<h1 id="step5-材料">Step5. 材料</h1>
<h2 id="制作砖墙">制作砖墙</h2>
<blockquote>
<p>新建一个Cube和Material,将Material附给Cube后</p>
</blockquote>
<blockquote>
<p>谷歌搜索brick texture,下载砖墙图片</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813002948912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-29"></p>
</blockquote>
<blockquote>
<p>将砖块拖动到物体材质的Albedo中</p>
</blockquote>
<blockquote>
<p>这之后,如果想要调整贴图在物体上的纵横比例</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813003439824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-30"></p>
</blockquote>
<blockquote>
<p>调整Secondary Maps下的Tilling是错误的</p>
</blockquote>
<h2 id="制作石球">制作石球</h2>
<blockquote>
<p>到<a href="https://freepbr.com/">https://freepbr.com/</a>下载一个石头材质包</p>
</blockquote>
<blockquote>
<p>新建Sphere,将下载好的材质包中的albedo文件和ogl文件添加到Material</p>
</blockquote>
<blockquote>
<p>将albedo拖给刚才创建的Sphere</p>
</blockquote>
<blockquote>
<p>调整这两项,将暗度调高,光滑度调低</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813010055794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-31"></p>
<blockquote>
<p>将刚才下载的ogl文件拖入到Normal Map中,然后通过左右滑动调整它的数值,它的数值影响材质的真实性</p>
</blockquote>
<h2 id="制作天空盒">制作天空盒</h2>
<blockquote>
<p>谷歌搜索skybox,下载这种的图片</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813013526330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-32"></p>
<blockquote>
<p>拖放到Material中,点击进入图片组件</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813014148885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-33"></p>
</blockquote>
<blockquote>
<p>应用完成后,将生成的天空球拖拽到编辑器中</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210813014240108.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo-34"></p>
</blockquote>
<h2 id="制作场景盒">制作场景盒</h2>
<blockquote>
<p>谷歌搜索hdri,下载那种左右弧度呈两个椭圆形的场景图片</p>
</blockquote>
<blockquote>
<p>操作和天空图一样</p>
</blockquote>
<h1 id="step6survivalshooter">Step6.SurvivalShooter</h1>
<h2 id="场景创建">场景创建</h2>
<p><img src="https://img-blog.csdnimg.cn/20210815234157845.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<blockquote>
<p>将场景和灯光拖入到场景中</p>
</blockquote>
<ul>
<li>
<p>制作一个Layer</p>
<blockquote>
<p>由于我们只在乎游戏平面的光照,所以创建一个Quad,命名为Floor</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210815234410757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>将位置改为坐标原点,尺寸改为(100,100,1)</p>
</blockquote>
<blockquote>
<p>将物体可视化组件消除</p>
</blockquote>
</li>
<li>
<p>设置背景音乐</p>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210815234410757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>新建一个Create Empty,命名为BackgroundMusic</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816002552328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>新建Audio Source组件,并在Audio Clip中将Background资源选中</p>
</blockquote>
<blockquote>
<p>为了使背景音乐可以与其他音效适配,我们将Volume设置为0.1</p>
</blockquote>
</li>
</ul>
<h2 id="player">Player</h2>
<ul>
<li><img src="https://img-blog.csdnimg.cn/20210816000059954.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></li>
</ul>
<blockquote>
<p>将Player的预制体拖入到场景中</p>
</blockquote>
<ul>
<li>
<p>为其创建刚体、胶囊碰撞器以及死亡音效</p>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816002438947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
</li>
<li>
<p>在Animation文件夹中创建行为控制器,命名为PlayerAC,并把它添加给Player</p>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816002646348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>打开PlayerAC</p>
</blockquote>
<blockquote>
<p>将Player的三个动作都拖入到PlayerAC中,并将Idle与Entry关联,设置为默认动作</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816003001149.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816002851645.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>由于在walk或者idle状态下都有可能Die,所以我们将Die与AnyState相关联,意为在任意状态下都可以转换为Die行为</p>
</blockquote>
</li>
<li>
<p>现在我已经完成了90%,接下来只需要为Player编写一个脚本让它可以动起来</p>
</li>
<li>
<p>在Player中新建一个Scripts,命名为PlayerMovement</p>
<p><code>PlayerMovement.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">PlayerMovement</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span> <span class="p">=</span> <span class="m">10f</span><span class="p">;</span>
  
    <span class="n">Vector3</span> <span class="n">movement</span><span class="p">;</span>
  
    <span class="n">Animator</span> <span class="n">anim</span><span class="p">;</span>
  
    <span class="n">Rigidbody</span> <span class="n">playerRigidbody</span><span class="p">;</span>
  
    <span class="kt">int</span> <span class="n">floorMask</span><span class="p">;</span>
  
    <span class="kt">float</span> <span class="n">camRayLength</span> <span class="p">=</span> <span class="m">100f</span><span class="p">;</span>
  
    <span class="k">void</span> <span class="n">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//获取游戏对象的Layer组件名称
</span><span class="c1"></span>        <span class="n">floorMask</span> <span class="p">=</span> <span class="n">LayerMask</span><span class="p">.</span><span class="n">GetMask</span><span class="p">(</span><span class="s">&#34;Floor&#34;</span><span class="p">);</span>
  
        <span class="n">anim</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Animator</span><span class="p">&gt;();</span>
  
        <span class="n">playerRigidbody</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
  
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">FixedUpdate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxisRaw</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxisRaw</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
        <span class="n">Move</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
        <span class="n">Turning</span><span class="p">();</span>
        <span class="n">Animating</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">Move</span><span class="p">(</span><span class="kt">float</span> <span class="n">h</span><span class="p">,</span><span class="kt">float</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">movement</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
  
        <span class="c1">//Vector3.normalized向量的标准化设置,方向不变,大小变为1
</span><span class="c1"></span>        <span class="n">movement</span> <span class="p">=</span> <span class="n">movement</span><span class="p">.</span><span class="n">normalized</span> <span class="p">*</span> <span class="n">speed</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
  
        <span class="c1">//使用Rigidbody.MovePosition移动刚体,符合刚体的插值
</span><span class="c1"></span>        <span class="n">playerRigidbody</span><span class="p">.</span><span class="n">MovePosition</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">movement</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">Turning</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Ray为Camera发射出的一条光线
</span><span class="c1"></span>        <span class="cm">/*
</span><span class="cm">        * Camera.ScreenPointToRay 返回摄像机通过屏幕点的光线
</span><span class="cm">        * Input.mousePosition 鼠标当前像素坐标位置
</span><span class="cm">        */</span>
        <span class="n">Ray</span> <span class="n">comRay</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
        <span class="c1">//用于从射线投射获取信息的结构
</span><span class="c1"></span>        <span class="n">RaycastHit</span> <span class="n">floorHit</span><span class="p">;</span>
        <span class="cm">/*
</span><span class="cm">            * public static bool Raycast (Vector3 origin, Vector3 direction, float maxDistance= Mathf.Infinity, int layerMask= DefaultRaycastLayers, QueryTriggerInteraction
</span><span class="cm">            * 
</span><span class="cm">            * 描述:向场景中所有碰撞体投射一条射线
</span><span class="cm">            * 
</span><span class="cm">            * 参数:
</span><span class="cm">            * ①.origin:射线的起点
</span><span class="cm">            * ②.direction:射线的方向
</span><span class="cm">            * ③.射线应检查碰撞的最大距离
</span><span class="cm">            * ④.一层遮罩,用于在投射物体时有选择地忽略物体
</span><span class="cm">            * ⑤.指向该查询是否应该命中触发器
</span><span class="cm">            * 
</span><span class="cm">            */</span>
  
            <span class="cm">/*
</span><span class="cm">            * out:
</span><span class="cm">            * 详细请参照:&lt;https://blog.csdn.net/ZJ_____W/article/details/106158459?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=Unity%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84out&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-.pc_search_result_control_group&amp;spm=1018.2226.3001.4187&gt;
</span><span class="cm">            * 
</span><span class="cm">            */</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="n">Raycast</span><span class="p">(</span><span class="n">comRay</span><span class="p">,</span><span class="k">out</span> <span class="n">floorHit</span><span class="p">,</span> <span class="n">camRayLength</span><span class="p">,</span> <span class="n">floorMask</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="cm">/*
</span><span class="cm">                * RaycastHit.point : 世界坐标系中射线命中碰撞体的撞击点
</span><span class="cm">                * 用于获取从碰撞体到鼠标像素点的向量
</span><span class="cm">                */</span>
                <span class="n">Vector3</span> <span class="n">playerToMouse</span> <span class="p">=</span> <span class="n">floorHit</span><span class="p">.</span><span class="n">point</span> <span class="p">-</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
  
                <span class="c1">//防止其旋转
</span><span class="c1"></span>                <span class="n">playerToMouse</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
  
                <span class="cm">/*
</span><span class="cm">                * public static Quaternion LookRotation (Vector3 forward, Vector3 upwards= Vector3.up);
</span><span class="cm">                * 
</span><span class="cm">                * 描述:使用指定的forward和Vector3.up创建旋转
</span><span class="cm">                * 
</span><span class="cm">                * 参数:
</span><span class="cm">                * ①.forward是一个任意向量,代表要查看的方向,它会操控物体向着这个方向旋转
</span><span class="cm">                * ②.Vector3.up是向上的向量,为了简化(0,1,0)向量的书写,默认参数,可以不写.实际上就是绕着Y轴旋转呗
</span><span class="cm">                * 
</span><span class="cm">                */</span>
                <span class="n">Quaternion</span> <span class="n">newRotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">LookRotation</span><span class="p">(</span><span class="n">playerToMouse</span><span class="p">);</span>
                <span class="cm">/*
</span><span class="cm">                * public void MoveRotation (Quaternion rot);
</span><span class="cm">                * 
</span><span class="cm">                * 描述:将刚体旋转到新的Quaternion
</span><span class="cm">                * 
</span><span class="cm">                */</span>
                <span class="n">playerRigidbody</span><span class="p">.</span><span class="n">MoveRotation</span><span class="p">(</span><span class="n">newRotation</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
  
        <span class="k">void</span> <span class="n">Animating</span><span class="p">(</span><span class="kt">float</span> <span class="n">h</span><span class="p">,</span><span class="kt">float</span> <span class="n">v</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">walking</span> <span class="p">=</span> <span class="n">h</span> <span class="p">!=</span> <span class="m">0f</span> <span class="p">||</span> <span class="n">v</span> <span class="p">!=</span> <span class="m">0f</span><span class="p">;</span>
            <span class="cm">/*
</span><span class="cm">            * Animator.SetBool
</span><span class="cm">            * 
</span><span class="cm">            * 描述:将指定名称行为控制器参数设置为指定Bool值
</span><span class="cm">            * 同样也有Animator.SetFloat、Animator.SetInt等,根据你设置的参数以及应用情况而定
</span><span class="cm">            */</span>
            <span class="n">anim</span><span class="p">.</span><span class="n">SetBool</span><span class="p">(</span><span class="s">&#34;IsWalking&#34;</span><span class="p">,</span> <span class="n">walking</span><span class="p">);</span>
        <span class="p">}</span>
  
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="相机跟随">相机跟随</h2>
<ul>
<li>
<p>将Main Camera的参数设置如下:</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210817024041339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>将背景颜色改为黑色</p>
</li>
<li>
<p>为Main Camera编写脚本</p>
<p><code>CameraFollow.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">CameraFollow</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">target</span><span class="p">;</span>
  
    <span class="k">public</span> <span class="kt">float</span> <span class="n">smoothing</span> <span class="p">=</span> <span class="m">5f</span><span class="p">;</span>
  
    <span class="n">Vector3</span> <span class="n">offset</span><span class="p">;</span>
  
    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//计算游戏开始运行时摄像机和Player的位置偏移量
</span><span class="c1"></span>        <span class="n">offset</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">target</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">FixedUpdate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//保证每一帧Player和摄像机的位置偏移量都和游戏刚启动时相同
</span><span class="c1"></span>        <span class="n">Vector3</span> <span class="n">targetCamPos</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">offset</span><span class="p">;</span>
        <span class="cm">/*
</span><span class="cm">        * public static Vector3 Lerp(Vector3 a, Vector3 b, float t);
</span><span class="cm">        * 
</span><span class="cm">        * 描述:实现两点间的近似匀速移动
</span><span class="cm">        * 
</span><span class="cm">        */</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">Lerp</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">targetCamPos</span><span class="p">,</span><span class="n">smoothing</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>为脚本组件参数赋值,内容为要跟随的物体</p>
<p><img src="https://img-blog.csdnimg.cn/20210817030633608.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
</ul>
<h2 id="创建敌人跟随player">创建敌人跟随Player</h2>
<ul>
<li>
<p>将模型拖入到场景中</p>
<p><img src="https://img-blog.csdnimg.cn/20210817031031301.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>展开模型,你会发现他有一个子模型</p>
</li>
<li>
<p>这里有一个粒子特效,我们把它赋给敌人,这样模型就会生出绒毛</p>
</li>
<li>
<p>我们为敌人模型创建刚体、胶囊碰撞器、球体触发器、音效以及Nav Mash Agent</p>
<blockquote>
<p>刚体需要对旋转轴和位置轴进行相应的冻结</p>
</blockquote>
<blockquote>
<p>胶囊碰撞器用于检测敌人模型受到的攻击</p>
</blockquote>
<blockquote>
<p>球体触发器用于敌人模型双手的可触摸最大范围,因此它的半径要比胶囊碰撞器的宽高都大一点</p>
</blockquote>
<blockquote>
<p>音效用于模型受到攻击的响应</p>
</blockquote>
<blockquote>
<p>Nav Mash Agent用于自动寻路算法</p>
</blockquote>
</li>
<li>
<p>之后我们对模型进行烘培</p>
<p><img src="https://img-blog.csdnimg.cn/20210817031741419.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<blockquote>
<p>我们将Step Height调整到0.1是因为地面不是完全水平的,有的时候玩家触碰到这些小的坑洼或者突起,模型可以直接越过(踩过)而不是绕过</p>
</blockquote>
<blockquote>
<p>然后点击烘培,烘培完成后场景中就会出现一大片一大片的蓝色覆盖,蓝色代表这里是模型可通行区域</p>
</blockquote>
</li>
<li>
<p>然后为模型创建行为控制器</p>
<p><img src="https://img-blog.csdnimg.cn/20210817031818342.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<blockquote>
<p>打开行为控制器,创建两个Trigger类型变量,记住这种类型返回值为bool类型,会自动覆盖</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210817032902542.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>PlayerDead用于玩家死亡后敌人的状态,Dead用于敌人死亡的状态</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210817032931102.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>将Move设置为Entry,因为游戏一开始它就会自动定位Player的位置并直接朝向目标移动,所以只能从Move转向idle</p>
</blockquote>
<blockquote>
<p>然后可以从任何状态切换到死亡状态</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210817032931102.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
</li>
<li>
<p>最后我们为敌人模型编写脚本</p>
<p><code>EnemyMovement.cs</code></p>
<pre><code>  using UnityEngine;
  using System.Collections;
  
  public class EnemyMovement : MonoBehaviour
  {
      Transform player;
      //PlayerHealth playerHealth;
      //EnemyHealth enemyHealth;
      UnityEngine.AI.NavMeshAgent nav;
          void Awake ()
          {
              //查找场景中所有实体的标签,找出标签为Player的物体并返回它,这里我们用一个Transform类型的变量来储存它
              player = GameObject.FindGameObjectWithTag (&quot;Player&quot;).transform;
              //playerHealth = player.GetComponent &lt;PlayerHealth&gt; ();
              //enemyHealth = GetComponent &lt;EnemyHealth&gt; ();
  
              //获取自身的Nav Mash Agent组件
              nav = GetComponent &lt;UnityEngine.AI.NavMeshAgent&gt; ();
          }
          void Update ()
      {
          //if(enemyHealth.currentHealth &gt; 0 &amp;&amp; playerHealth.currentHealth &gt; 0)
          //{
  
          /*
          * 自动寻路方法,自身将移动到参数向量的位置
          *  
          * 描述:设置或更新目标，从而触发新路径计算。
          */
          nav.SetDestination (player.position);
          //}
          //else
          //{
          //    nav.enabled = false;
          //}
      }
  }
</code></pre>
</li>
<li>
<p>运行代码,可以看到敌人自动跟随我们的Player</p>
</li>
</ul>
<hr>
<h2 id="玩家生命值系统">玩家生命值系统</h2>
<ul>
<li>
<p>将Project调整到2D</p>
</li>
<li>
<p>创建一个画布,命名为HUBCanvas</p>
</li>
<li>
<p>在画布下创建一个空物体,命名为HealthUI,通过Alt快捷键将它放在画布左下角</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210820024835555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>在HealthUI下面创建UI/image,命名为Heart</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210820024526566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>在Health下面创建UI/Slider,命名为HeartSlider,打开HealthSlider的子文件,保留background和Fill Area,将其他的删除</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210820024526566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>Translation用于交互,我们这里只用于显示血量,完全没有用到交互,所以将它改为None</p>
</li>
<li>
<p>将Max Value(最大血量值)改为100,下面的进度条也相应改成100</p>
</li>
<li>
<p>创建UI/image,命名为DamageImage,用于Player受到伤害时屏幕上显示红色</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/2021082002493135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>将DamageImage铺满整个画布,然后将Color的Alpha调整为0</p>
</li>
<li>
<p>将PlayerHealth脚本添加为Player的脚本</p>
</li>
</ul>
<p><code>PlayerHealth.cs</code></p>
<pre><code>解析中,稍后开源
</code></pre>
<ul>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210822031805908.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>为脚本中每个组件赋值</p>
</li>
<li>
<p>将EnemyAttack脚本添加给敌人物体</p>
</li>
</ul>
<p><code>EnemyAttack.cs</code></p>
<pre><code>解析中,稍后开源
</code></pre>
<ul>
<li>运行游戏</li>
</ul>
<h1 id="step7tankfire">Step7.TankFire</h1>
<h2 id="场景创建-1">场景创建</h2>
<ul>
<li>将资源包中的LevelArt拖入到场景中</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210816015846872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<ul>
<li>
<p>将场景另存一份为Main.unity</p>
</li>
<li>
<p>将Project原有的Directional Light删除掉,因为LevelArt中自带灯光</p>
</li>
<li>
<p>点击Main Camera组件,将Clear Flags更改为Solid Color以替换到原来的天空盒</p>
</li>
<li>
<p>然后你可以更改Sky的任意颜色,Unity甚至有取色器!!!</p>
</li>
</ul>
<h2 id="控制坦克的移动">控制坦克的移动</h2>
<ul>
<li>
<p>导入坦克物体</p>
<p><img src="https://img-blog.csdnimg.cn/20210816022944162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo">、</p>
</li>
<li>
<p>坦克移动时需要的起灰效果</p>
<blockquote>
<p>将它拖入到Tank中,并将其复制一份,分别命名为DustTrailLeft合DustTrailRight</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816023011953.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>分别放在坦克尾左右两边</p>
</blockquote>
<blockquote>
<p>将预制体中的DustTrail中的Play On Awake勾选,这样我们刚开始操作坦克就会有灰尘效果了</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816023043544.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
</li>
<li>
<p>创建必要的组件</p>
<blockquote>
<p>创建刚体、盒子碰撞器以及移动脚本</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210816023109538.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<p><img src="https://img-blog.csdnimg.cn/20210816023131762.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
<blockquote>
<p>调整碰撞器的范围,注意如果底面范围位于地面之下是移动不了的,因为游戏引擎认为游戏物体和地面时刻都在撞击,而我们又有刚体,会产生物理效果</p>
</blockquote>
</li>
<li>
<p>将坦克设置为预制体(重点)</p>
</li>
<li>
<p>前进后退以及旋转</p>
<blockquote>
<p>打开脚本</p>
</blockquote>
<p><code>TankMovement.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">TankMovement</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">angularSpeed</span><span class="p">;</span>
  
    <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rigidbody</span><span class="p">;</span>
  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">speed</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
        <span class="n">angularSpeed</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>
  
        <span class="n">rigidbody</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Vertical&#34;</span><span class="p">);</span>
        <span class="c1">//Rigidbody.velocity:刚体的速度矢量
</span><span class="c1"></span>        <span class="n">rigidbody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">v</span> <span class="p">*</span> <span class="n">speed</span><span class="p">;</span>
  
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;Horizontal&#34;</span><span class="p">);</span>
        <span class="c1">//Rigidbody.angularVelocity:刚体的角速度矢量
</span><span class="c1"></span>        <span class="n">rigidbody</span><span class="p">.</span><span class="n">angularVelocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">h</span> <span class="p">*</span> <span class="n">angularSpeed</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>运行游戏,你会发现有时候出现一些异常</p>
<blockquote>
<p>在Rigidbody中将这两个勾选就好了</p>
</blockquote>
<blockquote>
<p><img src="https://img-blog.csdnimg.cn/2021081602315195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</blockquote>
<blockquote>
<p>Freeze Rotation:冻结回转</p>
</blockquote>
<blockquote>
<p>Freeze Position:冻结位置</p>
</blockquote>
<blockquote>
<p>图中设置:旋转不会发生在X轴和Z轴,移动不会发生在Y轴</p>
</blockquote>
</li>
</ul>
<h2 id="两个坦克同时移动">两个坦克同时移动</h2>
<ul>
<li>
<p>Input.GetAxis(&ldquo;Horizontal&rdquo;);和Input.GetAxis(&ldquo;Vertical&rdquo;);可以获取键盘方向键输入</p>
</li>
<li>
<p>是因为在Edit-&gt;Project Settings-&gt;InputManager中有相关设置,</p>
</li>
<li>
<p>Input.GetAxis方法正是获取这些功能的设置</p>
</li>
<li>
<p>我们为了实现两个坦克战斗,而我们现在是单机功能,方向键或asdf键只能控制一个物体</p>
</li>
<li>
<p>仔细观察Horizontal和Vertical,会发现</p>
</li>
<li>
<p><img src="https://img-blog.csdnimg.cn/20210816031240749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pZSDE4NDE0NzQ2MTQ=,size_16,color_FFFFFF,t_70" alt="Photo"></p>
</li>
<li>
<p>Horizontal的意思是你使用左右键或者ad键都可以控制左右方向的位移</p>
</li>
<li>
<p>Vertical的意思是你使用上下键或者ws键都可以控制前后方向的位移</p>
</li>
<li>
<p>现在我们可以通过创建两个Horizontal,两个Vertical的方式将这两个功能分开</p>
</li>
<li>
<p>HorizontalPlayer1只能调用ad键,HorizontalPlayer2只能调用方向键上的左右键</p>
</li>
<li>
<p>VerticalPlayer1只能调用ws键,VerticalPlayer2只能调用方向键上的上下键</p>
</li>
<li>
<p>然后通过更改脚本中Input.GetAxis中的参数就可以分类使用了</p>
</li>
<li>
<p>创建VerticalPlayer和HorizontalPlayer1的方法:复制原有的Horizontal和Vertical,然后粘贴,重命名就可以了</p>
</li>
<li>
<p>参数更改方式参照原有的Horizontal和Vertical</p>
</li>
<li>
<p>代码更改:</p>
<p><code>PlayerMovement.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-C#" data-lang="C#"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">TankMovement</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">angularSpeed</span><span class="p">;</span>
  
    <span class="k">public</span> <span class="kt">int</span> <span class="n">number</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
  
    <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">rigidbody</span><span class="p">;</span>
  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">speed</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
        <span class="n">angularSpeed</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>
  
        <span class="n">rigidbody</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;VerticalPlayer&#34;</span> <span class="p">+</span> <span class="n">number</span><span class="p">);</span>
        <span class="n">rigidbody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">v</span> <span class="p">*</span> <span class="n">speed</span><span class="p">;</span>
  
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">GetAxis</span><span class="p">(</span><span class="s">&#34;HorizontalPlayer&#34;</span> <span class="p">+</span> <span class="n">number</span><span class="p">);</span>
        <span class="n">rigidbody</span><span class="p">.</span><span class="n">angularVelocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">h</span> <span class="p">*</span> <span class="n">angularSpeed</span><span class="p">;</span>
            <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step8荒岛求生fps项目">Step8.荒岛求生FPS项目</h1>
<h2 id="地形创建">地形创建</h2>
<ul>
<li>
<p>新建项目<code>SurvivalInToWilderness</code></p>
</li>
<li>
<p>将荒野求生中的<code>Island Survival</code>中的<code>Assets</code>中的所有内容拖到项目的<code>Assets</code>中(因为版本的不同导package一般都会出问题)</p>
<p><img src="https://img-blog.csdnimg.cn/ea7d5f8d674a4a38b4649dca653a5e7b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
<li>
<p>新建一个地形(Terrain)</p>
<p><img src="https://img-blog.csdnimg.cn/010b569e9487423eb3aab895975034d8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
<li>
<p>点击这个Terrian</p>
<p><img src="https://img-blog.csdnimg.cn/b17d048d5d7b4ff18bfc9ee1012d9b6a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<blockquote>
<p>就是使用这个画笔工具对地形进行涂抹设置的</p>
</blockquote>
</li>
<li>
<p>新版本默认是设置高峰,如果想设置河流的低槽</p>
<blockquote>
<p>shift + 左键</p>
</blockquote>
</li>
<li>
<p>这个项目中画出河流的沟和山峰</p>
</li>
</ul>
<hr>
<h1 id="step9我的世界">Step9.我的世界</h1>
<h2 id="导入资源-1">导入资源</h2>
<blockquote>
<p>所有内置的以及从Assets store下载的资源包都在这里</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/51cb5dc09ec24b189b96e65aca482631.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/516597441c8e46ffaf49bcd05eddd1f7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<blockquote>
<p>这里是从Assets Store下载的资源包</p>
</blockquote>
<ul>
<li>将这三个导入,分别是人物模型、天空盒子以及花草树木等环境</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/6b1060e1e2d5449fbabbdd1e79b16001.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<ul>
<li>这里是内置工具,但也需要下载</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/43cb02b500314fadb08e6de2e2b16a33.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/f97bc54468c34953bea21bc2e2f3130a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<hr>
<h1 id="step10发射子弹">Step10.发射子弹</h1>
<ul>
<li>
<p>创建一个物体当作枪</p>
</li>
<li>
<p>创建一个小球,或者任意可以作为子弹的物体,设置的尽量小点.并给这个子弹设置<code>Rigidbody``,取消重力</code>Use Gravity```,将其设置为预制体</p>
</li>
<li>
<p>编写脚本</p>
<p><code>Shoot.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Shoot</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">Speed</span> <span class="p">=</span> <span class="m">7f</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">bullet</span><span class="p">;</span>
  
    <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">bullet</span> <span class="p">=</span> <span class="n">GameObject</span><span class="p">.</span><span class="n">Instantiate</span><span class="p">(</span><span class="n">bullet</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span>
        <span class="n">Rigidbody</span> <span class="n">rig</span> <span class="p">=</span> <span class="n">bullet</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
        <span class="n">rig</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span><span class="p">*</span><span class="n">Speed</span><span class="p">;</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将脚本拖给物体,将小球预制体拖动给脚本</p>
</li>
<li>
<p>注意:这里有问题</p>
<blockquote>
<ul>
<li>每次实例化后的子弹没有销毁,因为它没有击中物体(哪怕是地面)</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<h1 id="step11flappybird">Step11.FlappyBird</h1>
<h2 id="场景搭建">场景搭建</h2>
<ul>
<li>UnityHub创建一个2D项目</li>
</ul>
<h3 id="如果错创建成3d项目">如果错创建成3D项目</h3>
<ul>
<li>点开相机</li>
<li><code>Projection</code>是投射的意思,它下面有两个值
<ul>
<li>Orthographic  &mdash;&gt;  正投影(2D)</li>
<li>Perspective  &mdash;&gt;  透视(3D)</li>
</ul>
</li>
<li>将Projection的值更改成Orthographic</li>
<li><code>Editor-&gt;ProjectSettings-&gt;Editor-&gt;Default Behaviour Mode</code>下的<code>Mode</code>
<ul>
<li>改成2D</li>
</ul>
</li>
<li>至此,2D项目创建完成</li>
</ul>
<hr>
<h3 id="创建三个场景">创建三个场景</h3>
<ul>
<li>创建三个场景是因为</li>
<li>游戏有三个场景,分别是<code>加载场景</code>、<code>关卡场景</code>和<code>游戏场景</code></li>
<li><code>Ctrl + N</code>,创建三个场景<code>00-Load</code>、<code>01-Level</code>、<code>02-Game</code></li>
<li>分别<code>Ctrl + S</code>保存到<code>Assets/Scenes</code>目录下面</li>
</ul>
<hr>
<h3 id="导入资源-2">导入资源</h3>
<ul>
<li>将资源包下的<code>Image</code>和<code>Music</code>文件夹导入到<code>Assets</code>目录下</li>
<li>点开<code>Image</code>中的其中一张图片,发现都是许多场景块和人物的拼图</li>
<li>点开第一张<code>BIRDS_1</code></li>
<li><code>Sprite Mode</code>有三个值
<ul>
<li>Single     &mdash;&gt;   单一图片</li>
<li>Mutiple  &mdash;&gt;   多张图片</li>
<li>Polygon &mdash;&gt;    多边形</li>
</ul>
</li>
<li><strong>Sprite是雪碧的意思,这下知道什么意思了吧</strong></li>
<li>为了将模型拼图切割成多个小图片方便导入场景,我选择<code>Mutiply</code></li>
<li>然后点击右下角的<code>Apply</code></li>
<li>点击<code>Sprite Editor</code></li>
<li>就会出现<code>Slice Editor</code>窗口</li>
<li>点击左上角的<code>Slick</code>,点击弹出窗口中的<code>Slice</code></li>
<li>后,就会发现图片中的所有小鸟、弹弓模型等都被分成一块一块的了</li>
<li>点击右上角的<code>Apply</code>,退出窗口</li>
<li>再看这张图片,就会发现图片被切割成许许多多张小图片了</li>
</ul>
<h3 id="导入一个小鸟和弹弓">导入一个小鸟和弹弓</h3>
<ul>
<li>
<p>注意,选中场景<code>02-Game</code>再进行如下操作</p>
</li>
<li>
<p>在刚才切割的图片中选中一个<code>小鸟</code>和<code>弹弓的左支和右支</code>拖入场景</p>
</li>
<li>
<p>小鸟改成<code>bird</code>,<code>弹弓左支</code>改成left,<code>弹弓右支</code>改成right</p>
</li>
<li>
<p>但是会发现小鸟覆盖住了整个弹弓的左支和右支</p>
</li>
<li>
<p>点开任意一个模型</p>
</li>
<li>
<p><code>Addition Settings</code>下的<code>Sort Layer</code>是模型在场景中的层</p>
<ul>
<li>Order in Layer是当前模型在层中的<code>层级级别</code></li>
</ul>
</li>
<li>
<p>默认都是<code>Default</code>,层级有点混乱</p>
</li>
<li>
<p>点击任意一个模型的<code>Addition Settings-&gt;Sort Layer-&gt;Add Sorting Layer</code></p>
</li>
<li>
<p>新创建一个<code>Sorting Layer(层级)</code>,起名为<code>Player</code></p>
</li>
<li>
<p>给<code>小鸟</code>和<code>弹弓的左支和右支</code>的层级都改成<code>Player</code></p>
</li>
<li>
<p>需求是<strong>左支盖住小鸟,小鸟盖住右支</strong></p>
<ul>
<li><code>左支</code>的Order in Layer为2最大</li>
<li><code>小鸟</code>的Order in Layer为1</li>
<li><code>右支</code>的Order in Layer为0最小</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/a99059c5f9364bc1b6ccbc3bfec685af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_10,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
</ul>
<hr>
<h2 id="使用springjoint实现小鸟绕着弹弓做弹跳运动">使用SpringJoint实现小鸟绕着弹弓做弹跳运动</h2>
<ul>
<li>
<p><code>SpringJoint</code>组件是弹簧的意思</p>
</li>
<li>
<p>它通过<code>SpringJoint弹簧组件</code>和<code>刚体物体</code>完成单摆运动</p>
</li>
<li>
<p>在小鸟上创建<code>SpringJoint2D</code>,创建好后默认创建了一个<code>RigidBody</code></p>
</li>
<li>
<p>创建好就会发现,出现一根绿线</p>
</li>
<li>
<p>绿线一头是一个<code>蓝色的实心点</code>,另一头拴着<code>小鸟</code></p>
</li>
<li>
<p>运行项目,小鸟以<code>蓝色实心点</code>为圆心,以绿线为垂做单摆运动</p>
</li>
<li>
<p>我现在想让小鸟绕着<code>弹弓右支</code>弹绕</p>
</li>
<li>
<p>将蓝色圆心点挂在<code>右支</code></p>
</li>
<li>
<p>然后给<code>右支</code>添加<code>RigidBody 2D</code></p>
<ul>
<li>
<p>设置<code>Body Type</code>为<code>static</code></p>
<blockquote>
<p>意思是不让它随着重力做运动,在重力的影响下应该做的运动它保持静止</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>运行项目,发现实现了效果</p>
</li>
<li>
<p>但是只是普通的单摆,没有实现那种游戏中的小范围高弹性的效果</p>
</li>
<li>
<p>而且当单摆周长过大的时候</p>
</li>
<li>
<p><code>小鸟</code>会被<code>左支和右支的交界处</code>覆盖</p>
</li>
<li>
<p>适当调整小鸟的位置</p>
</li>
<li>
<p>蓝色实心处圆心有根和绿线垂直的小绿线段</p>
</li>
<li>
<p>小鸟会在<code>绿线拴着小鸟的位置</code>和<code>小绿线段</code>之间这个范围做单摆运动</p>
</li>
<li>
<p>点开<code>bird</code></p>
</li>
<li>
<p>取消<code>Auto Configuration Distance(如果不取消会自动将小绿线设置到单摆圆心处)</code></p>
</li>
<li>
<p>设置<code>SpringJoint2D</code>的<code>Distance</code>设置成0.3,到绿线中央</p>
</li>
<li>
<p>这样就实现了弹性</p>
</li>
<li>
<p>但是还是有<code>小鸟</code>会被<code>左支和右支的交界处</code>覆盖的问题</p>
</li>
<li>
<p>说明小鸟摆动的频率太低了太慢了</p>
</li>
<li>
<p>设置<code>bird</code>下的<code>SpringJoint2D</code>下的<code>Frequency</code>为2(原来为1)</p>
</li>
<li>
<p>就实现了</p>
</li>
</ul>
<hr>
<h2 id="实现鼠标拖拽小鸟效果">实现鼠标拖拽小鸟效果</h2>
<ul>
<li>
<p>首先给小鸟创建<code>Circle Collider 2D</code>(因为小鸟是圆的)</p>
</li>
<li>
<p>然后创建<code>Birds.cs</code>给小鸟模型</p>
<p><code>Birds.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>运行后没什么反应,因为<code>Input.mousePosition</code>对应的是屏幕坐标</p>
</li>
<li>
<p>需要转换成世界坐标系</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这样就可以了</p>
</li>
<li>
<p>但是点击小鸟后小鸟又消失不见了,将地图转换成3D后发现,小鸟和弹弓不在一个平面上,而且小鸟坐标也变成了-10</p>
</li>
<li>
<p>这样就有两种解决方案</p>
<ul>
<li>
<p>一,给当前坐标经过转换后,纵坐标加上10</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">10</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>二,给当前经过转换后的坐标加上<code>摄像机z轴坐标取反</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<hr>
<h2 id="实现小鸟拖拽规定范围">实现小鸟拖拽规定范围</h2>
<ul>
<li>
<p>在rightPos下新建一个<code>Empty Object</code>,起名为<code>rightPos</code>,并将rightPos拖动到右支上的皮筋处用于确定弹弓上皮筋的位置</p>
</li>
<li>
<p>编写代码</p>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="实现发射小鸟">实现发射小鸟</h2>
<ul>
<li>
<p>创建场景,找一个地板,我这里用<code>THEME_01_THEME_1</code></p>
</li>
<li>
<p>在主场景中创建一个空物体<code>env</code>,然后将裁剪好的地板移动到env下</p>
</li>
<li>
<p>给地板图设置<code>BoxCollider2D</code>,然后多复制几个,整个十几个的左右铺好,因为小鸟发射后会滚很远,所以要整这么多地面</p>
<p><img src="https://img-blog.csdnimg.cn/4430050544b84413bb2369ae1986f34a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
<li>
<p>正常情况下当鼠标抬起直接将<code>SpringJoint2D</code>禁用就可以了</p>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>结果是:<code>丢一下就以非常大的速度飞出去了</code></p>
</li>
<li>
<p>这是因为</p>
<blockquote>
<p>SpringJoint的<code>Body Type</code>有个值<code>Kinematic</code>,是动力学的意思</p>
<p>就是说当小鸟飞出时候,这个值默认为true,此时小球还受到绳子的弹力作为飞行的动力,所以会一直朝着一个方向飞</p>
</blockquote>
</li>
<li>
<p>在代码中控制这个值(isKinematic)</p>
</li>
<li>
<p>当鼠标按下,开启无损耗(上帝模式);当鼠标抬起,取消动力学(人类模式,此时小鸟飞出,不再受绳子的重力)</p>
<p><code>Bird.csharp</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这样搞的结果是当松手时小鸟直接下落了</p>
</li>
<li>
<p>这是因为</p>
<blockquote>
<p>方法执行是一瞬间的,刚一松手就将kinematic设置为false直接它就没动力了(就是说松手和小鸟飞出的临界情况),小鸟直接就<code>垂直下落</code>了</p>
</blockquote>
</li>
<li>
<p>给方法设置一个延迟</p>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Fly&#34;</span><span class="p">,</span><span class="m">0.2f</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Fly</span><span class="p">(){</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>小鸟发射出去落地后,会一直贴着地面滚动</p>
</li>
<li>
<p><code>RigidBody</code>下有个<code>Angulay Drag</code>,是空气阻力、摩擦力等现实因素,把值改大点就好了</p>
</li>
</ul>
<hr>
<h2 id="实现猪受伤">实现猪受伤</h2>
<ul>
<li>
<p>随便找一个好猪的图片,拖到主场景中,命名为<code>pig</code></p>
</li>
<li>
<p>给pig创建<code>Circle Collider</code>、<code>RigidBody</code></p>
</li>
<li>
<p>再创建一个<code>Pig.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">using System.Collections;
using System.Collections.Generic;
using UnityEngine;
  
public class Pig : MonoBehaviour
{
    // 碰撞的相对最大速度
    public float maxSpeed = 10;
    // 碰撞的相对最小速度
    public float minSpeed = 5;
    // 自身雪碧图
    private SpriteRenderer spriteRenderer;
    public Sprite hurt; // 新雪碧图
  
    // Start is called before the first frame update
    void Start()
    {
        spriteRenderer = GetComponent&lt;SpriteRenderer&gt;();
    }
  
    // Update is called once per frame
    void Update()
    {
  
    }
  
    private void OnCollisionEnter2D(Collision2D collision){
        // 被碰撞的物体与碰撞物体的相对速度
        if(collision.relativeVelocity.magnitude &gt; maxSpeed){
  
        }else if(collision.relativeVelocity.magnitude &gt; minSpeed &amp;&amp; collision.relativeVelocity.magnitude &lt; maxSpeed){
            spriteRenderer.sprite = hurt; // 将自身雪碧图的内容改成准备好的受伤的雪碧图
        }
    }
}
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>然后将准备好的猪受伤的雪碧图赋给脚本</p>
</li>
</ul>
<hr>
<h2 id="实现弹弓皮筋拖线">实现弹弓皮筋拖线</h2>
<ul>
<li>
<p>在<code>right</code>和<code>left</code>下分别创建两个空物体<code>rightPos</code>、<code>leftPos</code></p>
</li>
<li>
<p>然后分别将它们拖动到左右两支的皮筋位置上</p>
</li>
<li>
<p>分别在right和left上创建<code>Line Renderer</code></p>
</li>
<li>
<p>设置<code>Line Renderer</code></p>
<ul>
<li>
<p>和皮筋一个颜色</p>
</li>
<li>
<p>width小点,0.25</p>
<blockquote>
<p>这个值怎么来的呢</p>
<blockquote>
<p>场景中一个小格1米,一个皮筋大约占1/4</p>
</blockquote>
</blockquote>
</li>
<li>
<p>Material挑<code>Sprite-Defaults</code></p>
</li>
</ul>
</li>
<li>
<p>编写<code>Bird.cs</code></p>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">right</span><span class="p">;</span> <span class="c1">// 弹弓右棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">left</span><span class="p">;</span> <span class="c1">// 弹弓左棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">leftPos</span><span class="p">;</span> <span class="c1">// 在左支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Fly&#34;</span><span class="p">,</span><span class="m">0.2f</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">Line</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟飞翔方法,就是将物体的SpringJoint禁用
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Fly</span><span class="p">(){</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 弹弓皮筋
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Line</span><span class="p">(){</span>
        <span class="c1">// 设置左边的皮筋起始位置为右弹弓的位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
  
        <span class="c1">// 设置右边的皮筋起始位置为左弹弓的位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">leftPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>然后将<code>rightPos</code>、<code>right</code>、<code>leftPos</code>、<code>left</code>赋给<code>Bird.cs</code></p>
</li>
</ul>
<hr>
<h2 id="实现攻击猪消失爆炸特效以及得分显示">实现攻击猪消失、爆炸特效以及得分显示</h2>
<h3 id="爆炸特效">爆炸特效</h3>
<ul>
<li>到图片中裁剪好的找一些可以合成爆炸动画的</li>
<li>Ctrl + 鼠标选中可以跳格多选</li>
<li>选中多张图片直接拖进主场景中,Unity会自动弹出窗口让创建动画</li>
<li>在Assets下创建Animation文件夹,将动画创建在文件夹中,命名为<code>boom.anim</code></li>
<li>取消boom.anim的<code>Loop Time</code></li>
<li>将boom.anim设置成prefab</li>
</ul>
<h4 id="给爆炸特效添加播放后删除自己的方法">给爆炸特效添加播放后删除自己的方法</h4>
<ul>
<li>
<p>在boom.anim下创建<code>Boom.cs</code></p>
<p><code>Boom.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Boom</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="n">Destroying</span><span class="p">(){</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>选中boom动画,Ctrl + 6</p>
</li>
<li>
<p>将线条拖到帧尾</p>
</li>
<li>
<p>点击左边栏最右上角的<code>Add Event</code></p>
</li>
<li>
<p>右侧的<code>Inspector</code>下有个<code>Function</code></p>
</li>
<li>
<p>选中刚才在脚本中写的<code>Destroying</code>函数</p>
<blockquote>
<p><strong>注意,要把这个事件添加到帧尾,如果添加到开头,那动画就不播放了</strong></p>
</blockquote>
</li>
</ul>
<h4 id="猪被攻击后触发爆炸效果并消失">猪被攻击后触发爆炸效果并消失</h4>
<ul>
<li>
<p>编写<code>Pig.cs</code></p>
<p><code>Pig.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Pig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 碰撞的相对最大速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxSpeed</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="c1">// 碰撞的相对最小速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">minSpeed</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
    <span class="c1">// 自身雪碧图
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpriteRenderer</span> <span class="n">spriteRenderer</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Sprite</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 新雪碧图
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 爆炸效果
</span><span class="c1"></span>  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">spriteRenderer</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpriteRenderer</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
  
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">OnCollisionEnter2D</span><span class="p">(</span><span class="n">Collision2D</span> <span class="n">collision</span><span class="p">){</span>
        <span class="c1">// 被碰撞的物体与碰撞物体的相对速度
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">Dead</span><span class="p">();</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">minSpeed</span> <span class="p">&amp;&amp;</span> <span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&lt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">spriteRenderer</span><span class="p">.</span><span class="n">sprite</span> <span class="p">=</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 将自身雪碧图的内容改成准备好的受伤的雪碧图
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">Dead</span><span class="p">(){</span>
        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将预制体中的<code>boom.anim</code>赋给脚本</p>
</li>
<li>
<p>运行程序</p>
</li>
</ul>
<h3 id="得分显示">得分显示</h3>
<ul>
<li>
<p>在图片中找到一个得分图片,和动画一样,也做成预制体</p>
</li>
<li>
<p>编写代码</p>
<p><code>Big.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Pig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 碰撞的相对最大速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxSpeed</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="c1">// 碰撞的相对最小速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">minSpeed</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
    <span class="c1">// 自身雪碧图
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpriteRenderer</span> <span class="n">spriteRenderer</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Sprite</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 新雪碧图
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 爆炸效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">score</span><span class="p">;</span> <span class="c1">// 得分效果
</span><span class="c1"></span>  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">spriteRenderer</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpriteRenderer</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
  
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">OnCollisionEnter2D</span><span class="p">(</span><span class="n">Collision2D</span> <span class="n">collision</span><span class="p">){</span>
        <span class="c1">// 被碰撞的物体与碰撞物体的相对速度
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">Dead</span><span class="p">();</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">minSpeed</span> <span class="p">&amp;&amp;</span> <span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&lt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">spriteRenderer</span><span class="p">.</span><span class="n">sprite</span> <span class="p">=</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 将自身雪碧图的内容改成准备好的受伤的雪碧图
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">Dead</span><span class="p">(){</span>
        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="n">GameObject</span> <span class="n">scoreObj</span> <span class="p">=</span> <span class="n">Instantiate</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">scoreObj</span><span class="p">,</span><span class="m">0.5f</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这里倒数第四行代码</p>
</li>
<li>
<p>这就说明了</p>
<blockquote>
<p>在一个脚本中,如果不是自身</p>
<p>需要实例化一下</p>
<p>和Java对比,prefab就是.class文件,根据这个文件可以创建处.java文件</p>
<p>prefab就是模板,并没有实际物体的功能</p>
<p>对其进行删除操作需要实例化创建出这个物体</p>
</blockquote>
</li>
</ul>
<hr>
<h2 id="实现多个小鸟发射后轮换上来">实现多个小鸟发射后轮换上来</h2>
<ul>
<li>
<p>复制两个小鸟一共三个</p>
</li>
<li>
<p>将两个放在地上,取消它们两个的SpringJoint2D</p>
</li>
<li>
<p>运行起来,是实现了两个静止在地上一个在弹弓上打激素</p>
</li>
<li>
<p>但是此时点击地下的两个还是会被移动</p>
</li>
<li>
<p>说明只禁用小鸟的<code>SpringJoint2D</code>是不够滴,还得禁用掉<code>Birds.cs</code></p>
</li>
<li>
<p>在主场景中创建一个<code>Empty Object</code>,命名为<code>GameManager</code></p>
</li>
<li>
<p>在GameManager上编写脚本<code>GameManager.cs</code></p>
<p><code>GameManager.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.SceneManagement</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
  
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Bird</span><span class="p">&gt;</span> <span class="n">birds</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Pig</span><span class="p">&gt;</span> <span class="n">pigs</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">GameManager</span> <span class="n">_instance</span><span class="p">;</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_instance</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Initialized</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 初始化小鸟
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Initialized</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">birds</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="c1">//第一只小鸟
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 判定游戏逻辑
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">NextBird</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pigs</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
                <span class="c1">//下一只飞吧
</span><span class="c1"></span>                <span class="n">Initialized</span><span class="p">();</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="c1">// 赢了
</span><span class="c1"></span>            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
  
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>脚本作用:将所有小鸟储存在一个数组中,当是第一支小鸟时,将<code>SpringJoint2D</code>和<code>Birds.cs</code>都设置为true,其他的都设置成false</p>
</li>
<li>
<p>设置完了,当在主场景中发射第一个时,虽然第一个发射出去了,但是还在GameManager的数组中,还是第一个,下一个永远无法上来</p>
</li>
<li>
<p>所以需要在<code>Birds.cs</code>中设置</p>
</li>
<li>
<p><strong>当小鸟被发射后,过几秒将发射出去的小鸟在GameManager的bird数组中移除,这样GameManager.cs中的Initialized方法在发射第一个后再次调用,进行新一次遍历birds数组,原来的第二个就变成了第一个</strong></p>
<p><code>Birds.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">right</span><span class="p">;</span> <span class="c1">// 弹弓右棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">left</span><span class="p">;</span> <span class="c1">// 弹弓左棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">leftPos</span><span class="p">;</span> <span class="c1">// 在左支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>  
    <span class="c1">// 这里又把SpringJoint2D改成public是因为 GameManager.cs中的Bird数组中的元素要调用它
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 小鸟爆炸特效
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Fly&#34;</span><span class="p">,</span><span class="m">0.2f</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">Line</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟飞翔方法,就是将物体的SpringJoint禁用
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Fly</span><span class="p">(){</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// 2s后在GameManager中的birds数组中移除发射出去的小鸟
</span><span class="c1"></span>        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Next&#34;</span><span class="p">,</span><span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 弹弓皮筋
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Line</span><span class="p">(){</span>
        <span class="c1">// 设置左边的皮筋起始位置为右弹弓的位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
  
        <span class="c1">// 设置右边的皮筋起始位置为左弹弓的位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">leftPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟发射出去后的操作
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Next</span><span class="p">(){</span>
        <span class="c1">// 移除GameManager中bird数组中的当前小鸟
</span><span class="c1"></span>        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">birds</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="c1">// 在主场景中摧毁小鸟
</span><span class="c1"></span>        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="c1">// 小鸟消失没特效没面子
</span><span class="c1"></span>        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">NextBird</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>现在实现了<code>小鸟的轮换</code>、<code>发射出去的小鸟从GameManager中bird数组中销毁</code></p>
</li>
<li>
<p>还有就是当猪被击中且<code>死亡</code>,也要被销毁</p>
</li>
<li>
<p>更改Pig.cs</p>
<p><code>Pig.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Pig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 碰撞的相对最大速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxSpeed</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="c1">// 碰撞的相对最小速度
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">minSpeed</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
    <span class="c1">// 自身雪碧图
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">SpriteRenderer</span> <span class="n">spriteRenderer</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Sprite</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 新雪碧图
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 爆炸效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">score</span><span class="p">;</span> <span class="c1">// 得分效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">bool</span> <span class="n">isPig</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 是否是猪,默认是false
</span><span class="c1"></span>  
    <span class="c1">// Start is called before the first frame update
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">spriteRenderer</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpriteRenderer</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
  
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">OnCollisionEnter2D</span><span class="p">(</span><span class="n">Collision2D</span> <span class="n">collision</span><span class="p">){</span>
        <span class="c1">// 被碰撞的物体与碰撞物体的相对速度
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">Dead</span><span class="p">();</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&gt;</span> <span class="n">minSpeed</span> <span class="p">&amp;&amp;</span> <span class="n">collision</span><span class="p">.</span><span class="n">relativeVelocity</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">&lt;</span> <span class="n">maxSpeed</span><span class="p">){</span>
            <span class="n">spriteRenderer</span><span class="p">.</span><span class="n">sprite</span> <span class="p">=</span> <span class="n">hurt</span><span class="p">;</span> <span class="c1">// 将自身雪碧图的内容改成准备好的受伤的雪碧图
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">void</span> <span class="n">Dead</span><span class="p">(){</span>
        <span class="c1">// 当猪为true
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isPig</span><span class="p">){</span>
            <span class="c1">// 从GameManager数组中移除掉自身
</span><span class="c1"></span>            <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">pigs</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="n">GameObject</span> <span class="n">scoreObj</span> <span class="p">=</span> <span class="n">Instantiate</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">Destroy</span><span class="p">(</span><span class="n">scoreObj</span><span class="p">,</span><span class="m">0.5f</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>现在都实现了</p>
</li>
<li>
<p>在面板中进行赋值操作</p>
</li>
<li>
<p>将三个bird自身托给自身bird.cs上的Sp,<code>boom.anim</code>预制体托给脚本的<code>Boom</code></p>
</li>
<li>
<p>然后将三个鸟和三只猪都赋给GameManager上对应的数组</p>
<p><strong>鸟一定要按顺序,谁放在弹弓上谁就是第一个</strong></p>
<p><strong>猪无所谓</strong></p>
</li>
</ul>
<hr>
<h2 id="解决第一只小鸟发射后第二支小鸟嗖的一下就跳上弹弓">解决第一只小鸟发射后第二支小鸟嗖的一下就跳上弹弓</h2>
<ul>
<li>
<p>记录第一只小鸟的位置</p>
</li>
<li>
<p>当第一只小鸟发射后,将位置赋值给第二支小鸟</p>
</li>
<li>
<p>以此类推</p>
<p><code>GameManager.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.SceneManagement</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
  
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Bird</span><span class="p">&gt;</span> <span class="n">birds</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Pig</span><span class="p">&gt;</span> <span class="n">pigs</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">GameManager</span> <span class="n">_instance</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">originPos</span><span class="p">;</span> <span class="c1">// 为了不让第二只及以下小鸟上弹弓太快,记录第一只小鸟的位置
</span><span class="c1"></span>  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_instance</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
  
        <span class="c1">// 安全判定,如果有第一只小鸟
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="c1">// 将第一只小鸟的位置赋值给变量
</span><span class="c1"></span>            <span class="n">originPos</span> <span class="p">=</span> <span class="n">birds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Initialized</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 初始化小鸟
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Initialized</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">birds</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="c1">//第一只小鸟
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="c1">// 每次初始化,将游戏开始时第一只小鸟位置赋值给 发射后 数组中的下一次的第一只小鸟
</span><span class="c1"></span>                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">originPos</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 判定游戏逻辑
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">NextBird</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pigs</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
                <span class="c1">//下一只飞吧
</span><span class="c1"></span>                <span class="n">Initialized</span><span class="p">();</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="c1">// 赢了
</span><span class="c1"></span>            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
  
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="解决发射小鸟后皮筋不动的尴尬场景">解决发射小鸟后皮筋不动的尴尬场景</h2>
<ul>
<li>
<p>发射小鸟后将皮筋禁用</p>
</li>
<li>
<p>在发射时候进行的划线操作中初始化一下(启用)</p>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">right</span><span class="p">;</span> <span class="c1">// 弹弓右棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">left</span><span class="p">;</span> <span class="c1">// 弹弓左棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">leftPos</span><span class="p">;</span> <span class="c1">// 在左支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>  
    <span class="c1">// 这里又把SpringJoint2D改成public是因为 GameManager.cs中的Bird数组中的元素要调用它
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 小鸟爆炸特效
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Fly&#34;</span><span class="p">,</span><span class="m">0.2f</span><span class="p">);</span>
  
        <span class="c1">// 鼠标抬起,将划线(皮筋)禁用掉
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">left</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">Line</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟飞翔方法,就是将物体的SpringJoint禁用
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Fly</span><span class="p">(){</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// 2s后在GameManager中的birds数组中移除发射出去的小鸟
</span><span class="c1"></span>        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Next&#34;</span><span class="p">,</span><span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 弹弓皮筋
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Line</span><span class="p">(){</span>
        <span class="c1">// 每次划线将皮筋初始化一下,因为第一次发射后皮筋就被禁用掉了,第二次就没皮筋了,所以在发射后再次点击发射时需要初始化一下
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">left</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
  
        <span class="c1">// 设置左边的皮筋起始位置为右弹弓的位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
  
        <span class="c1">// 设置右边的皮筋起始位置为左弹弓的位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">leftPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟发射出去后的操作
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Next</span><span class="p">(){</span>
        <span class="c1">// 移除GameManager中bird数组中的当前小鸟
</span><span class="c1"></span>        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">birds</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="c1">// 在主场景中摧毁小鸟
</span><span class="c1"></span>        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="c1">// 小鸟消失没特效没面子
</span><span class="c1"></span>        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">NextBird</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="给小鸟添加拖尾效果">给小鸟添加拖尾效果</h2>
<ul>
<li>
<p>导入资源包中的<code>Source/Pocket RPG Weapon Trails.unitypackage</code></p>
</li>
<li>
<p>在bird下创建空物体``trail```</p>
</li>
<li>
<p>给bird创建脚本</p>
<p><code>TestMyTrail.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
  
<span class="k">public</span>  <span class="k">class</span> <span class="nc">TestMyTrail</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
     <span class="k">public</span> <span class="n">WeaponTrail</span> <span class="n">myTrail</span><span class="p">;</span>
  
     <span class="k">private</span> <span class="kt">float</span> <span class="n">t</span> <span class="p">=</span>  <span class="m">0.033f</span><span class="p">;</span>
     <span class="k">private</span> <span class="kt">float</span> <span class="n">tempT</span> <span class="p">=</span>  <span class="m">0</span><span class="p">;</span>
     <span class="k">private</span> <span class="kt">float</span> <span class="n">animationIncrement</span> <span class="p">=</span>  <span class="m">0.003f</span><span class="p">;</span>
  
     <span class="k">void</span> <span class="n">LateUpdate</span><span class="p">(){</span>
        <span class="n">t</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Clamp</span><span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">,</span>  <span class="m">0</span><span class="p">,</span>  <span class="m">0.066f</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="p">&gt;</span>  <span class="m">0</span><span class="p">){</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">tempT</span> <span class="p">&lt;</span> <span class="n">t</span><span class="p">){</span>
                <span class="n">tempT</span> <span class="p">+=</span> <span class="n">animationIncrement</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">myTrail</span><span class="p">.</span><span class="n">time</span> <span class="p">&gt;</span>  <span class="m">0</span><span class="p">){</span>
                    <span class="n">myTrail</span><span class="p">.</span><span class="n">Itterate</span><span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="n">time</span> <span class="p">-</span> <span class="n">t</span> <span class="p">+</span> <span class="n">tempT</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span><span class="p">{</span>
                    <span class="n">myTrail</span><span class="p">.</span><span class="n">ClearTrail</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
  
            <span class="n">tempT</span> <span class="p">-=</span> <span class="n">t</span><span class="p">;</span>
  
            <span class="k">if</span> <span class="p">(</span><span class="n">myTrail</span><span class="p">.</span><span class="n">time</span> <span class="p">&gt;</span>  <span class="m">0</span><span class="p">){</span>
                <span class="n">myTrail</span><span class="p">.</span><span class="n">UpdateTrail</span><span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="n">time</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">// 初始化光尾,默认不显示
</span><span class="c1"></span>    <span class="k">void</span> <span class="n">Start</span> <span class="p">()</span> <span class="p">{</span>
         <span class="c1">// 默认没有拖尾效果
</span><span class="c1"></span>        <span class="n">myTrail</span><span class="p">.</span><span class="n">SetTime</span><span class="p">(</span> <span class="m">0.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span>  <span class="m">1.0f</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 显示拖尾
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">heroAttack</span><span class="p">(){</span>
         <span class="c1">//设置拖尾时长
</span><span class="c1"></span>        <span class="n">myTrail</span><span class="p">.</span><span class="n">SetTime</span><span class="p">(</span> <span class="m">2.0f</span><span class="p">,</span>  <span class="m">0.0f</span><span class="p">,</span>  <span class="m">1.0f</span><span class="p">);</span>
         <span class="c1">//开始进行拖尾
</span><span class="c1"></span>        <span class="n">myTrail</span><span class="p">.</span><span class="n">StartTrail</span><span class="p">(</span> <span class="m">0.5f</span><span class="p">,</span>  <span class="m">0.4f</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 清除拖尾
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">heroIdle</span><span class="p">(){</span>
         <span class="c1">//清除拖尾
</span><span class="c1"></span>        <span class="n">myTrail</span><span class="p">.</span><span class="n">ClearTrail</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>然后给trail添加一个<code>MeshRenderer</code>,材料选择导入包中的<code>WeaponTrail</code></p>
</li>
<li>
<p>添加脚本<code>WeaponTrail.cs</code>,导入包中自带</p>
</li>
<li>
<p>更改<code>WeaponTrail.cs</code>下的<code>height</code>和<code>time</code>都为0.2,因为默认的是给人物,对于小鸟来说太宽</p>
</li>
<li>
<p>然后在Bird.cs中调用</p>
<blockquote>
<p>当飞出时候显示拖尾</p>
<p>当发生碰撞后取消拖尾</p>
</blockquote>
<p><code>Bird.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bird</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// 鼠标是否按下(自身)
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">right</span><span class="p">;</span> <span class="c1">// 弹弓右棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rightPos</span><span class="p">;</span> <span class="c1">// 在右支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">LineRenderer</span> <span class="n">left</span><span class="p">;</span> <span class="c1">// 弹弓左棍的绳子
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">Transform</span> <span class="n">leftPos</span><span class="p">;</span> <span class="c1">// 在左支下创建一个空物体,用于记录物体的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">maxDis</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的最大长度
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">TestMyTrail</span> <span class="n">trail</span><span class="p">;</span> <span class="c1">// 小鸟拖拽的拖尾效果
</span><span class="c1"></span>  
    <span class="c1">// 这里又把SpringJoint2D改成public是因为 GameManager.cs中的Bird数组中的元素要调用它
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">SpringJoint2D</span> <span class="n">sp</span><span class="p">;</span> <span class="c1">// 当前物体的SpringJoint2D,如果鼠标抬起使其失效,从而达到拖拽松手飞出去的效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="n">Rigidbody2D</span> <span class="n">rd</span><span class="p">;</span> <span class="c1">// 当前物体的刚体组件,单纯靠SpringJoint2D的是否启用控制小鸟非处小鸟动力太大.Kinematic值的真假决定是否开启动力学效果
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">boom</span><span class="p">;</span> <span class="c1">// 小鸟爆炸特效
</span><span class="c1"></span>  
    <span class="k">void</span> <span class="n">Start</span><span class="p">(){</span>
        <span class="n">sp</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SpringJoint2D</span><span class="p">&gt;();</span>
        <span class="n">rd</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody2D</span><span class="p">&gt;();</span>
        <span class="n">trail</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TestMyTrail</span><span class="p">&gt;();</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标按下
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseDown</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// 鼠标抬起
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnMouseUp</span><span class="p">(){</span>
        <span class="n">isClick</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">rd</span><span class="p">.</span><span class="n">isKinematic</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Fly&#34;</span><span class="p">,</span><span class="m">0.2f</span><span class="p">);</span>
  
        <span class="c1">// 鼠标抬起,将划线(皮筋)禁用掉
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">left</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Update is called once per frame
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 当按下鼠标
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">isClick</span><span class="p">){</span>
            <span class="c1">// Camera.main.ScreenToWorldPoint();函数是将 参数坐标 转为Unity引擎中的世界坐标
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenToWorldPoint</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
  
            <span class="c1">// 第一种方法
</span><span class="c1"></span>            <span class="c1">// transform.position += new Vector3(0,0,10);
</span><span class="c1"></span>            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,-</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
  
            <span class="c1">// 当从右支点指向小鸟点之间的向量长度超过规定的最大长度时
</span><span class="c1"></span>            <span class="c1">// Vector3.Distance用于求两个向量之间的距离
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">maxDis</span><span class="p">){</span>
                <span class="c1">// 求出此时小鸟向量的方向
</span><span class="c1"></span>                <span class="c1">// Vector3.normalized用于将向量变成单位向量,方向不变
</span><span class="c1"></span>                <span class="n">Vector3</span> <span class="n">pos</span> <span class="p">=</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
                <span class="c1">// 用小鸟向量的方向乘以规定的最大长度,计算出小鸟向量的最大值
</span><span class="c1"></span>                <span class="n">pos</span> <span class="p">*=</span> <span class="n">maxDis</span><span class="p">;</span>
                <span class="c1">// 更改小鸟向量为规定的最大向量,方向为当前小鸟向量的方向
</span><span class="c1"></span>                <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">pos</span> <span class="p">+</span> <span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">Line</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟飞翔方法,就是将物体的SpringJoint禁用
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Fly</span><span class="p">(){</span>
        <span class="n">trail</span><span class="p">.</span><span class="n">heroAttack</span><span class="p">();</span>
        <span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// 2s后在GameManager中的birds数组中移除发射出去的小鸟
</span><span class="c1"></span>        <span class="n">Invoke</span><span class="p">(</span><span class="s">&#34;Next&#34;</span><span class="p">,</span><span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 弹弓皮筋
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Line</span><span class="p">(){</span>
        <span class="c1">// 每次划线将皮筋初始化一下,因为第一次发射后皮筋就被禁用掉了,第二次就没皮筋了,所以在发射后再次点击发射时需要初始化一下
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">left</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
  
        <span class="c1">// 设置左边的皮筋起始位置为右弹弓的位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">rightPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">right</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
  
        <span class="c1">// 设置右边的皮筋起始位置为左弹弓的位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="n">leftPos</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="c1">// 终端为小鸟位置
</span><span class="c1"></span>        <span class="n">left</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// 小鸟发射出去后的操作
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Next</span><span class="p">(){</span>
        <span class="c1">// 移除GameManager中bird数组中的当前小鸟
</span><span class="c1"></span>        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">birds</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="c1">// 在主场景中摧毁小鸟
</span><span class="c1"></span>        <span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span>
        <span class="c1">// 小鸟消失没特效没面子
</span><span class="c1"></span>        <span class="n">Instantiate</span><span class="p">(</span><span class="n">boom</span><span class="p">,</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
        <span class="n">GameManager</span><span class="p">.</span><span class="n">_instance</span><span class="p">.</span><span class="n">NextBird</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="c1">// 当小鸟发生撞击取消拖尾效果
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">OnCollisionEnter2D</span><span class="p">(</span><span class="n">Collision2D</span> <span class="n">collision</span><span class="p">){</span>
        <span class="n">trail</span><span class="p">.</span><span class="n">heroIdle</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="创建场景">创建场景</h2>
<ul>
<li>用木块、石头石子、草地、天空背景等制作场地</li>
<li>给木块、石头等添加<code>Rigidbody2D</code>、<code>Box Collider2D</code>和<code>Pig.cs</code></li>
<li>草地和天空不需要</li>
<li>给这些物体上的<code>Pig.cs</code>的受伤图片和分数图片换新的</li>
<li>层级设置为<code>Player</code>,并适当的调整数值</li>
</ul>
<hr>
<h2 id="创建胜利和失败ui界面">创建胜利和失败UI界面</h2>
<ul>
<li>在主场景中创建<code>UI-&gt;Canvas</code>
<ul>
<li>点击<code>Canvas-&gt;Rect Transform</code>左上角的正方形块</li>
<li>在弹出的菜单中,按住Alt键,点击右下角最后一个,使画布铺满整个屏幕                                    ①</li>
</ul>
</li>
</ul>
<h3 id="失败界面">失败界面</h3>
<ul>
<li>
<p>在<code>Canvas</code>下创建<code>UI-&gt;Image</code>,命名为<code>lose</code>,背景颜色为黑色</p>
</li>
<li>
<p>重复①的操作</p>
</li>
<li>
<p>在<code>lose</code>下创建<code>Image</code></p>
</li>
<li>
<p>重复①的操作,但点击最低下一行的中间那个方块,使画布<code>竖直方向</code>充满整个屏幕</p>
</li>
<li>
<p>在<code>Image</code>下创建三个<code>Image</code>,分别命名为<code>load</code>、<code>menu</code>和<code>pig</code></p>
<ul>
<li>load是加载图片,在左下角稍微往右上一点</li>
<li>menu是菜单图片,在右下角稍微往左上一点</li>
<li>pig是一只开心的猪,证明你失败了,在上半部分中间</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/5063e0b7cdc249b08aa739798392d550.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_11,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
<li>
<p>选中<code>lose</code>,<code>Ctrl + 6</code>,保存为<code>lose.anim</code>,点击<code>Add Property</code>,<code>Image-&gt;Color</code>,添加一个<code>Color</code></p>
</li>
<li>
<p>选中帧头,将Image下的rgba的a设置为0,帧尾设置为0.6,达到一个从无色到半透明黑的渐变效果</p>
</li>
<li>
<p>对<code>lose</code>下的<code>Image</code>做同样的操作</p>
</li>
</ul>
<h3 id="胜利界面">胜利界面</h3>
<ul>
<li>
<p>复制一份lose,改名为<code>win</code>,删掉<code>Image</code>下的<code>pig</code></p>
</li>
<li>
<p>将<code>Animator</code>下的<code>lose</code>动画和状态机复制一份,都改名为<code>win</code></p>
</li>
<li>
<p>更改win状态机下的动画为win</p>
</li>
<li>
<p>更改win画布上的动画为win</p>
</li>
<li>
<p>将win和lose两个GUI都禁用</p>
</li>
<li>
<p>更改<code>GameManager.cs</code></p>
<p><code>GameManager.cs</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.SceneManagement</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
  
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Bird</span><span class="p">&gt;</span> <span class="n">birds</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Pig</span><span class="p">&gt;</span> <span class="n">pigs</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">GameManager</span> <span class="n">_instance</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">originPos</span><span class="p">;</span> <span class="c1">// 为了不让第二只及以下小鸟上弹弓太快,记录第一只小鸟的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">winGUI</span><span class="p">;</span> <span class="c1">// 游戏获得胜利的界面
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">loseGUI</span><span class="p">;</span> <span class="c1">// 游戏失败的界面
</span><span class="c1"></span>  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_instance</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
  
        <span class="c1">// 安全判定,如果有第一只小鸟
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="c1">// 将第一只小鸟的位置赋值给变量
</span><span class="c1"></span>            <span class="n">originPos</span> <span class="p">=</span> <span class="n">birds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Initialized</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 初始化小鸟
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Initialized</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">birds</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="c1">//第一只小鸟
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="c1">// 每次初始化,将游戏开始时第一只小鸟位置赋值给 发射后 数组中的下一次的第一只小鸟
</span><span class="c1"></span>                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">originPos</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 判定游戏逻辑
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">NextBird</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pigs</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
                <span class="c1">//下一只飞吧
</span><span class="c1"></span>                <span class="n">Initialized</span><span class="p">();</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="c1">// 输了,解禁输的GUI
</span><span class="c1"></span>                <span class="n">loseGUI</span><span class="p">.</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">// 赢了,解禁赢了的GUI
</span><span class="c1"></span>        <span class="k">else</span><span class="p">{</span>
            <span class="n">winGUI</span><span class="p">.</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">public</span> <span class="k">void</span> <span class="n">ShowStars</span><span class="p">(){</span>
  
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将<code>win</code>和<code>lose</code>两个GUI赋值给<code>GameManager</code>上的<code>GameManager.cs</code></p>
</li>
</ul>
<hr>
<h2 id="给胜利ui界面添加三颗星星和星星闪的粒子系统">给胜利UI界面添加三颗星星和星星闪的粒子系统</h2>
<ul>
<li>剪切三颗星星的图片,放到Canvas下的lose下面,适当调整位置</li>
<li>导入资源包下的<code>Source/yanhua.unitypackage</code></li>
<li>Prefab包下就有<code>root</code>了</li>
<li>将root拖进主场景,展开有<code>sub</code>和<code>sub2</code></li>
<li>这是两个烟花效果</li>
<li>将这两个拖出到主场景,删除root</li>
<li>重建一个<code>Create Empty</code>,命名为root</li>
<li>将<code>sub</code>和<code>sub1</code>拖入到root</li>
<li><code>sub</code>和<code>sub1</code>下都有<code>Looping</code>和<code>Start Size</code>
<ul>
<li>Looping是循环播放,取消勾选</li>
<li>Start Size是一个范围,烟花尺寸,设为1.5~2</li>
</ul>
</li>
</ul>
<hr>
<h2 id="unity的渲染层级关系">Unity的渲染层级关系</h2>
<h3 id="对于不同camera">对于不同Camera</h3>
<ul>
<li>不同Camera有不同的depth,先绘制depth值低的物体</li>
</ul>
<h2 id="同一个camera">同一个Camera</h2>
<ul>
<li>Sorting Layer</li>
<li>默认是default层</li>
<li>新创建出来的层比后创建出来的层级别大</li>
</ul>
<h3 id="同一个sorting-layer">同一个Sorting Layer</h3>
<ul>
<li>Order in layer大值盖住小值</li>
</ul>
<hr>
<h2 id="显示星光闪闪星星特效">显示星光闪闪星星特效</h2>
<ul>
<li>
<p>虽然上面添加了粒子特效,但是在游戏运行时无法显示在屏幕上</p>
</li>
<li>
<p>将<code>Canvas</code>下的Layer设置为UI</p>
</li>
<li>
<p><code>Canvas---&gt;Render Mode</code>改成<code>Screen Space - Camera</code></p>
</li>
<li>
<p>它下面有个<code>Render Camera</code>,它需要一个<code>Camera</code></p>
</li>
<li>
<p>创建一个新的<code>Camera</code>,命名为<code>UICamera</code>,Layer设置为UI</p>
</li>
<li>
<p>设置<code>UICamera</code>下的<code>Camera</code></p>
<ul>
<li>Clear Flags  &mdash;&gt;  Depth only (仅深度)</li>
<li>Culling Mask  &mdash;&gt;  UI</li>
<li>Projection  &mdash;&gt;   Orthographic(2D游戏)</li>
</ul>
</li>
<li>
<p>将<code>UICamera</code>赋值给上面的<code>Render Camera</code></p>
</li>
<li>
<p><strong>其实就是给UI一个相机</strong></p>
</li>
<li>
<p>将<code>root</code>的Layer设置为UI</p>
</li>
<li>
<p><code>Particle System-&gt;Renderer-&gt;Sorting Layer ID</code>设置为<code>Player</code></p>
</li>
<li>
<p>将root复制三份到三颗星星下</p>
</li>
<li>
<p>调整三个root的位置</p>
<blockquote>
<p>注意:root下的sub的位置和root的位置可能不相同</p>
</blockquote>
</li>
</ul>
<hr>
<h2 id="从左往右开始一颗一颗的显示星星">从左往右开始一颗一颗的显示星星</h2>
<ul>
<li>
<p><code>Canvas</code>下</p>
<ul>
<li>win禁用
<ul>
<li>Image启用
<ul>
<li>load和menu启用</li>
<li>leftStar、middleStar和rightStar禁用
<ul>
<li>root启用
<ul>
<li>sub启用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>更改<code>GameManager.cs</code>代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.SceneManagement</span><span class="p">;</span>
  
<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
  
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Bird</span><span class="p">&gt;</span> <span class="n">birds</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Pig</span><span class="p">&gt;</span> <span class="n">pigs</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">GameManager</span> <span class="n">_instance</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">originPos</span><span class="p">;</span> <span class="c1">// 为了不让第二只及以下小鸟上弹弓太快,记录第一只小鸟的位置
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">winGUI</span><span class="p">;</span> <span class="c1">// 游戏获得胜利的界面
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">loseGUI</span><span class="p">;</span> <span class="c1">// 游戏失败的界面
</span><span class="c1"></span>    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;</span> <span class="n">stars</span><span class="p">;</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_instance</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
  
        <span class="c1">// 安全判定,如果有第一只小鸟
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="c1">// 将第一只小鸟的位置赋值给变量
</span><span class="c1"></span>            <span class="n">originPos</span> <span class="p">=</span> <span class="n">birds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">private</span> <span class="k">void</span> <span class="n">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Initialized</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 初始化小鸟
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">private</span> <span class="k">void</span> <span class="n">Initialized</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">birds</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="c1">//第一只小鸟
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="c1">// 每次初始化,将游戏开始时第一只小鸟位置赋值给 发射后 数组中的下一次的第一只小鸟
</span><span class="c1"></span>                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">originPos</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="n">birds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sp</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="c1">/// &lt;summary&gt;
</span><span class="c1"></span>    <span class="c1">/// 判定游戏逻辑
</span><span class="c1"></span>    <span class="c1">/// &lt;/summary&gt;
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">void</span> <span class="n">NextBird</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pigs</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">){</span>
                <span class="c1">//下一只飞吧
</span><span class="c1"></span>                <span class="n">Initialized</span><span class="p">();</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="c1">// 输了,解禁输的GUI
</span><span class="c1"></span>                <span class="n">loseGUI</span><span class="p">.</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">// 赢了,解禁赢了的GUI
</span><span class="c1"></span>        <span class="k">else</span><span class="p">{</span>
            <span class="n">winGUI</span><span class="p">.</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="k">public</span> <span class="k">void</span> <span class="n">ShowStars</span><span class="p">(){</span>
        <span class="n">StartCoroutine</span><span class="p">(</span><span class="s">&#34;show&#34;</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="n">IEnumerator</span> <span class="n">show</span><span class="p">(){</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span><span class="n">i</span> <span class="p">&lt;</span> <span class="n">birds</span><span class="p">.</span><span class="n">Count</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span><span class="n">i</span><span class="p">++){</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="n">WaitForSeconds</span><span class="p">(</span><span class="m">0.2f</span><span class="p">);</span>
            <span class="n">stars</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>关于Unity协程</p>
<blockquote>
<ul>
<li>首先我们要明白，unity的代码是按照顺序进行执行的，然后在一些特定的函数中会进行一帧一帧的运行</li>
<li>假设我们需要修改一个函数的运行时间，让它延迟一段时间在运行，应该怎么操作呢？</li>
<li>IEnumerator就可以起到这个作用，比如某个物体需要在0.5秒后做出变化，我们就可以将这个变化的函数设计为两秒后运行就可。在这个函数里添加</li>
<li>yield return new WaitForSeconds(0.5f);</li>
<li>协程函数是通过StartCoroutine()函数进行调用的，StartCoroutine(方法，参数)，只能通过StopAllCoroutines来结束</li>
<li>或者StartCoroutine(”字符串的方法名字”，参数)，可以使用StopCoroutine(”字符串的方法名”)来结束协程。后方法只支持一个参数</li>
<li>需要注意的是：
<ul>
<li>1.当某一个脚本中的协程在执行过程中，如果我们将该脚本的enable设置为false，协程不会停止。只有将挂载该脚本的物体设置为SetActive(false)时才会停止。</li>
<li>2.Unity在调用StartCoroutine()后不会等待协程中的内容返回，会立即执行后续代码。</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li>
<p>最后将三个星星赋值给GameManager的数组</p>
</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Zhang's Blog</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2020-07-29
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/unity/">Unity</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/c/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">C</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/es6/">
            <span class="next-text nav-default"></span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://www.linkedin.com/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://www.google.com/" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://getpocket.com/" class="iconfont icon-pocket" title="pocket"></a>
      <a href="https://www.tumblr.com/" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="https://www.instagram.com/" class="iconfont icon-instagram" title="instagram"></a>
      <a href="https://about.gitlab.com/" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="https://www.bilibili.com/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://golang.org/">GoLang</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Author - 
    <a class="theme-link" href="https://space.bilibili.com/628950169/">Mr'zhang</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Zhang's Blog</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>








</body>
</html>
