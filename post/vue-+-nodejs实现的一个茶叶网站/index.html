<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>vue &#43; nodejs实现的一个茶叶网站 - Zhang&#39;s Blog的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Zhang&#39;s Blog" /><meta name="description" content="Step01.创建远程仓库 mac下载git 1 /usr/bin/ruby -e &amp;#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;#34; gitee创建vue-tea项目,并克隆到本地 创建本地分支,并push到线上 查看本地所" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.67.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/vue-&#43;-nodejs%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E8%8C%B6%E5%8F%B6%E7%BD%91%E7%AB%99/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="vue &#43; nodejs实现的一个茶叶网站" />
<meta property="og:description" content="Step01.创建远程仓库 mac下载git 1 /usr/bin/ruby -e &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&#34; gitee创建vue-tea项目,并克隆到本地 创建本地分支,并push到线上 查看本地所" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/vue-&#43;-nodejs%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E8%8C%B6%E5%8F%B6%E7%BD%91%E7%AB%99/" />
<meta property="article:published_time" content="2022-05-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-05-21T00:00:00+00:00" />
<meta itemprop="name" content="vue &#43; nodejs实现的一个茶叶网站">
<meta itemprop="description" content="Step01.创建远程仓库 mac下载git 1 /usr/bin/ruby -e &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&#34; gitee创建vue-tea项目,并克隆到本地 创建本地分支,并push到线上 查看本地所">
<meta itemprop="datePublished" content="2022-05-21T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2022-05-21T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="12917">



<meta itemprop="keywords" content="vue," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="vue &#43; nodejs实现的一个茶叶网站"/>
<meta name="twitter:description" content="Step01.创建远程仓库 mac下载git 1 /usr/bin/ruby -e &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&#34; gitee创建vue-tea项目,并克隆到本地 创建本地分支,并push到线上 查看本地所"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Zhang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/home/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">MyBlog</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Zhang&#39;s Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/home/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">MyBlog</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">vue &#43; nodejs实现的一个茶叶网站</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-05-21 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#step01创建远程仓库">Step01.创建远程仓库</a>
      <ul>
        <li><a href="#mac下载git">mac下载git</a></li>
        <li><a href="#创建本地分支并push到线上">创建本地分支,并push到线上</a></li>
      </ul>
    </li>
    <li><a href="#step02创建前端项目和后端项目">Step02.创建前端项目和后端项目</a>
      <ul>
        <li><a href="#前端项目">前端项目</a></li>
        <li><a href="#后端项目">后端项目</a></li>
        <li><a href="#将项目推送到线上">将项目推送到线上</a></li>
      </ul>
    </li>
    <li><a href="#step03配置vueconfigjs-写路径时使用">Step03.配置vue.config.js 写路径时使用@</a></li>
    <li><a href="#step04在点击tabbar中组件切换到指定路由">Step04.在点击tabbar中组件,切换到指定路由</a></li>
    <li><a href="#step05首页顶部header底下的nav导航栏">Step05.首页顶部header底下的nav导航栏</a></li>
    <li><a href="#step06首页swiper">Step06.首页swiper</a></li>
    <li><a href="#step06插槽">Step06.插槽</a></li>
    <li><a href="#step07多个flex盒子文本溢出单行隐藏和多行隐藏">Step07.多个flex盒子,文本溢出单行隐藏和多行隐藏</a>
      <ul>
        <li><a href="#单行">单行</a></li>
        <li><a href="#多行">多行</a></li>
      </ul>
    </li>
    <li><a href="#step08前台axios请求后台node服务器">Step08.前台axios请求后台node服务器</a>
      <ul>
        <li><a href="#设置跨域">设置跨域</a></li>
        <li><a href="#编写服务器">编写服务器</a></li>
      </ul>
    </li>
    <li><a href="#step09子组件向父组件传值">Step09.子组件向父组件传值</a></li>
    <li><a href="#step10es6的异步方法关键字-async和await">Step10.ES6的异步方法关键字-async和await</a></li>
    <li><a href="#step11objectfreeze方法">Step11.Object.freeze()方法</a>
      <ul>
        <li><a href="#基本使用">基本使用</a></li>
        <li><a href="#冻结数组">冻结数组</a>
          <ul>
            <li><a href="#浅冻结">浅冻结</a></li>
            <li><a href="#深冻结">深冻结</a></li>
          </ul>
        </li>
        <li><a href="#应用场景">应用场景</a>
          <ul>
            <li><a href="#vue中使用objectfreeze">Vue中使用Object.freeze</a></li>
          </ul>
        </li>
        <li><a href="#objectfreeze原理">Object.freeze()原理</a></li>
      </ul>
    </li>
    <li><a href="#step12不使用flexdiv内部文字纵横居中">Step12.不使用flex,div内部文字纵横居中</a></li>
    <li><a href="#step13返回到上一页的路由">Step13.返回到上一页的路由</a></li>
    <li><a href="#step14同一个header通过某些点击事件切换中间那部分而不切换header">Step14.同一个header,通过某些点击事件切换中间那部分而不切换header</a></li>
    <li><a href="#step15去掉li和input和a的默认样式">Step15.去掉li和input和a的默认样式</a></li>
    <li><a href="#step16本地存储">Step16.本地存储</a></li>
    <li><a href="#step17使用mint-ui构造弹出框删除搜索记录">Step17.使用mint-ui构造弹出框删除搜索记录</a></li>
    <li><a href="#step18二次封装axios">Step18.二次封装axios</a></li>
    <li><a href="#step19node操作mysql">Step19.node操作mysql</a></li>
    <li><a href="#step20搜索商品的结果头部的综合-价格-销量排序切换结构设计">Step20.搜索商品的结果,头部的<code>综合</code> <code>价格</code> <code>销量</code>排序切换结构设计</a></li>
    <li><a href="#objectkeys">Object.keys()</a></li>
    <li><a href="#objectvalues">Object.values()</a></li>
    <li><a href="#step21设计-左侧分类栏永远不动右侧指定类别的内容可以随意上下拖动的分类页面">Step21.设计-左侧分类栏永远不动,右侧指定类别的内容可以随意上下拖动的分类页面</a></li>
    <li><a href="#step22上面的页面点击左边右边自动滚动到指定位置">Step22.上面的页面,点击左边,右边自动滚动到指定位置</a>
      <ul>
        <li><a href="#id锚点">id锚点</a></li>
        <li><a href="#使用scrollintoview">使用scrollIntoView</a></li>
        <li><a href="#锚点滚动置顶会被顶部导航栏遮住的问题">锚点滚动置顶会被顶部导航栏遮住的问题</a></li>
      </ul>
    </li>
    <li><a href="#step23详情页">Step23.详情页</a>
      <ul>
        <li><a href="#头部和顶部都position中间使用了better-scroll无法滚动">头部和顶部都position,中间使用了better-scroll无法滚动</a></li>
        <li><a href="#拖动页面顶部商品详情-商品评价导航栏渐隐渐现的效果">拖动页面,顶部<code>商品详情 商品评价</code>导航栏渐隐渐现的效果</a>
          <ul>
            <li><a href="#betterscroll的可选参数">BetterScroll的可选参数</a></li>
            <li><a href="#实时监听betterscroll滚动的位置">实时监听BetterScroll滚动的位置</a></li>
            <li><a href="#betterscroll可监听的事件">BetterScroll可监听的事件</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#step24返回到上一页">Step24.返回到上一页</a></li>
    <li><a href="#step25登录逻辑">Step25.登录逻辑</a>
      <ul>
        <li><a href="#密码登录">密码登录</a>
          <ul>
            <li><a href="#前端判断">前端判断</a></li>
          </ul>
        </li>
        <li><a href="#验证码登录">验证码登录</a>
          <ul>
            <li><a href="#获取短信验证码按钮计时效果">获取短信验证码按钮计时效果</a></li>
          </ul>
        </li>
        <li><a href="#发送邮箱验证码">发送邮箱验证码</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="step01创建远程仓库">Step01.创建远程仓库</h1>
<h2 id="mac下载git">mac下载git</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">/usr/bin/ruby -e <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>gitee创建<code>vue-tea</code>项目,并克隆到本地</li>
</ul>
<h2 id="创建本地分支并push到线上">创建本地分支,并push到线上</h2>
<ul>
<li>
<p>查看本地所有分支,以及当前所在分支</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git branch
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>可以看到,当前本地只有一个<code>master</code>分支</p>
</li>
<li>
<p>创建一个本地新分支<code>develop</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git branch develop 
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将新创建的分支push到线上git</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git push --set-upstream origin develop
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>查看是否成功推送到线上</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git branch -r
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>查看线上全部分支状态</p>
</blockquote>
</li>
<li>
<p>最后,在develop分支下新建一个分支<code>feature/home</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git checkout develop
git branch feature/home
git push --set-upstream origin feature/home
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step02创建前端项目和后端项目">Step02.创建前端项目和后端项目</h1>
<h2 id="前端项目">前端项目</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vue create vue-tea
</code></pre></td></tr></table>
</div>
</div><ul>
<li>将git项目合并</li>
<li><a href="https://gitee.com/yuzhoudaima/vue-tea.git">项目地址</a></li>
</ul>
<h2 id="后端项目">后端项目</h2>
<ul>
<li>
<p>全局安装express</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install express-generator -g
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>进入项目根目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> vue-tea
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在项目根目录下,创建后端项目</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">express --view<span class="o">=</span>ejs server
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>进入后端服务器目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> server
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>安装</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>启动服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm run start
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>浏览器访问</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">localhost:3000
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果可以看到express的欢迎页面</p>
</li>
<li>
<p>说明创建成功</p>
</li>
</ul>
<h2 id="将项目推送到线上">将项目推送到线上</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git checkout develop <span class="c1"># 切换到develop分支</span>
git add .
git commit -m <span class="s2">&#34;vue-tea&#34;</span>
git push
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step03配置vueconfigjs-写路径时使用">Step03.配置vue.config.js 写路径时使用@</h1>
<ul>
<li>
<p>在vue.config.js的module.exports中添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">configureWebpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
     <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="p">{</span>
         <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">,</span> <span class="s1">&#39;.vue&#39;</span><span class="p">],</span>
         <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
             <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./src&#39;</span><span class="p">),</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在这之前,你还需要创建全局变量path</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这样的操作,使得你在代码中导包时,写一个<strong><code>@/</code></strong>,就代表了src目录</p>
</li>
<li>
<p>免得写那么长绝对路径和相对路径</p>
</li>
</ul>
<hr>
<h1 id="step04在点击tabbar中组件切换到指定路由">Step04.在点击tabbar中组件,切换到指定路由</h1>
<ul>
<li>
<p>我的tabbar数据是这样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="err">data()</span><span class="p">{</span>
        <span class="err">return{</span>
            <span class="err">tabbarList:[</span>
                <span class="err">{</span>
                    <span class="err">title:</span><span class="nt">&#34;首页&#34;</span><span class="p">,</span>
                    <span class="err">path:</span><span class="nt">&#34;/home&#34;</span><span class="p">,</span>
                    <span class="err">active:</span><span class="nt">&#34;./images/home.png&#34;</span><span class="p">,</span>
                    <span class="err">selected:</span><span class="nt">&#34;./images/home_selected.png&#34;</span>
                <span class="p">}</span><span class="err">,</span>
                <span class="p">{</span>
                    <span class="err">title:</span><span class="nt">&#34;列表&#34;</span><span class="p">,</span>
                    <span class="err">path:</span><span class="nt">&#34;/list&#34;</span><span class="p">,</span>
                    <span class="err">active:</span><span class="nt">&#34;./images/list.png&#34;</span><span class="p">,</span>
                    <span class="err">selected:</span><span class="nt">&#34;./images/list_selected.png&#34;</span>
                <span class="p">}</span><span class="err">,</span>
                <span class="p">{</span>
                    <span class="err">title:</span><span class="nt">&#34;购物车&#34;</span><span class="p">,</span>
                    <span class="err">path:</span><span class="nt">&#34;/cart&#34;</span><span class="p">,</span>
                    <span class="err">active:</span><span class="nt">&#34;./images/car.png&#34;</span><span class="p">,</span>
                    <span class="err">selected:</span><span class="nt">&#34;./images/car_selected.png&#34;</span>
                <span class="p">}</span><span class="err">,</span>
                <span class="p">{</span>
                    <span class="err">title:</span><span class="nt">&#34;我的&#34;</span><span class="p">,</span>
                    <span class="err">path:</span><span class="nt">&#34;/my&#34;</span><span class="p">,</span>
                    <span class="err">active:</span><span class="nt">&#34;./images/user.png&#34;</span><span class="p">,</span>
                    <span class="err">selected:</span><span class="nt">&#34;./images/user_selected.png&#34;</span>
                <span class="p">}</span><span class="err">,</span>
            <span class="err">],</span>
            <span class="err">active:</span><span class="s2">&#34;color:#e15133;&#34;</span>
        <span class="err">}</span>
    <span class="err">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>每一个json元素对应一个tabbar - item</p>
</li>
<li>
<p><code>v-for</code>遍历json,生成tabbar</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">li</span> 
    <span class="nt">v-for</span><span class="s">=&#34;(item,index) in tabbarList&#34; 
</span><span class="s">    :key=&#34;index&#34;
</span><span class="s">    @click=&#34;switchTab(item.path)&#34;
</span><span class="s">    &gt;
</span><span class="s">    &lt;img :src=&#34;$route.path.includes(item.path) ? item.selected : item.active&#34; alt=&#34;#&#34;&gt;
</span><span class="s">    &lt;span :style=&#34;$route.path.includes(item.path) ?  active : &#39;&#39;&#34;</span><span class="p">&gt;{{</span> <span class="na">item.title</span> <span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>对于每个组件</p>
<ul>
<li>
<p>图片</p>
<blockquote>
<p><code>$route.path</code></p>
<ul>
<li>这得先说一下<code>$route</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nv">$route获取的是当前url地址的信息</span>，通过<span class="nv">$route可以拿到的数据包括</span>

fullPath: <span class="s2">&#34;/Namevue/test&#34;</span>   

router: <span class="s2">&#34;&#34;</span>     //路由规则所属的路由器

name: <span class="s2">&#34;Namevue&#34;</span>    //当前路径的名字，如果没有使用具名路径，则名字为空

params: <span class="o">{</span>id: <span class="s2">&#34;test&#34;</span><span class="o">}</span>    //路由中的定义的动态片段和全匹配片段的键值对

path: <span class="s2">&#34;/Namevue/test&#34;</span>    //当前路由对象的路径，会被解析为绝对路径，如 <span class="s2">&#34;/home/news&#34;</span>

query: <span class="o">{}</span>   //路由中查询参数的键值对。例如，对于 /home/01?favorite<span class="o">=</span>yes ，会得到<span class="nv">$route</span>.query.favorite <span class="o">==</span> ‘yes‘ 。
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>所以,<code>$route.path</code>代表当前所在页面的路径</p>
</li>
<li>
<p>string.includes(str);</p>
<blockquote>
<p>判断字符串str是否作为子集存在于字符串中</p>
</blockquote>
</li>
<li>
<p>所以这里是,如果当前路由和当前所在的tababr组件的path属性是一个(也就是当前页面),那就将图片换为高亮图片,否则就正常</p>
</li>
<li>
<p>tabbar的图片也是一样</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>点击实现的路由跳转</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">switchTab</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
        <span class="c1">// console.log(this.$route.path.includes(&#34;home&#34;));
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span> <span class="o">==</span> <span class="nx">path</span><span class="p">){</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>如果点击的tabbbar组件中的路由属性和当前页面的路由一致</p>
<p>那就什么也不做</p>
<p>否则,使用$this.router.replace(path);跳转到指定路由,但这个路由并不会被push到history栈中</p>
<ul>
<li>
<p>this.$router</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">this.<span class="nv">$router</span> 相当于一个全局的路由器对象，包含了很多属性和对象（比如 <span class="nb">history</span> 对象），任何页面都可以调用其 push<span class="o">()</span>, replace<span class="o">()</span>, go<span class="o">()</span> 等方法。
  
this.<span class="nv">$route</span> 表示当前路由对象，每一个路由都会有一个 route 对象，是一个局部的对象，可以获取对应的 name, path, params, query 等属性。
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>关于 push() 方法：</p>
<p>想要导航到不同的 URL，则使用 router.push 方法。这个方法会向 history 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 URL。</p>
<p>当你点击 <router-link> 时，这个方法会在内部调用，所以说，点击 <router-link :to="..."> 等同于调用 router.push(&hellip;)</p>
</li>
<li>
<p>push() 方法的调用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">//字符串
this.<span class="nv">$router</span>.push<span class="o">(</span><span class="s1">&#39;home&#39;</span><span class="o">)</span>
  
//对象
this.<span class="nv">$router</span>.push<span class="o">({</span>path:<span class="s1">&#39;home&#39;</span><span class="o">})</span>
  
//命名的路由
this.<span class="nv">$router</span>.push<span class="o">({</span>name:<span class="s1">&#39;user&#39;</span>, params:<span class="o">{</span>userId: <span class="s1">&#39;123&#39;</span><span class="o">}})</span>
  
//带查询参数，变成 /register?plan<span class="o">=</span>private
this.<span class="nv">$router</span>.push<span class="o">({</span>path:<span class="s1">&#39;register&#39;</span>, query:<span class="o">{</span>plan:private<span class="o">}})</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>注意：如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span>
   
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">path</span><span class="o">:</span><span class="sb">`/user/</span><span class="si">${</span><span class="nx">userId</span><span class="si">}</span><span class="sb">`</span><span class="p">});</span>  <span class="c1">//-&gt;/user/123
</span><span class="c1"></span>   
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nx">params</span><span class="o">:</span><span class="p">{</span><span class="nx">userId</span><span class="p">}});</span>  <span class="c1">//-&gt;/user/123
</span><span class="c1"></span>   
<span class="c1">//这里的 params 不生效
</span><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="nx">params</span><span class="o">:</span><span class="p">{</span><span class="nx">userId</span><span class="p">}});</span>  <span class="c1">//-&gt;/user
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>2.this.$router.replace()</p>
<p>描述：同样是跳转到指定的url，但是这个方法不会向history里面添加新的记录，点击返回，会跳转到上上一个页面。上一个记录是不存在的。</p>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<h1 id="step05首页顶部header底下的nav导航栏">Step05.首页顶部header底下的nav导航栏</h1>
<ul>
<li>
<p>这里我使用移动端组件<code>ly-tab</code></p>
</li>
<li>
<p>下载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm i ly-tab -S
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>main.js中导入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">LyTab</span> <span class="nx">from</span> <span class="s1">&#39;ly-tab&#39;</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">LyTab</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>然后在页面中使用</p>
</li>
<li>
<p>到npm里面搜,就有了</p>
<p><code>HeaderTab.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ly-tabs</span> <span class="nt">v-model</span><span class="s">=&#34;value&#34; class=&#34;header_tab&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ly-tab-item</span> <span class="na">v</span><span class="nt">-for</span><span class="err">=&#34;(</span><span class="na">item</span><span class="err">,</span><span class="na">index</span><span class="err">)</span> <span class="na">in</span> <span class="na">header_tab_list</span><span class="err">&#34;</span> <span class="nt">:key</span><span class="s">=&#34;index&#34;</span> <span class="nt">:name</span><span class="s">=&#34;item.name&#34;</span> <span class="nt">:title</span><span class="s">=&#34;item.title&#34;</span> <span class="p">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/ly-tabs&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
  
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;HeaderTab&#34;</span><span class="p">,</span>
    <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">value</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
            <span class="nx">header_tab_list</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;首页&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;推荐&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;3&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Android&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;4&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;前端&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;5&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;后端&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;6&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;iOS&#34;</span> 
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
    <span class="p">.</span><span class="nx">header_tab</span><span class="p">{</span>
    <span class="nx">position</span><span class="o">:</span> <span class="nx">fixed</span><span class="p">;</span>
    <span class="nx">top</span><span class="o">:</span> <span class="mi">50</span><span class="nx">px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>给他绑定点击事件</p>
</li>
<li>
<p>比如点击第一个,在控制台就打印出它的索引</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">change</span><span class="o">=</span><span class="s2">&#34;changeHeaderTab&#34;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>给最外层的<code>ly-tabs</code>添加<code>@change</code>事件</p>
<p>当你点击某个子组件时</p>
<p>组件会自动将你点击的子组件的索引,作为参数传递给<code>@change</code>方法</p>
</blockquote>
</li>
</ul>
<p><code>HeaderTab.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ly-tabs</span> <span class="nt">v-model</span><span class="s">=&#34;value&#34; class=&#34;header_tab&#34; @change=&#34;changeHeaderTab&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ly-tab-item</span> <span class="na">v</span><span class="nt">-for</span><span class="err">=&#34;(</span><span class="na">item</span><span class="err">,</span><span class="na">index</span><span class="err">)</span> <span class="na">in</span> <span class="na">header_tab_list</span><span class="err">&#34;</span> <span class="nt">:key</span><span class="s">=&#34;index&#34;</span> <span class="nt">:name</span><span class="s">=&#34;item.name&#34;</span> <span class="nt">:title</span><span class="s">=&#34;item.title&#34;</span> <span class="p">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/ly-tabs&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;HeaderTab&#34;</span><span class="p">,</span>
    <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">value</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>  
            <span class="nx">header_tab_list</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;首页&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;贡菊&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;3&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;普洱&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;4&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;铁观音&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;5&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;恩施&#34;</span> 
                <span class="p">},</span>
                <span class="p">{</span> 
                  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;6&#39;</span><span class="p">,</span>
                  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;陈皮&#34;</span> 
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">changeHeaderTab</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
    <span class="p">.</span><span class="nx">header_tab</span><span class="p">{</span>
      <span class="nx">position</span><span class="o">:</span> <span class="nx">fixed</span><span class="p">;</span>
      <span class="nx">top</span><span class="o">:</span> <span class="mi">50</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">z</span><span class="o">-</span><span class="nx">index</span><span class="o">:</span> <span class="mi">999</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step06首页swiper">Step06.首页swiper</h1>
<ul>
<li>
<p>使用vue-awesome-swiper插件</p>
</li>
<li>
<p>实现轮播图</p>
</li>
<li>
<p>但是这个东西的版本问题很坑比</p>
</li>
<li>
<p>版本记录</p>
<blockquote>
<ul>
<li>
<p>Vue 2</p>
</li>
<li>
<p>Vue-awesome-swiper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install swiper vue-awesome-swiper@2.6.7 --save
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</blockquote>
</li>
<li>
<p>安装完毕,main.js注册</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// vue-awesome-swiper
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">VueAwesomeSwiper</span> <span class="nx">from</span> <span class="s1">&#39;vue-awesome-swiper&#39;</span> <span class="c1">// 核心组件
</span><span class="c1"></span><span class="kr">import</span> <span class="s2">&#34;swiper/dist/css/swiper.css&#34;</span> <span class="c1">// 全局样式
</span><span class="c1"></span>  
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">LyTab</span><span class="p">).</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueAwesomeSwiper</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在组件中使用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">swiper</span> <span class="nt">:options</span><span class="s">=&#34;swiperOption&#34;</span><span class="p">&gt;</span>
    <span class="c">&lt;!--</span> <span class="nx">slides</span> <span class="o">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">swiper-slide</span><span class="p">&gt;</span><span class="nx">I</span><span class="s1">&#39;m Slide 1&lt;/swiper-slide&gt;
</span><span class="s1">    &lt;swiper-slide&gt;I&#39;</span><span class="nx">m</span> <span class="nx">Slide</span> <span class="mi">2</span><span class="o">&lt;</span><span class="err">/swiper-slide&gt;</span>
    <span class="p">&lt;</span><span class="nt">swiper-slide</span><span class="p">&gt;</span><span class="nx">I</span><span class="s1">&#39;m Slide 3&lt;/swiper-slide&gt;
</span><span class="s1">    &lt;swiper-slide&gt;I&#39;</span><span class="nx">m</span> <span class="nx">Slide</span> <span class="mi">4</span><span class="o">&lt;</span><span class="err">/swiper-slide&gt;</span>
    <span class="p">&lt;</span><span class="nt">swiper-slide</span><span class="p">&gt;</span><span class="nx">I</span><span class="s1">&#39;m Slide 5&lt;/swiper-slide&gt;
</span><span class="s1">    &lt;swiper-slide&gt;I&#39;</span><span class="nx">m</span> <span class="nx">Slide</span> <span class="mi">6</span><span class="o">&lt;</span><span class="err">/swiper-slide&gt;</span>
    <span class="p">&lt;</span><span class="nt">swiper-slide</span><span class="p">&gt;</span><span class="nx">I</span><span class="s1">&#39;m Slide 7&lt;/swiper-slide&gt;
</span><span class="s1">    &lt;!-- Optional controls --&gt;
</span><span class="s1">    &lt;div class=&#34;swiper-pagination&#34;  slot=&#34;pagination&#34;&gt;&lt;/div&gt;  &lt;!-- 轮播图底下的一排小点 --&gt;
</span><span class="s1">    &lt;div class=&#34;swiper-button-prev&#34; slot=&#34;button-prev&#34;&gt;&lt;/div&gt;
</span><span class="s1">    &lt;div class=&#34;swiper-button-next&#34; slot=&#34;button-next&#34;&gt;&lt;/div&gt;
</span><span class="s1">    &lt;div class=&#34;swiper-scrollbar&#34;   slot=&#34;scrollbar&#34;&gt;&lt;/div&gt;
</span><span class="s1">  &lt;/swiper&gt;
</span><span class="s1">&lt;/template&gt;
</span><span class="s1">  
</span><span class="s1">&lt;script&gt;
</span><span class="s1">export default {
</span><span class="s1">  name: &#39;</span><span class="nx">HomeSwiper</span><span class="err">&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">swiperOption</span><span class="o">:</span> <span class="p">{</span>    <span class="c1">// swiper的配置项
</span><span class="c1"></span>        <span class="nx">loop</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// 循环轮播
</span><span class="c1"></span>        <span class="nx">autoplay</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// 自动播放
</span><span class="c1"></span>          <span class="nx">delay</span><span class="o">:</span> <span class="mi">3000</span><span class="p">,</span> <span class="c1">// 播放间隔
</span><span class="c1"></span>          <span class="nx">stopOnLastSlide</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> 
          <span class="nx">disableOnInteraction</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="c1">// 显示底下的一排小点
</span><span class="c1"></span>        <span class="nx">pagination</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">el</span><span class="o">:</span> <span class="s2">&#34;.swiper-pagination&#34;</span><span class="p">,</span>
          <span class="nx">clickable</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">//允许分页点击跳转
</span><span class="c1"></span>        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>更改底下一排小点的高亮颜色</p>
</li>
<li>
<p>浏览器调试器找到元素的class</p>
</li>
<li>
<p>更改<strong>背景色</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">::</span><span class="nd">v-deep</span> <span class="p">.</span><span class="nc">swiper-pagination-bullet-active</span><span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>其中,<code>::v-deep</code>是vue的样式穿透</p>
</li>
<li>
<p>效果可能和<code>!important</code>类似</p>
<blockquote>
<p>直接在 <code>&lt;style lang=&quot;scss&quot; scoped&gt; .... &lt;/style&gt;</code> 中编写的话只会影响当前组件内的样式，但如果去掉scoped话又会影响全局样式</p>
<p>如果你希望 scoped 样式中的一个选择器能够作用得“更深”</p>
<p>可以使用vue的样式穿透</p>
</blockquote>
</li>
</ul>
<hr>
<h1 id="step06插槽">Step06.插槽</h1>
<ul>
<li>
<p>在首页,有好几块区域都要用到一个相同的标题样式</p>
</li>
<li>
<p>就是标题,旁边有两个小点点</p>
</li>
<li>
<p>但是每次都写重复的样式,太乱了</p>
</li>
<li>
<p>所以这里就用到了插槽</p>
</li>
<li>
<p>创建一个组件<code>TitleSlot.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>
                <span class="nx">爆款推荐</span>
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
  
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;TitleSlot&#34;</span><span class="p">,</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">title</span><span class="p">{</span>
    <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
    <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>默认内容就是<code>爆款推荐</code></p>
</li>
<li>
<p>然后,哪个页面想用到它,直接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;circle&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">TitleSlot</span><span class="p">&gt;&lt;/</span><span class="nt">TitleSlot</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;circle&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用组件就好了</p>
</li>
<li>
<p>当然,如果你想使用自定义文本内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">TitleSlot</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>
          <span class="nx">新文字</span>  
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">TitleSlot</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>TitleSlot.vue</code>就会将这里面的全部内容(包括代码),插入到<code>TitleSlot.vue</code>中的<code>&lt;slot&gt;</code>位置,替换掉<code>&lt;slot&gt;</code>标签</p>
</li>
</ul>
<hr>
<h1 id="step07多个flex盒子文本溢出单行隐藏和多行隐藏">Step07.多个flex盒子,文本溢出单行隐藏和多行隐藏</h1>
<h2 id="单行">单行</h2>
<ul>
<li>
<p>1.文本要有一层标签，不能是裸文本</p>
</li>
<li>
<p>2.文本的标签的宽度不能为父元素的100%，大约90%多，因为要给省略号留出位置显示</p>
</li>
<li>
<p>3.文本的标签的父元素，必须要有宽度</p>
</li>
<li>
<p>最后，给文本的标签设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">white-space</span><span class="p">:</span><span class="nd">nowrap</span><span class="o">;</span>
<span class="nt">overflow</span><span class="p">:</span><span class="nd">hidden</span><span class="o">;</span>
<span class="nt">text-overflow</span><span class="p">:</span><span class="nd">ellipsis</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="多行">多行</h2>
<ul>
<li>
<p>设置原理等同于上面</p>
</li>
<li>
<p>不过css变了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">display</span><span class="o">:</span> <span class="nt">-webkit-box</span><span class="o">;</span>
<span class="nt">-webkit-box-orient</span><span class="o">:</span> <span class="nt">vertical</span><span class="o">;</span>
<span class="nt">-webkit-line-clamp</span><span class="o">:</span> <span class="nt">2</span><span class="o">;</span> <span class="o">//</span> <span class="nt">设置从第几行开始隐藏</span>
<span class="nt">overflow</span><span class="o">:</span> <span class="nt">hidden</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step08前台axios请求后台node服务器">Step08.前台axios请求后台node服务器</h1>
<h2 id="设置跨域">设置跨域</h2>
<ul>
<li>
<p>前面讲过,创建并启动一个express的server后台项目</p>
</li>
<li>
<p>先启动项目,然后在前台请求一下试试</p>
</li>
<li>
<p>因为后台是3000,前台是8080</p>
</li>
<li>
<p>所以要设置跨域</p>
</li>
<li>
<p>打开vue项目的<code>vue.config.js</code></p>
<p><code>vue.config.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@vue/cli-service&#39;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">defineConfig</span><span class="p">({</span>
    <span class="c1">// 代理
</span><span class="c1"></span>    <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">proxy</span><span class="o">:</span> <span class="p">{</span>
            <span class="s1">&#39;/api&#39;</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">target</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000&#34;</span><span class="p">,</span>
                <span class="nx">changeOrigin</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">pathRewrite</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s1">&#39;^/api&#39;</span><span class="o">:</span> <span class="s1">&#39;/api&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">transpileDependencies</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">lintOnSave</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// 取消更改重要代码后,eslint给项目标注的报错
</span><span class="c1"></span>    <span class="nx">configureWebpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 在
</span><span class="c1"></span>        <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">,</span> <span class="s1">&#39;.vue&#39;</span><span class="p">],</span>
            <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./src&#39;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>devServer</p>
</li>
<li>
<p>就可以将路由中</p>
</li>
<li>
<p>所有的以<code>/api</code>结尾的部分</p>
</li>
<li>
<p>替换为<code>target + pathRewrite里的json的键值对的值</code></p>
</li>
<li>
<p>替换之前,项目中只支持8080端口</p>
</li>
<li>
<p>但是当你设置过代理后</p>
</li>
<li>
<p>这里的替换不仅仅是字符的替换</p>
</li>
<li>
<p>而是vue内部,更改了请求方式,真正实现了跨域</p>
</li>
</ul>
<h2 id="编写服务器">编写服务器</h2>
<p>打开后台项目的<code>router/index.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="cm">/* GET home page. */</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Express&#39;</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/index_list/1/data/1&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
      <span class="nx">code</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span>
          <span class="nx">id</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
          <span class="nx">num</span><span class="o">:</span><span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>规则就是</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">router.get<span class="o">(</span>url, <span class="k">function</span><span class="o">(</span>req, res, next<span class="o">)</span> <span class="o">{</span>
    res.send<span class="o">({})</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>url:就是后台api接口</p>
<p>req:请求体</p>
<p>res:响应体</p>
<p>res.send参数是,被请求后响应的数据</p>
</blockquote>
</li>
<li>
<p>当然,router.get你可以写无数个,一个服务器肯定可以提供多个接口</p>
</li>
<li>
<p>前台请求测试一下</p>
</li>
<li>
<p>使用axios</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install axios -S
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>导入并使用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span>
  
<span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
  <span class="nx">getData</span><span class="p">(){</span>
    <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">(</span><span class="s2">&#34;/api/index_list/1/data/1&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>启动后台服务器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm start
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>启动前台服务器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm run serve
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>不出意外,请求后打印</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="err">code:0,</span>
  <span class="err">data:[</span>
    <span class="err">{</span>
      <span class="err">id:0,</span>
      <span class="err">num:1</span>
    <span class="p">}</span>
  <span class="err">]</span>
<span class="err">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step09子组件向父组件传值">Step09.子组件向父组件传值</h1>
<ul>
<li>
<p>子组件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
       <span class="p">&lt;</span><span class="nt">input</span> <span class="nt">@click</span><span class="s">=&#34;sendMsg&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;给父组件传递值&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
   
    <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="c1">//将msg传递给父组件
</span><span class="c1"></span>            <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;我是子组件的msg&#34;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
     <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
         <span class="nx">sendMsg</span><span class="p">(){</span>
             <span class="c1">//func: 是父组件指定的传数据绑定的函数，this.msg:子组件给父组件传递的数据
</span><span class="c1"></span>             <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
         <span class="p">}</span>
     <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>子组件通过**this.$emit()**的方式将值传递给父组件</p>
</li>
<li>
<p>**注意：**这里的func是父组件中绑定的函数名</p>
</li>
<li>
<p>父组件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">child</span> <span class="nt">@func</span><span class="s">=&#34;getMsgFormSon&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">child</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">child</span> <span class="nx">from</span> <span class="s1">&#39;./child.vue&#39;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">msgFormSon</span><span class="o">:</span> <span class="s2">&#34;this is msg&#34;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">components</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">child</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">getMsgFormSon</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">msgFormSon</span> <span class="o">=</span> <span class="nx">data</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">msgFormSon</span><span class="p">)</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step10es6的异步方法关键字-async和await">Step10.ES6的异步方法关键字-async和await</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">async</span> <span class="nx">func</span><span class="p">(){</span>
  <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">(</span><span class="s2">&#34;/api/home&#34;</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>async-await是es6的语法糖</li>
<li>用来代替复杂的promise异步代码</li>
<li>给函数标注async,就说明这个函数是异步的,不会阻塞func函数下面的代码的执行</li>
<li>await,必须写在async函数内部,用于接收返回promise类型对象(then)</li>
<li>就是,给函数加上async,它就等同于promise异步函数了</li>
<li>这样原本同步的方法,就变成了异步</li>
<li>但是内部可能有多个方法</li>
<li>每个方法都有返回值,就是promise的then方法</li>
<li>在async内部作用域,就必须同步了</li>
<li>所以给返回promise对象的方法,前面加上一个await</li>
<li>这样直到方法执行完返回promise对象之前,async中下面的代码都会被阻塞</li>
<li>不然都异步,不就乱了吗</li>
<li>目前用不到太多</li>
<li>await的返回值是promise对象的resolve参数</li>
<li><a href="https://blog.csdn.net/weixin_42614080/article/details/93332801?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=js%E7%9A%84async%E5%92%8Cawait&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-4-93332801.nonecase&amp;spm=1018.2226.3001.4187">详细文章</a></li>
</ul>
<hr>
<h1 id="step11objectfreeze方法">Step11.Object.freeze()方法</h1>
<ul>
<li>
<p>我们都知道const定义基本数据类型，这个值是不可以修改的。那么我们用const定义对象，可以修改对象吗？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c1">// a = 10  // TypeError: Assignment to constant variable.
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;张三&#39;</span>
<span class="p">}</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;李四&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {name: &#34;李四&#34;}
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>答案是肯定的。那么如果我们想定义一个不可被修改的对象，应该怎么办呢！那就要用到Object.freeze()了。它的作用是冻结一个对象，被冻结的对象有以下几个特性</p>
<ul>
<li>不能添加新属性</li>
<li>不能删除已有属性</li>
<li>不能修改已有属性的值</li>
<li>不能修改原型</li>
<li>不能修改已有属性的可枚举性、可配置性、可写性</li>
</ul>
</li>
</ul>
<h2 id="基本使用">基本使用</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;张三&#39;</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="nx">address</span><span class="o">:</span> <span class="s1">&#39;上海市&#39;</span>
<span class="p">}</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">.</span><span class="nx">habit</span> <span class="o">=</span> <span class="s1">&#39;运动&#39;</span>
 
<span class="c1">// 冻结对象
</span><span class="c1"></span><span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
 
<span class="c1">// 不能添加新属性
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">sex</span> <span class="o">=</span> <span class="s1">&#39;男&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {name: &#34;张三&#34;, age: 18, address: &#34;上海市&#34;}
</span><span class="c1"></span> 
<span class="c1">// 不能删除原有属性
</span><span class="c1"></span><span class="k">delete</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">age</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {name: &#34;张三&#34;, age: 18, address: &#34;上海市&#34;}
</span><span class="c1"></span> 
<span class="c1">// 不能修改已有属性的值
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;李四&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {name: &#34;张三&#34;, age: 18, address: &#34;上海市&#34;}
</span><span class="c1"></span> 
<span class="c1">// 不能修改原型
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="s1">&#39;随便什么值&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">)</span>  <span class="c1">// {habit: &#34;运动&#34;, constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, …}
</span><span class="c1"></span> 
<span class="c1">// 不能修改已有属性的可枚举性、可配置性、可写性
</span><span class="c1"></span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s1">&#39;address&#39;</span><span class="p">,{</span> <span class="c1">// TypeError: Cannot redefine property: address
</span><span class="c1"></span>    <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>这里要注意一点，Object.freeze()的返回值就是被冻结的对象，该对象完全等于传入的对象，所以我们一般不需要接收返回值。上面我们对对象进行了冻结，那么我们可以冻结数组吗？</li>
</ul>
<h2 id="冻结数组">冻结数组</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
<span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;新值&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>    <span class="c1">// [1, 2, 3, 4, 5]
</span></code></pre></td></tr></table>
</div>
</div><ul>
<li>其实很容易能想明白，数组本质也就是对象，只不过对象的key是下标，所以也可以冻结。如果我的对象里还有对象呢，那么冻结是否依然有效？</li>
</ul>
<h3 id="浅冻结">浅冻结</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;张三&#39;</span><span class="p">,</span>
    <span class="nx">info</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;李四&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {info: {a: 1, b: 2},name: &#34;张三&#34;}
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">66</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">info</span><span class="p">)</span>   <span class="c1">// {a: 66, b: 2}
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>可以看到对象中如果还有对象的时候，Object.freeze()失效了。Object.freeze()只支持浅冻结，下面我们封装一个深冻结函数，日后可直接使用</p>
</blockquote>
<h3 id="深冻结">深冻结</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;张三&#39;</span><span class="p">,</span>
    <span class="nx">info</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 获取所有属性
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">propNames</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
 
    <span class="c1">// 遍历
</span><span class="c1"></span>    <span class="nx">propNames</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">prop</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span>
        <span class="c1">// 如果某个属性的属性值是对象，则递归调用
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">prop</span> <span class="k">instanceof</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">prop</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
    <span class="c1">// 冻结自身
</span><span class="c1"></span>    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;李四&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>    <span class="c1">// {name: &#34;张三&#34;, info: {…}}
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">info</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">info</span><span class="p">)</span>   <span class="c1">// {a: 1, b: 2}
</span></code></pre></td></tr></table>
</div>
</div><h2 id="应用场景">应用场景</h2>
<ul>
<li>Object.freeze()可以提高性能</li>
<li>如果你有一个对象，里面的内容特别特别多，而且都是一些静态数据，你确保不会修改它们</li>
<li>那你其实可以用Object.freeze()冻结起来，这样可以让性能大幅度提升，提升的效果随着数据量的递增而递增。</li>
<li>一般什么时候用呢？对于纯展示的大数据，都可以使用Object.freeze提升性能。</li>
</ul>
<h3 id="vue中使用objectfreeze">Vue中使用Object.freeze</h3>
<ul>
<li>
<p>在vue项目中,data初始化 里面一般会有很多变量,后续如果不想使用它,可以使用Object.freeze()。这样可以避免vue初始化时候,做一些无用的操作,从而提高性能</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span><span class="p">{</span>
        <span class="nx">list</span><span class="o">:</span><span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">({</span><span class="s1">&#39;我不需要改变&#39;</span><span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="objectfreeze原理">Object.freeze()原理</h2>
<ul>
<li>模拟Object.freeze()原理主要用到两个关键方法，Object.definedProperty()、Object.seal()。</li>
<li>Object.definedProperty()方法可以定义对象的属性的特性。如可不可以删除、可不可以修改等等</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span><span class="c1">// 表示能否通过delete删除属性，能否修改属性的特性...
</span><span class="c1"></span>    <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span><span class="c1">// 表示是否可以枚举。直接在对象上定义的属性，基本默认true
</span><span class="c1"></span>    <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span><span class="c1">// 表示能否修改属性的值。直接在对象上定义的属性，基本默认true
</span><span class="c1"></span>    <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;xm&#39;</span><span class="c1">// 表示属性的值。访问属性时从这里读取，修改属性时，也保存在这里。
</span><span class="c1"></span><span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>通过上述配置，就能实现不能修改已有属性的值、不能修改已有属性的可枚举性、可配置性、可写性等等功能了</li>
<li>Object.seal()方法可以让对象不能被扩展、删除属性等等。用法：Object.seal(person)</li>
<li>通过Object.seal()方法可以实现不能删除，不能新增对象属性等等功能。通过这两个方法就可以实现一个简单的freeze方法了</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">myFreeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="k">instanceof</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">p</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">p</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span> <span class="p">{</span>
                <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span>
                <span class="p">});</span>
                <span class="nx">myFreeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">p</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step12不使用flexdiv内部文字纵横居中">Step12.不使用flex,div内部文字纵横居中</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width:60px;line-height:20px;text-align:center;&#34;</span><span class="p">&gt;</span>
  我是文字
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step13返回到上一页的路由">Step13.返回到上一页的路由</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step14同一个header通过某些点击事件切换中间那部分而不切换header">Step14.同一个header,通过某些点击事件切换中间那部分而不切换header</h1>
<ul>
<li>
<p>首先你这个页面中,不变的就正常写</p>
</li>
<li>
<p>通过点击事件不断切换的,就直接写一个<code>&lt;router-view&gt;&lt;/router-view&gt;</code></p>
</li>
<li>
<p>然后,就假如吧,你的页面默认是这样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="p">|</span>----------------------------------------------<span class="p">|</span>
<span class="p">|</span>                    header                    <span class="p">|</span>
<span class="p">|</span>----------------------------------------------<span class="p">|</span>
<span class="p">|</span>                                              <span class="p">|</span>
<span class="p">|</span>                                              <span class="p">|</span>
<span class="p">|</span>                     main                     <span class="p">|</span>
<span class="p">|</span>                                              <span class="p">|</span>
<span class="p">|</span>                                              <span class="p">|</span>
<span class="p">|</span>----------------------------------------------<span class="p">|</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>点击header中某些组件,main改变</p>
</li>
<li>
<p>但是header还是那个header</p>
</li>
<li>
<p>做法就是,将main部分的内容分开写到不同的组件中</p>
</li>
<li>
<p>然后在main部分直接写上<code>&lt;router-view&gt;&lt;/router-view&gt;</code></p>
</li>
<li>
<p>通过子路由的方式,来切换main部分的内容</p>
</li>
<li>
<p><code>&lt;router-view&gt;&lt;/router-view&gt;</code>会根据你当前页面路由的子路由,将对应子组件渲染到<code>&lt;router-view&gt;&lt;/router-view&gt;</code>位置</p>
</li>
<li>
<p>也就是说</p>
<p><code>主页面.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Header</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">@click</span><span class="s">=&#34;get01&#34;</span><span class="p">&gt;</span><span class="na">01</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">@click</span><span class="s">=&#34;get02&#34;</span><span class="p">&gt;</span><span class="na">02</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Header</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">router-view</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/router-view&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;主页面&#34;</span><span class="p">,</span>
    <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">get01</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">path</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s2">&#34;01&#34;</span><span class="p">});</span>
      <span class="p">},</span>
      <span class="nx">get02</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">path</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s2">&#34;02&#34;</span><span class="p">});</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>子页面01.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="mi">01</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>子页面02.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="mi">02</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>然后你主页面路由是这样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">children</span><span class="o">:</span><span class="p">[</span>
  <span class="p">{</span>
      <span class="nx">path</span><span class="o">:</span> <span class="s2">&#34;/01&#34;</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;01&#34;</span><span class="p">,</span>
      <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span>
          <span class="kr">import</span> <span class="p">(</span><span class="s2">&#34;xxxx/01.vue&#34;</span><span class="p">),</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s2">&#34;/02&#34;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;02&#34;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span>
        <span class="kr">import</span> <span class="p">(</span><span class="s2">&#34;xxxx/02.vue&#34;</span><span class="p">),</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这样,你点击01,main部分就是01</p>
</li>
<li>
<p>点击02,main部分就是02</p>
</li>
</ul>
<hr>
<h1 id="step15去掉li和input和a的默认样式">Step15.去掉li和input和a的默认样式</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">li</span> <span class="p">{</span>
    <span class="k">list-style</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span> <span class="p">{</span>
    <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">outline</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">background</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="p">:</span><span class="nd">focus</span> <span class="p">{</span>
    <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">link</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">visited</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">active</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">focus</span> <span class="p">{</span>
    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step16本地存储">Step16.本地存储</h1>
<ul>
<li>
<p>设置值到本地存储</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">value</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>根据key获取本地存储值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step17使用mint-ui构造弹出框删除搜索记录">Step17.使用mint-ui构造弹出框删除搜索记录</h1>
<ul>
<li>
<p><a href="https://mint-ui.github.io/#!/zh-cn">mint-ui官网</a></p>
</li>
<li>
<p>下载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install --save mint-ui
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>根据官方文档,构造一个双选弹出层</p>
<p><code>main.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">MintUI</span> <span class="nx">from</span> <span class="s1">&#39;mint-ui&#39;</span>
<span class="kr">import</span> <span class="s1">&#39;mint-ui/lib/style.css&#39;</span>
  
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">MintUI</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">MessageBox</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Notice&#39;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Are you sure?&#39;</span><span class="p">,</span>
  <span class="nx">showCancelButton</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>异步函数</p>
</li>
<li>
<p>官方文档返回一个promise对象</p>
</li>
<li>
<p>那就有then</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">MessageBox</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Notice&#39;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Are you sure?&#39;</span><span class="p">,</span>
  <span class="nx">showCancelButton</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step18二次封装axios">Step18.二次封装axios</h1>
<p><code>request.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">common</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// 默认参数 
</span><span class="c1"></span>        <span class="nx">method</span><span class="o">:</span> <span class="s2">&#34;GET&#34;</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="p">{},</span>
        <span class="nx">params</span><span class="o">:</span> <span class="p">{},</span>
    <span class="p">},</span>
    <span class="nx">$axios</span><span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
        <span class="c1">// 如果前端没有传参数,那就使用默认的
</span><span class="c1"></span>        <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">common</span><span class="p">.</span><span class="nx">method</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">common</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">params</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">common</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">axios</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="c1">// console.log(res);
</span><span class="c1"></span>            <span class="kd">let</span> <span class="nx">resData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 返回一个promise对象给前端,因为前端await的返回值是服务器promise的resolve参数
</span><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">resData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">reject</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">resData</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>前端就可以</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">http</span><span class="p">.</span><span class="nx">$axios</span><span class="p">({</span><span class="nx">url</span><span class="o">:</span><span class="nx">url</span><span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step19node操作mysql">Step19.node操作mysql</h1>
<ul>
<li>
<p>下载mysql库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install mysql -S
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>建立连接</p>
<p><code>sql.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">mysql</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mysql&#34;</span><span class="p">);</span>
  
<span class="c1">// 建立连接
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">connection</span> <span class="o">=</span> <span class="nx">mysql</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span>
    <span class="nx">host</span><span class="o">:</span> <span class="s2">&#34;主机地址&#34;</span><span class="p">,</span>
    <span class="nx">user</span><span class="o">:</span> <span class="s2">&#34;用户名&#34;</span><span class="p">,</span>
    <span class="nx">password</span><span class="o">:</span> <span class="s2">&#34;数据库密码&#34;</span><span class="p">,</span>
    <span class="nx">database</span><span class="o">:</span> <span class="s2">&#34;数据库名&#34;</span><span class="p">,</span>
<span class="p">});</span>
  
<span class="c1">// 暴露
</span><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">connection</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用</p>
<blockquote>
<p>比如说你的node服务器要查询数据表内容,并响应给前端请求</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/api/goods/shoplist&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;select * from goods_list&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">code</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="nx">results</span>
        <span class="p">});</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>报错</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">  code: <span class="s1">&#39;ER_NOT_SUPPORTED_AUTH_MODE&#39;</span>,
  errno: 1251,
  sqlMessage: <span class="s1">&#39;Client does not support authentication protocol requested by server; consider upgrading MySQL client&#39;</span>,
  sqlState: <span class="s1">&#39;08004&#39;</span>,
  fatal: <span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>原因</li>
</ul>
<blockquote>
<p>mysql8.0以上<a href="https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86&amp;spm=1001.2101.3001.7020">加密</a>方式，Node还不支持</p>
</blockquote>
<ul>
<li>
<p>解决方案</p>
<ul>
<li>
<p>1、在命令提示行中键入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">mysql</span> <span class="o">-</span><span class="nx">u</span> <span class="nx">root</span> <span class="o">-</span><span class="nx">p</span> <span class="nx">你的mysql密码</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>2、输入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">alter</span> <span class="nx">user</span> <span class="s1">&#39;root&#39;</span><span class="err">@</span><span class="s1">&#39;localhost&#39;</span> <span class="nx">identified</span> <span class="kd">with</span> <span class="nx">mysql_native_password</span> <span class="nx">by</span> <span class="s1">&#39;你的mysql密码&#39;</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>如果成功会显示</p>
<p>Query OK, 0 rows affected (0.04 sec)</p>
</blockquote>
</li>
<li>
<p>3、输入<code>flush privileges;</code></p>
<blockquote>
<p>如果成功会显示<code>Query OK, 0 rows affected (0.02 sec)</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h1 id="step20搜索商品的结果头部的综合-价格-销量排序切换结构设计">Step20.搜索商品的结果,头部的<code>综合</code> <code>价格</code> <code>销量</code>排序切换结构设计</h1>
<ul>
<li>
<p>搜索结果页,有个列表数据,存放的是头部的<code>综合</code> <code>价格</code> <code>销量</code>这三个bar</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">filterList</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">currentIndex</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;综合&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;id&#34;</span><span class="p">,</span>
        <span class="p">},{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;价格&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;price&#34;</span><span class="p">,</span>
        <span class="p">},{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;销量&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;num&#34;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>实现点击综合,就显示所有搜索结果;</p>
</li>
<li>
<p>点击价格,可以将所有商品按照价格上下排序</p>
</li>
<li>
<p>点击销量,同价格</p>
</li>
<li>
<p>给最外层li声明一个点击事件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">li</span> <span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&#34;(item,index) in filterList.data&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;changeFilter(index)&#34;</span><span class="o">&gt;</span>
  <span class="p">...</span>
<span class="o">&lt;</span><span class="err">/li&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">changeFilter</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>初始化页面,默认让currentIndex为0,代表<code>综合</code></p>
</li>
<li>
<p>点击<code>综合</code>,就让currentIndex变为0</p>
</li>
<li>
<p>点击<code>价格</code>,就让currentindex变成1</p>
</li>
<li>
<p>点击<code>销量</code>,就让currentindex变成2</p>
<p>&hellip;</p>
</li>
<li>
<p>然后写一个active,用于给点击的组件高亮</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="nc">.active</span><span class="p">{</span>
    <span class="nt">color</span><span class="nd">:</span> <span class="nt">red</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果currentIndex(当前点击的组件)等于这三个组件其中一个的索引index</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;(item,index) in filterList.data&#34; @click=&#34;changeFilter(index)&#34;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">div</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#39;filterList.currentIndex == index ? &#34;active upOrDown&#34; : &#34;upOrDown&#34;&#39;</span><span class="p">&gt;</span>
       <span class="p">{{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span>
   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
   <span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>那就给这个组件加上一个<code>active</code>类</p>
</li>
<li>
<p>使之高亮</p>
</li>
<li>
<p>现在实现了点击哪个组件哪个组件就高亮</p>
</li>
<li>
<p>那么还差<code>价格</code>和<code>销量</code></p>
</li>
<li>
<p>例如,点击价格的向上箭头,商品就降序排列</p>
</li>
<li>
<p>点击价格的向下箭头,商品就升序排列</p>
</li>
<li>
<p>注意到,三个组件每个都有一个<code>status</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">filterList</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">currentIndex</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;综合&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;id&#34;</span><span class="p">,</span>
        <span class="p">},{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;价格&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;price&#34;</span><span class="p">,</span>
        <span class="p">},{</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;销量&#34;</span><span class="p">,</span>
            <span class="nx">status</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nx">key</span><span class="o">:</span><span class="s2">&#34;num&#34;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>当你点击某个组件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">changeFilter</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span>
    <span class="c1">// console.log(index);
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
        <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
  
        <span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">v</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">i</span> <span class="o">!=</span> <span class="nx">index</span><span class="p">){</span>
                <span class="nx">v</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">});</span>
  
        <span class="nx">item</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  
        <span class="k">this</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>if(index != 0)</code>是因为<code>综合</code>没有上下箭头,而且默认就是<code>综合</code>,不需要像<code>价格</code>啥的点击一次就更换一次排序方式,重新做一次请求</p>
<p>先用变量将你点击的这个组件保存起来(这里引用类型运用的非常好),即使你下面做任何操作,我都能通过这个引用类型重新操作这个对象</p>
<p>然后遍历组件数组,将除了你点击的这个组件的所有组件的status都设置为0</p>
<p>然后使用刚才保存的变量,判断这个组件的status属性</p>
<p>如果是1就让他等于2,否则就让他等于1</p>
<p>组件的1代表升序(asc),2代表降序(desc)</p>
<p>最后重新发起请求</p>
<p><strong>也就是点击一次这个组件,就在升序和降序之间切换,然后重新发起一次请求,并将升序还是降序作为参数</strong></p>
</blockquote>
<ul>
<li>
<p>请求很简单</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">getData</span><span class="p">(){</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">$axios</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="nx">url</span><span class="o">:</span><span class="s2">&#34;/api/goods/shoplist&#34;</span><span class="p">,</span>
            <span class="nx">params</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">searchName</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span>
                <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">orderBy</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span>
        <span class="c1">// console.log(res);
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">resultList</span> <span class="o">=</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">computed</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">orderBy</span><span class="p">(){</span>
        <span class="kd">let</span> <span class="nx">currentClick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">filterList</span><span class="p">.</span><span class="nx">currentIndex</span><span class="p">];</span>
        <span class="kd">let</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">currentClick</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span> <span class="o">?</span> <span class="s2">&#34;asc&#34;</span> <span class="o">:</span> <span class="s2">&#34;desc&#34;</span><span class="p">;</span>
    
        <span class="c1">// console.log(currentClick);
</span><span class="c1"></span>            
        <span class="k">return</span> <span class="p">{</span>
            <span class="p">[</span><span class="nx">currentClick</span><span class="p">.</span><span class="nx">key</span><span class="p">]</span><span class="o">:</span><span class="nx">val</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>判断当前组件(你刚才点击的)的状态值(决定了是降序还是升序),1就是升序(asc),2就是降序(desc)</p>
<p>动态属性,将结果返回</p>
<p>组件都有个key属性,用来代表他们是按照什么来排序的</p>
<p>总的来说,如果你点击的对象是<code>价格</code></p>
<p>那么返回值就是</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&#34;price&#34;</span><span class="o">:</span><span class="nx">asc</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>或</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&#34;price&#34;</span><span class="o">:</span><span class="nx">desc</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<ul>
<li>然后请求函数将<code>搜索的内容</code>和<code>{按照什么进行排序:升序还是降序}</code>作为请求参数</li>
<li>请求服务器</li>
</ul>
</li>
<li>
<p>然后服务器将这些值取出,在数据库中查询,然后将结果返回</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/api/goods/shoplist&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// let searchName = req.query.searchName;
</span><span class="c1"></span>    <span class="c1">// console.log(searchName);
</span><span class="c1"></span>    
    <span class="kd">let</span> <span class="p">[</span><span class="nx">searchName</span><span class="p">,</span> <span class="nx">orderName</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">);</span>
    <span class="kd">let</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">order</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">searchName</span><span class="p">,</span> <span class="nx">orderName</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">order</span><span class="p">);</span>
    <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;select * from goods_list where name like &#34;%&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;%&#34; order by &#39;</span> <span class="o">+</span> <span class="nx">orderName</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">order</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">results</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">code</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="nx">results</span>
        <span class="p">});</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<h1 id="objectkeys">Object.keys()</h1>
<p><code>Object.keys()</code> 方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和正常循环遍历该对象时返回的顺序一致。</p>
<h1 id="objectvalues">Object.values()</h1>
<p>同Object.keys()</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>最后,箭头就根据自身组件的状态进行上下箭头的上下切换</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;filter&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;(item,index) in filterList.data&#34; @click=&#34;changeFilter(index)&#34;&gt;
</span><span class="s">        &lt;div :class=&#39;filterList.currentIndex == index ? &#34;active upOrDown&#34; : &#34;upOrDown&#34;&#39;&gt;
</span><span class="s">            {{item.name}}
</span><span class="s">        &lt;/div&gt;
</span><span class="s">        &lt;div class=&#34;upOrDown&#34; v-if=&#34;index != 0&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#39;item.status == 1 ? &#34;active iconfont icon-arrow-up&#34; : &#34;iconfont icon-arrow-up&#34;&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#39;item.status == 2 ? &#34;active iconfont icon-arrow-down&#34; : &#34;iconfont icon-arrow-down&#34;&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step21设计-左侧分类栏永远不动右侧指定类别的内容可以随意上下拖动的分类页面">Step21.设计-左侧分类栏永远不动,右侧指定类别的内容可以随意上下拖动的分类页面</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">_______________________________________________________
<span class="p">|</span>                <span class="p">|</span>                                     <span class="p">|</span>                 
<span class="p">|</span>    推荐         <span class="p">|</span>       x              x             <span class="p">|</span>                 
<span class="p">|</span>    绿茶         <span class="p">|</span>                               x    <span class="p">|</span>                 
<span class="p">|</span>    红茶         <span class="p">|</span>         x                           <span class="p">|</span>                 
<span class="p">|</span>    白茶         <span class="p">|</span>              x                 x    <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>                                     <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>           x                         <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>                    x      x         <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>        x                            <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>                                     <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>       x                             <span class="p">|</span>                 
<span class="p">|</span>                <span class="p">|</span>                   x                 <span class="p">|</span>                 
_______________________________________________________
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>左右不要使用flex布局让布局左右分布</p>
</li>
<li>
<p>直接就使用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">position</span><span class="p">:</span><span class="nd">fixed</span><span class="o">;</span>
<span class="nt">top</span><span class="p">:</span><span class="nd">xxx</span><span class="o">;</span>
<span class="nt">left</span><span class="p">:</span><span class="nd">0</span><span class="o">;</span>
<span class="nt">width</span><span class="p">:</span><span class="nd">xxx</span><span class="o">;</span>
<span class="nt">height</span><span class="p">:</span><span class="nd">100</span><span class="o">%;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>先将左侧写死</p>
</li>
<li>
<p>然后右侧</p>
</li>
<li>
<p>设置宽度,高度自己撑开</p>
</li>
<li>
<p>给个</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">margin-left</span><span class="p">:</span><span class="nd">xxx</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>这个尺寸是左侧的宽度</p>
</li>
<li>
<p>因为左侧写死了,层级已经发生改变了</p>
</li>
<li>
<p>最后,再给右侧加上Better-Scroll</p>
</li>
<li>
<p>Better-Scroll怎么使用,查看《去哪网》博客</p>
</li>
</ul>
<hr>
<h1 id="step22上面的页面点击左边右边自动滚动到指定位置">Step22.上面的页面,点击左边,右边自动滚动到指定位置</h1>
<h2 id="id锚点">id锚点</h2>
<ul>
<li>
<p>html的id锚点就是,你给一个元素设置id,然后给一个a标签设置这个id</p>
</li>
<li>
<p>点击这个a,页面就会自动滚动到这个元素的位置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;one&#34;</span><span class="p">&gt;</span>
  xxx
<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#one&#34;</span><span class="p">&gt;</span>yyy<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="使用scrollintoview">使用scrollIntoView</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">external</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">scrollIntoView</span><span class="p">({</span>
    <span class="nx">block</span><span class="o">:</span> <span class="s2">&#34;start&#34;</span><span class="p">,</span>
    <span class="nx">inline</span><span class="o">:</span> <span class="s2">&#34;nearest&#34;</span><span class="p">,</span>
    <span class="nx">behavior</span><span class="o">:</span> <span class="s2">&#34;smooth&#34;</span><span class="p">,</span>
    <span class="nx">alignTo</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="锚点滚动置顶会被顶部导航栏遮住的问题">锚点滚动置顶会被顶部导航栏遮住的问题</h2>
<ul>
<li>这两种方法都会滚动页面,并将你要跳转到的元素置于页面最顶部</li>
<li>但是这样,无论是移动端还是PC端口,都会有头部导航栏之类</li>
<li>他们一般都是position,所以基本上就会被遮住</li>
<li>如果给锚点元素设置margin-top,无用,因为你可以滚动的页面高度已经完全超过了<code>100vh</code></li>
<li>所以margin也会被算进页面整体height,margin也会被遮住</li>
<li>总之margin就没用</li>
<li>给锚点元素设置一个和头部导航栏一样高的padding-top</li>
<li>就完美解决</li>
</ul>
<hr>
<h1 id="step23详情页">Step23.详情页</h1>
<h2 id="头部和顶部都position中间使用了better-scroll无法滚动">头部和顶部都position,中间使用了better-scroll无法滚动</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;wrapper&#34;</span><span class="p">&gt;</span>
    <span class="p">...</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;Detail&#34;</span><span class="p">,</span>
    <span class="nx">data</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">Bscroll</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">mounted</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Bscroll</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bscroll</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">main</span><span class="p">,{</span>
            <span class="nx">probeType</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nx">click</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nx">bounce</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>给better-scroll最外层的元素设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">display</span><span class="o">:</span> <span class="nt">flex</span><span class="o">;</span>
<span class="nt">flex-direction</span><span class="o">:</span> <span class="nt">column</span><span class="o">;</span>
<span class="nt">width</span><span class="o">:</span> <span class="nt">100vw</span><span class="o">;</span>
<span class="nt">height</span><span class="o">:</span> <span class="nt">100vh</span><span class="o">;</span>
<span class="nt">overflow</span><span class="o">:</span> <span class="nt">hidden</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>给第二层的那个元素设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">flex</span><span class="o">:</span> <span class="nt">1</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>意思就是让最外层元素只显示100vw和100vh</p>
</li>
<li>
<p>第二层flex:1自由发挥,超出第一层规定尺寸的会被隐藏,但可以拖动</p>
</li>
<li>
<p><strong>这个方法可以用来制作小窗口拖动</strong></p>
</li>
<li>
<p>例如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="o">&lt;!</span><span class="nt">DOCTYPE</span> <span class="nt">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">html</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&#34;en&#34;</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="nt">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">meta</span> <span class="nt">charset</span><span class="o">=</span><span class="s2">&#34;UTF-8&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">meta</span> <span class="nt">http-equiv</span><span class="o">=</span><span class="s2">&#34;X-UA-Compatible&#34;</span> <span class="nt">content</span><span class="o">=</span><span class="s2">&#34;IE=edge&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">meta</span> <span class="nt">name</span><span class="o">=</span><span class="s2">&#34;viewport&#34;</span> <span class="nt">content</span><span class="o">=</span><span class="s2">&#34;width=device-width, initial-scale=1.0&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
        <span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
            <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
            <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
            <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
            <span class="k">overflow</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
        <span class="p">}</span>
          
        <span class="p">#</span><span class="nn">wrapper</span> <span class="p">{</span>
            <span class="k">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">title</span><span class="o">&gt;</span><span class="nt">Document</span><span class="o">&lt;/</span><span class="nt">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">head</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="nt">body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&#34;container&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nt">div</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&#34;wrapper&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
  
    <span class="o">&lt;</span><span class="nt">script</span><span class="o">&gt;</span>
        <span class="nt">let</span> <span class="nt">wrapper</span> <span class="o">=</span> <span class="nt">document</span><span class="p">.</span><span class="nc">getElementById</span><span class="o">(</span><span class="s2">&#34;wrapper&#34;</span><span class="o">);</span>
        <span class="nt">for</span> <span class="o">(</span><span class="nt">var</span> <span class="nt">i</span> <span class="o">=</span> <span class="nt">0</span><span class="o">;</span> <span class="nt">i</span> <span class="o">&lt;</span> <span class="nt">1000</span><span class="o">;</span> <span class="nt">i</span><span class="o">++)</span> <span class="p">{</span>
            <span class="err">wrapper.innerHTML</span> <span class="err">+=</span> <span class="err">&#34;xxxxxxxxxx&lt;br&gt;&#34;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="o">&lt;/</span><span class="nt">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">html</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>不过这里overflow得auto,因为hidden无法拖动,溢出部分直接给从页面上去掉了</p>
</li>
<li>
<p>这个项目使用<code>overflow:hidden;</code>可以拖动是因为有better-scroll</p>
</li>
</ul>
<hr>
<h2 id="拖动页面顶部商品详情-商品评价导航栏渐隐渐现的效果">拖动页面,顶部<code>商品详情 商品评价</code>导航栏渐隐渐现的效果</h2>
<ul>
<li>
<p>先给这个顶部元素设置一个样式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">Bscroll</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">headerStyle</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">opacity</span><span class="o">:</span><span class="mi">0</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>默认透明度为0,也就是不显示</p>
</li>
<li>
<p>实时监听better-scroll滚动事件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">mounted</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Bscroll</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bscroll</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">main</span><span class="p">,{</span>
        <span class="nx">probeType</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
        <span class="nx">click</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="nx">bounce</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="p">});</span>
  
    <span class="k">this</span><span class="p">.</span><span class="nx">Bscroll</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,(</span><span class="nx">pos</span><span class="p">)=&gt;{</span>
        <span class="kd">let</span> <span class="nx">posY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">headerStyle</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">posY</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>回调函数有个参数,pos是每一秒拖动的坐标</p>
</li>
<li>
<p>在这里,头部元素高度为50px</p>
</li>
<li>
<p>所以就用滚动的高度除以一个合适的值,就可以在滚动的同时,不断控制头部元素的透明度</p>
</li>
<li>
<p><strong>越往上拖,透明度越高</strong></p>
</li>
<li>
<p><strong>越往下拖,透明度越低</strong></p>
</li>
</ul>
<h3 id="betterscroll的可选参数">BetterScroll的可选参数</h3>
<ul>
<li>
<p>probeType</p>
<blockquote>
<p>probeType作用：决定是否派发 scroll 事件，probeType 为 0，在任何时候都不派发 scroll 事件，
probeType 为 2，仅仅当手指按在滚动区域上，每隔 momentumLimitTime 毫秒派发一次 scroll 事件，
probeType 为 3，任何时候都派发 scroll 事件，包括调用 scrollTo 或者触发 momentum 滚动动画</p>
</blockquote>
</li>
<li>
<p>click</p>
<blockquote>
<p>BetterScroll 默认会阻止浏览器的原生 click 事件。当设置为 true，BetterScroll 会派发一个 click 事件</p>
</blockquote>
</li>
<li>
<p>pullUpLoad</p>
<blockquote>
<p>上拉加载更多, 监听是否已经滚动到底部
默认为false, 当设置为true或者是一个object的时候, 开启上拉加载</p>
</blockquote>
</li>
</ul>
<h3 id="实时监听betterscroll滚动的位置">实时监听BetterScroll滚动的位置</h3>
<ul>
<li>
<p>调用bscroll的on方法监听滚动事件</p>
<blockquote>
<p>on方法需要传递两个参数, 第一个是事件类型, 第一个参数是一个函数, 函数本身有一个参数 position, position里面存的是 x和y轴的坐标值</p>
</blockquote>
</li>
</ul>
<h3 id="betterscroll可监听的事件">BetterScroll可监听的事件</h3>
<blockquote>
<p>scroll : 滚动事件
pullingUp : 当距离滚动到底部小于 threshold 值时，触发一次 pullingUp 事件</p>
</blockquote>
<hr>
<h1 id="step24返回到上一页">Step24.返回到上一页</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step25登录逻辑">Step25.登录逻辑</h1>
<h2 id="密码登录">密码登录</h2>
<h3 id="前端判断">前端判断</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span><span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// 用户名输入
</span><span class="c1"></span>        <span class="nx">password</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// 密码输入
</span><span class="c1"></span>        <span class="nx">rules</span><span class="o">:</span><span class="p">{</span> <span class="c1">// 用户名和密码正则规范
</span><span class="c1"></span>            <span class="nx">username</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">rule</span><span class="o">:</span><span class="sr">/^1\d{10}$/</span><span class="p">,</span>
                <span class="nx">msg</span><span class="o">:</span><span class="s2">&#34;手机号不能为空,并且是11位数字&#34;</span>
            <span class="p">},</span>
            <span class="nx">password</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">rule</span><span class="o">:</span><span class="sr">/^\w{6,12}$/</span><span class="p">,</span>
                <span class="nx">msg</span><span class="o">:</span><span class="s2">&#34;密码不能为空,并且是6-12位&#34;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="点击按钮登录">点击按钮登录</h4>
<h5 id="前端判断输入是否合法">前端判断输入是否合法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;loginSendBox&#34;</span> <span class="nt">@click</span><span class="s">=&#34;login&#34;</span><span class="p">&gt;</span><span class="na">登录</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Toast</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;mint-ui&#39;</span><span class="p">;</span>

<span class="nx">login</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)){</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)){</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">},</span>
<span class="nx">validate</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nx">bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">rule</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">])){</span> <span class="c1">// 如果输入的不匹配,将指定字段的错误信息弹出框显示出来
</span><span class="c1"></span>        <span class="nx">Toast</span><span class="p">({</span>
            <span class="nx">message</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">msg</span><span class="p">,</span>
            <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
            <span class="nx">duration</span><span class="o">:</span> <span class="mi">5000</span>
        <span class="p">});</span>
        <span class="nx">bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span> <span class="c1">// 返回布尔值,决定了登录方法中是否继续往下执行
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="将数据发送给后端处理">将数据发送给后端处理</h5>
<p><code>组件</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">goCode</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">&#34;login-code&#34;</span>
        <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">login</span><span class="p">(){</span>
        <span class="c1">// 用户名合法判断
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="s1">&#39;usertel&#39;</span><span class="p">)){</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// 密码合法判断
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)){</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// 将输入数据发送给后端,因为是发送数据而不是获取,所以得post
</span><span class="c1"></span>        <span class="nx">http</span><span class="p">.</span><span class="nx">$axios</span><span class="p">({</span>
            <span class="nx">url</span><span class="o">:</span><span class="s2">&#34;/api/login/password&#34;</span><span class="p">,</span>
            <span class="nx">method</span><span class="o">:</span><span class="s2">&#34;POST&#34;</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">usertel</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">usertel</span><span class="p">,</span>
                <span class="nx">password</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span>
            <span class="nx">Toast</span><span class="p">({</span> <span class="c1">// 将后端返回的数据显示
</span><span class="c1"></span>                <span class="nx">message</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
                <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
                <span class="nx">duration</span><span class="o">:</span> <span class="mi">5000</span>
            <span class="p">});</span>
        <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">validate</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
        <span class="kd">let</span> <span class="nx">bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">rule</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">])){</span> <span class="c1">// 如果输入的不匹配,将指定字段的错误信息弹出框显示出来
</span><span class="c1"></span>            <span class="nx">Toast</span><span class="p">({</span>
                <span class="nx">message</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">msg</span><span class="p">,</span>
                <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
                <span class="nx">duration</span><span class="o">:</span> <span class="mi">5000</span>
            <span class="p">});</span>
            <span class="nx">bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span> <span class="c1">// 返回布尔值,决定了登录方法中是否继续往下执行
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>判断逻辑是</p>
</li>
<li>
<p>先查询手机号</p>
<ul>
<li>如果手机号存在,那就继续查找手机号和密码
<ul>
<li>如果手机号和密码全部匹配,那就返回<code>成功登录</code></li>
<li>如果密码错误,那就返回```密码错误``</li>
</ul>
</li>
<li>如果不存在,直接返回错误信息<code>用户不存在</code></li>
</ul>
</li>
<li>
<p>首先写一个用来查询手机号和密码的js模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">queryUserTel</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;select * from user where usertel=&#34;&#39;</span> <span class="o">+</span> <span class="nx">option</span><span class="p">.</span><span class="nx">usertel</span> <span class="o">+</span> <span class="s1">&#39;&#34;&#39;</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">queryPassword</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;select * from user where usertel=&#34;&#39;</span> <span class="o">+</span> <span class="nx">option</span><span class="p">.</span><span class="nx">usertel</span> <span class="o">+</span> <span class="s1">&#39;&#34; and password=&#34;&#39;</span> <span class="o">+</span> <span class="nx">option</span><span class="p">.</span><span class="nx">password</span> <span class="o">+</span> <span class="s1">&#39;&#34;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
  
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>数据库设计</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="k">user</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="kt">int</span> <span class="k">NOT</span> <span class="no">NULL</span> <span class="kp">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="o">`</span><span class="n">usertel</span><span class="o">`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">password</span><span class="o">`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">imgUrl</span><span class="o">`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">nickName</span><span class="o">`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">token</span><span class="o">`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="kp">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">3</span> <span class="k">DEFAULT</span> <span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_0900_ai_ci</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>后台接口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;/api/login/password&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">usertel</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">usertel</span><span class="p">,</span> <span class="c1">// req.body是post请求的参数
</span><span class="c1"></span>        <span class="nx">password</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
    <span class="p">};</span>
  
    <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">queryUserTel</span><span class="p">(</span><span class="nx">params</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 手机号对
</span><span class="c1"></span>            <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">queryPassword</span><span class="p">(</span><span class="nx">params</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 手机号和密码都正确
</span><span class="c1"></span>                    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                        <span class="nx">code</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
                        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
                            <span class="nx">success</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                            <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;登录成功&#34;</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">})</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// 手机号对,密码不正确
</span><span class="c1"></span>                    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                        <span class="nx">code</span><span class="o">:</span> <span class="mi">302</span><span class="p">,</span>
                        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
                            <span class="nx">success</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                            <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;密码不正确&#34;</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">})</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// 就没这个手机号
</span><span class="c1"></span>            <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">code</span><span class="o">:</span> <span class="mi">301</span><span class="p">,</span>
                <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">success</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;用户不存在&#34;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="验证码登录">验证码登录</h2>
<h3 id="获取短信验证码按钮计时效果">获取短信验证码按钮计时效果</h3>
<ul>
<li>
<p>给获取短信验证码的按钮设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">button</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;getCode&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;getCode&#34;</span> <span class="o">:</span><span class="nx">disabled</span><span class="o">=</span><span class="s2">&#34;orClick&#34;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">sendCode</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/button&gt; &lt;!-- disabled属性设置元素是否可点击,disabled本身就是不行的意思,如果值为true,则不可点击 --&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>so,还缺几个变量</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span><span class="p">{</span>
        <span class="nx">usertel</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// 用户名输入
</span><span class="c1"></span>        <span class="nx">password</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// 密码输入
</span><span class="c1"></span>        <span class="nx">rules</span><span class="o">:</span><span class="p">{</span> <span class="c1">// 用户名和密码正则规范
</span><span class="c1"></span>            <span class="nx">usertel</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">rule</span><span class="o">:</span><span class="sr">/^1\d{10}$/</span><span class="p">,</span>
                <span class="nx">msg</span><span class="o">:</span><span class="s2">&#34;手机号不能为空,并且是11位数字&#34;</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="nx">sendCode</span><span class="o">:</span><span class="s2">&#34;发送验证码&#34;</span><span class="p">,</span> <span class="c1">// 获取验证码按钮的文字
</span><span class="c1"></span>        <span class="nx">orClick</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span> <span class="c1">// 初始化可点击
</span><span class="c1"></span>        <span class="nx">timer</span><span class="o">:</span><span class="mi">60</span><span class="p">,</span> <span class="c1">// 计时数据   
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>当点击<code>获取验证码按钮</code>,触发onClick方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">getCode</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="s1">&#39;usertel&#39;</span><span class="p">)){</span> <span class="c1">// 先判断输入的手机号是否合法,否则不会向下执行
</span><span class="c1"></span>        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="k">this</span><span class="p">.</span><span class="nx">orClick</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// 当点击按钮后,立马设置按钮为不可点击
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">clock</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()=&gt;{</span> <span class="c1">// 弄一个计时器,动态调整按钮的文字变为秒计时
</span><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">sendCode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&#34;秒后重发&#34;</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="o">--</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">1000</span><span class="p">);</span>
  
    <span class="nx">setTimeout</span><span class="p">(()=&gt;{</span> <span class="c1">// 60秒后停止按钮计时
</span><span class="c1"></span>        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">clock</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">sendCode</span> <span class="o">=</span> <span class="s2">&#34;发送验证码&#34;</span><span class="p">;</span> <span class="c1">// 将文字重置为初始内容
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span> <span class="c1">// 同上
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">orClick</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// 按钮可点击
</span><span class="c1"></span>    <span class="p">},</span><span class="mi">60000</span><span class="p">);</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="发送邮箱验证码">发送邮箱验证码</h2>
<ul>
<li>
<p>下载包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">npm install nodemailer -s-d
npm install nodemailer-smtp-transport -s-d
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>打开qq邮箱-&gt;设置-&gt;<code>POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">开启服务：
  POP3/SMTP服务 <span class="o">(</span>如何使用 Foxmail 等软件收发邮件？<span class="o">)</span>           已开启 <span class="p">|</span>  关闭
  IMAP/SMTP服务 <span class="o">(</span>什么是 IMAP，它又是如何设置？<span class="o">)</span>               已开启 <span class="p">|</span>  关闭
  Exchange服务 <span class="o">(</span>什么是Exchange，它又是如何设置？<span class="o">)</span>             已关闭 <span class="p">|</span>  开启
  CardDAV/CalDAV服务 <span class="o">(</span>什么是CardDAV/CalDAV，它又是如何设置？<span class="o">)</span> 已关闭 <span class="p">|</span>  开启
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>开启前两个,后面两个不要开启</p>
</li>
<li>
<p>然后生成授权码,并填写到<code>transporter.auth.pass</code>下</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">nodemailer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;nodemailer&#34;</span><span class="p">);</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">testAccount</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">nodemailer</span><span class="p">.</span><span class="nx">createTestAccount</span><span class="p">();</span>

    <span class="c1">// 使用默认的 SMTP 传输创建可重用的传输器对象
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">transporter</span> <span class="o">=</span> <span class="nx">nodemailer</span><span class="p">.</span><span class="nx">createTransport</span><span class="p">({</span>
        <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;smtp.qq.com&#39;</span><span class="p">,</span> <span class="c1">//QQ邮箱的 smtp 服务器地址
</span><span class="c1"></span>        <span class="nx">secure</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//使用 SSL 协议
</span><span class="c1"></span>        <span class="nx">secureConnection</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">//是否使用对 https 协议的安全连接
</span><span class="c1"></span>        <span class="nx">port</span><span class="o">:</span> <span class="mi">587</span><span class="p">,</span>
        <span class="nx">secure</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">auth</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;xxx@qq.com&#39;</span><span class="p">,</span> <span class="c1">//开启 smtp 服务的发件人邮箱，用于发送邮件给其他人
</span><span class="c1"></span>            <span class="nx">pass</span><span class="o">:</span> <span class="s1">&#39;xxx&#39;</span> <span class="c1">//SMTP 服务授权码
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">//使用定义的传输对象发送邮件
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">transporter</span><span class="p">.</span><span class="nx">sendMail</span><span class="p">({</span>
        <span class="nx">from</span><span class="o">:</span> <span class="s1">&#39;xxx@qq.com&#39;</span><span class="p">,</span> <span class="c1">// 发件地址
</span><span class="c1"></span>        <span class="nx">to</span><span class="o">:</span> <span class="s2">&#34;xxx@163.com&#34;</span><span class="p">,</span> <span class="c1">// 收件人
</span><span class="c1"></span>        <span class="nx">subject</span><span class="o">:</span> <span class="s2">&#34;验证码&#34;</span><span class="p">,</span> <span class="c1">// 主题
</span><span class="c1"></span>        <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;Hello world?&#34;</span><span class="p">,</span> <span class="c1">// 标题
</span><span class="c1"></span>        <span class="nx">html</span><span class="o">:</span> <span class="s2">&#34;&lt;b&gt;Hello world?&lt;/b&gt;&#34;</span><span class="p">,</span> <span class="c1">// 内容
</span><span class="c1"></span>    <span class="p">});</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;发送成功: %s&#34;</span><span class="p">,</span> <span class="nx">info</span><span class="p">.</span><span class="nx">messageId</span><span class="p">);</span>
    <span class="c1">// 发送成功: &lt;b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com&gt;
</span><span class="c1"></span>
    <span class="c1">// 预览仅在通过 Ethereal 帐户发送时可用
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;预览地址: %s&#34;</span><span class="p">,</span> <span class="nx">nodemailer</span><span class="p">.</span><span class="nx">getTestMessageUrl</span><span class="p">(</span><span class="nx">info</span><span class="p">));</span>
    <span class="c1">// 预览地址: https://ethereal.email/message/WaQKMgKddxQDoou...
</span><span class="c1"></span><span class="p">}</span>

<span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>运行代码</li>
</ul>
<hr>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Zhang's Blog</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2022-05-21
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/vue/">vue</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">前端面试笔记</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/nodejs/">
            <span class="next-text nav-default">NodeJs</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://www.linkedin.com/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://www.google.com/" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://getpocket.com/" class="iconfont icon-pocket" title="pocket"></a>
      <a href="https://www.tumblr.com/" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="https://www.instagram.com/" class="iconfont icon-instagram" title="instagram"></a>
      <a href="https://about.gitlab.com/" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="https://www.bilibili.com/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://golang.org/">GoLang</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Author - 
    <a class="theme-link" href="https://space.bilibili.com/628950169/">Mr'zhang</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Zhang's Blog</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>








</body>
</html>
