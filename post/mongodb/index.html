<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MongoDB - Zhang&#39;s Blog的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Zhang&#39;s Blog" /><meta name="description" content="Step1.安装MongoDB以及卸载 安装 Ubuntu 1 sudo apt-get install mongodb CentOS 先允许vim /etc/yum.repos.d/mongodb-org-4.0.repo 创建一个文件里面的内容为 1 2 3 4 5 6 [mongodb-org-4.0] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc 运行 sudo yum install -y mongodb-org 进行安" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.67.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/mongodb/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="MongoDB" />
<meta property="og:description" content="Step1.安装MongoDB以及卸载 安装 Ubuntu 1 sudo apt-get install mongodb CentOS 先允许vim /etc/yum.repos.d/mongodb-org-4.0.repo 创建一个文件里面的内容为 1 2 3 4 5 6 [mongodb-org-4.0] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc 运行 sudo yum install -y mongodb-org 进行安" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/mongodb/" />
<meta property="article:published_time" content="2022-01-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-10T00:00:00+00:00" />
<meta itemprop="name" content="MongoDB">
<meta itemprop="description" content="Step1.安装MongoDB以及卸载 安装 Ubuntu 1 sudo apt-get install mongodb CentOS 先允许vim /etc/yum.repos.d/mongodb-org-4.0.repo 创建一个文件里面的内容为 1 2 3 4 5 6 [mongodb-org-4.0] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc 运行 sudo yum install -y mongodb-org 进行安">
<meta itemprop="datePublished" content="2022-01-10T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2022-01-10T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="17157">



<meta itemprop="keywords" content="DataBase," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MongoDB"/>
<meta name="twitter:description" content="Step1.安装MongoDB以及卸载 安装 Ubuntu 1 sudo apt-get install mongodb CentOS 先允许vim /etc/yum.repos.d/mongodb-org-4.0.repo 创建一个文件里面的内容为 1 2 3 4 5 6 [mongodb-org-4.0] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc 运行 sudo yum install -y mongodb-org 进行安"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Zhang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/home/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">MyBlog</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Zhang&#39;s Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/home/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">MyBlog</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">MongoDB</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-10 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#step1安装mongodb以及卸载">Step1.安装MongoDB以及卸载</a>
      <ul>
        <li><a href="#安装">安装</a>
          <ul>
            <li><a href="#ubuntu">Ubuntu</a></li>
            <li><a href="#centos">CentOS</a></li>
            <li><a href="#macos">MACOS</a></li>
          </ul>
        </li>
        <li><a href="#卸载">卸载</a></li>
      </ul>
    </li>
    <li><a href="#step2mongodb的基本操作">Step2.MongoDB的基本操作</a></li>
    <li><a href="#step3添加数据">Step3.添加数据</a></li>
    <li><a href="#step4查找数据">Step4.查找数据</a></li>
    <li><a href="#step5更新数据">Step5.更新数据</a></li>
    <li><a href="#step6删除数据">Step6.删除数据</a></li>
    <li><a href="#step7小练习1">Step7.小练习1</a>
      <ul>
        <li><a href="#使用replaceone替换一个数据">使用replaceOne替换一个数据</a></li>
        <li><a href="#向一个数据中插入一个复杂字段">向一个数据中插入一个复杂字段</a></li>
        <li><a href="#向集合中插入20000条数据">向集合中插入20000条数据</a></li>
        <li><a href="#大于小于等于查询以及分页">大于、小于等于查询以及分页</a>
          <ul>
            <li><a href="#范围查询">范围查询</a></li>
            <li><a href="#分页查询">分页查询</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#step8小练习2">Step8.小练习2</a>
      <ul>
        <li><a href="#一对一">一对一</a></li>
        <li><a href="#一对多">一对多</a></li>
        <li><a href="#多对多">多对多</a></li>
      </ul>
    </li>
    <li><a href="#step9小练习3">Step9.小练习3</a>
      <ul>
        <li><a href="#将json文件导入到mongodb中">将JSON文件导入到MongoDB中</a></li>
        <li><a href="#使用of进行多条件查询">使用of进行多条件查询</a></li>
        <li><a href="#将导入的员工json和部门json进行多对多映射">将导入的员工json和部门json进行多对多映射</a></li>
        <li><a href="#批量更新数据">批量更新数据</a></li>
      </ul>
    </li>
    <li><a href="#step10sort和投影">Step10.sort和投影</a>
      <ul>
        <li><a href="#sort">sort</a></li>
        <li><a href="#投影">投影</a></li>
      </ul>
    </li>
    <li><a href="#step11mongoose">Step11.Mongoose</a>
      <ul>
        <li><a href="#ubuntu安装mongodb以及配置">Ubuntu安装MongoDB以及配置</a></li>
        <li><a href="#mongoose环境的配置">Mongoose环境的配置</a>
          <ul>
            <li><a href="#安装npm和mongoose">安装npm和Mongoose</a></li>
            <li><a href="#mongoose的基本操作">Mongoose的基本操作</a></li>
          </ul>
        </li>
        <li><a href="#schema和model">Schema和Model</a></li>
        <li><a href="#model的方法">Model的方法</a></li>
        <li><a href="#mongoose模块化">Mongoose模块化</a></li>
      </ul>
    </li>
    <li><a href="#step12ubuntu下mongodb设置密码">Step12.Ubuntu下MongoDB设置密码</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="step1安装mongodb以及卸载">Step1.安装MongoDB以及卸载</h1>
<h2 id="安装">安装</h2>
<h3 id="ubuntu">Ubuntu</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo apt-get install mongodb
</code></pre></td></tr></table>
</div>
</div><h3 id="centos">CentOS</h3>
<ul>
<li>
<p>先允许<code>vim /etc/yum.repos.d/mongodb-org-4.0.repo</code> 创建一个文件里面的内容为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>mongodb-org-4.0<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>MongoDB Repository
<span class="nv">baseurl</span><span class="o">=</span>https://repo.mongodb.org/yum/redhat/<span class="nv">$releasever</span>/mongodb-org/4.0/x86_64/
<span class="nv">gpgcheck</span><span class="o">=</span>1
<span class="nv">enabled</span><span class="o">=</span>1
<span class="nv">gpgkey</span><span class="o">=</span>https://www.mongodb.org/static/pgp/server-4.0.asc
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>运行 <code>sudo yum install -y mongodb-org</code> 进行安装</p>
</li>
<li>
<p>运行<code>systemctl status mongod.service</code>查看mongodb服务状态</p>
</li>
<li>
<p>启动mongo</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mongo
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>可能会报错</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">2021-11-23T14:32:18.605+0800 E QUERY    <span class="o">[</span>js<span class="o">]</span> Error: couldn<span class="err">&#39;</span>t connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 :: caused by :: Connection refused :
connect@src/mongo/shell/mongo.js:356:17
@<span class="o">(</span>connect<span class="o">)</span>:2:6
exception: connect failed
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>连接拒绝,一看就是防火墙端口问题</p>
</blockquote>
</li>
<li>
<p>进服务器防火墙,打开<code>27017</code>端口就好了</p>
</li>
<li>
<p>测试</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mongo<span class="p">;</span>
show dbs<span class="p">;</span>
use zhangDB
db.collection.insert<span class="o">({</span><span class="s1">&#39;username&#39;</span>:<span class="s1">&#39;zhangy&#39;</span>,<span class="s1">&#39;password&#39;</span>:<span class="s1">&#39;123456&#39;</span><span class="o">})</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h3 id="macos">MACOS</h3>
<ul>
<li>使用 curl 命令来下载安装</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 进入 /usr/local</span>
<span class="nb">cd</span> /usr/local

<span class="c1"># 下载</span>
sudo curl -O https://fastdl.mongodb.org/osx/mongodb-osx-ssl-x86_64-4.0.9.tgz

<span class="c1"># 解压</span>
sudo tar -zxvf mongodb-osx-ssl-x86_64-4.0.9.tgz

<span class="c1"># 重命名为 mongodb 目录</span>

sudo mv mongodb-osx-x86_64-4.0.9/ mongodb
</code></pre></td></tr></table>
</div>
</div><ul>
<li>安装完成后，我们可以把 MongoDB 的二进制命令文件目录（安装目录/bin）添加到 PATH 路径中</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/mongodb/bin:<span class="nv">$PATH</span>
</code></pre></td></tr></table>
</div>
</div><p>创建日志及数据存放的目录：</p>
<ul>
<li>
<p>数据存放路径：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo mkdir -p /usr/local/var/mongodb
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>日志文件路径：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo mkdir -p /usr/local/var/log/mongodb
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>接下来要确保当前用户对以上两个目录有读写的权限</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo chown runoob /usr/local/var/mongodb
sudo chown runoob /usr/local/var/log/mongodb
</code></pre></td></tr></table>
</div>
</div><p>以上 <strong>runoob</strong> 是我电脑上对用户，你这边需要根据你当前对用户名来修改。</p>
<p>接下来我们使用以下命令在后台启动 mongodb：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>&ndash;dbpath</strong> 设置数据存放目录</li>
<li><strong>&ndash;logpath</strong> 设置日志存放目录</li>
<li><strong>&ndash;fork</strong> 在后台运行</li>
</ul>
<h2 id="卸载">卸载</h2>
<ul>
<li>停止服务</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">service mongod stop
</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除安装的包</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yum erase <span class="k">$(</span>rpm -qa <span class="p">|</span> grep mongodb-org<span class="k">)</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除数据及日志</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">rm -r /var/log/mongodb
rm -r /var/lib/mongo     
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step2mongodb的基本操作">Step2.MongoDB的基本操作</h1>
<ul>
<li>
<p>MongoDB的名词</p>
<blockquote>
<p>数据库(database:主机上整个大的MongoDB中可以有很多个数据库,数据库是最大的单位</p>
<p>集合(collection):一个数据库中可以有多个集合,这就和数据库表是一样的</p>
<p>文档(doc):插入的元素</p>
</blockquote>
</li>
<li>
<p>查看当前有哪些数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">show dbs
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">show databases
</code></pre></td></tr></table>
</div>
</div><p><code>结果</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">gdp       0.000GB
<span class="nb">local</span>     0.000GB
race_day  0.000GB
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>MySQL需要有<code>;</code>结尾,而show dbs不用</p>
</blockquote>
<blockquote>
<p>在MongoDB中,数据库和集合都不需要手动创建</p>
<p>当创建文档时,如果文档所在的数据库和集合不存在MongoDB会自动创建</p>
</blockquote>
</li>
<li>
<p>显示数据库中所有的集合</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">show collections
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>所以</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">use zhangyuhangDb
db.collection1.insert<span class="o">({</span>name:<span class="s2">&#34;张宇航&#34;</span><span class="o">}</span>,age:18,gender:<span class="s2">&#34;男&#34;</span><span class="o">)</span>
show dbs
show collections
db.collection1.find<span class="o">()</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>结果</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; use zhangyuhangDb
switched to db zhangyuhangDb
&gt; db.table1.insert<span class="o">({</span>name:<span class="s2">&#34;张宇航&#34;</span>,age:18,gender:<span class="s2">&#34;男&#34;</span><span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; show collections
table1
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<blockquote>
<p>使用一个原本不存在的数据库会同时创建这个数据库</p>
<p>在一个数据库中使用原本不存在的集合会同时创建这个集合</p>
<p>db.集合名.insert(doc); &mdash;&gt; 将数据插入到集合中</p>
<p>db.集合名.find(); &mdash;&gt; 查看集合中所有数据</p>
</blockquote>
<hr>
<h1 id="step3添加数据">Step3.添加数据</h1>
<ul>
<li>
<p>insert也可以插入多个值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.insert<span class="o">([{</span>name:<span class="s2">&#34;张三&#34;</span>,age:1,gender:<span class="s2">&#34;男&#34;</span><span class="o">}</span>,<span class="o">{</span>name:<span class="s2">&#34;李四&#34;</span>,age:2,gender:<span class="s2">&#34;女&#34;</span><span class="o">}</span>,<span class="o">{</span>name:<span class="s2">&#34;王五&#34;</span>,age:3,gender:<span class="s2">&#34;男&#34;</span><span class="o">}])</span>
BulkWriteResult<span class="o">({</span>
  <span class="s2">&#34;writeErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;writeConcernErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;nInserted&#34;</span> : 3,
  <span class="s2">&#34;nUpserted&#34;</span> : 0,
  <span class="s2">&#34;nMatched&#34;</span> : 0,
  <span class="s2">&#34;nModified&#34;</span> : 0,
  <span class="s2">&#34;nRemoved&#34;</span> : 0,
  <span class="s2">&#34;upserted&#34;</span> : <span class="o">[</span> <span class="o">]</span>
<span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; 
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>可以看到,插入的每个数据都有一个长<code>_id</code></p>
</li>
<li>
<p>插入数据时,如果没有指定<code>_id</code>,则MongoDB自动生成</p>
</li>
<li>
<p>该属性作为集合中数据的唯一标识</p>
</li>
<li>
<p>系统是使用ObjectId()方法生成随机id</p>
</li>
<li>
<p>插入一个有<code>_id</code>的数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.insert<span class="o">({</span>_id:1,name:<span class="s2">&#34;赵六&#34;</span>,age:18,gender:<span class="s2">&#34;男&#34;</span><span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;赵六&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>还有一些更清晰的插入方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">db.table1.insertOne<span class="o">()</span>
db.table1.insertMany<span class="o">()</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>insertOne()只能插入一个,而insertManey()可以插入很多</p>
<p>这和纯的insert()是一样的</p>
</blockquote>
</li>
</ul>
<h1 id="step4查找数据">Step4.查找数据</h1>
<ul>
<li>
<p>查找指定字段的数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">({</span>_id:1<span class="o">})</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;赵六&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>find方法返回的是对象数组</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()[</span>1<span class="o">]</span>
<span class="o">{</span>
  <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>,
  <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>,
  <span class="s2">&#34;age&#34;</span> : 1,
  <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span>
<span class="o">}</span>
&gt; db.table1.find<span class="o">()[</span>0<span class="o">]</span>
<span class="o">{</span>
  <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>,
  <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>,
  <span class="s2">&#34;age&#34;</span> : 18,
  <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>findOne()方法获取符合条件的第一个数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.findOne<span class="o">()</span>
<span class="o">{</span>
  <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>,
  <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>,
  <span class="s2">&#34;age&#34;</span> : 18,
  <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span>
<span class="o">}</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;赵六&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>db.table1.find();返回符合条件的数据的个数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">({})</span>.count<span class="o">()</span><span class="p">;</span>
6
&gt; db.table1.find<span class="o">({</span>name:<span class="s2">&#34;张三&#34;</span><span class="o">})</span>.count<span class="o">()</span>
2
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step5更新数据">Step5.更新数据</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; use zhangyuhangDb
switched to db zhangyuhangDb
&gt; show collections
table1
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;赵六&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">({</span>_id:1<span class="o">}</span>,<span class="o">{</span>username:<span class="s2">&#34;张宇航&#34;</span><span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>传统的update()会使用参数中的旧对象替换新对象</p>
<blockquote>
<p>就比如这里的update()方法,第一个是查找条件,第二个就是对象</p>
<p>你第二个参数中写的是什么,结果就将数据整体替换成什么</p>
<p>并不会实现仅仅修改某个字段</p>
</blockquote>
</li>
<li>
<p>如果想单纯的修改某个字段,可以使用<code>$set</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.update<span class="o">(</span>
... <span class="o">{</span>_id:1<span class="o">}</span>,
... <span class="o">{</span><span class="nv">$set</span>:<span class="o">{</span>
...           name:<span class="s2">&#34;哈哈哈&#34;</span>,age:100,gender:<span class="s2">&#34;女&#34;</span>
...       <span class="o">}</span>
... <span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哈哈哈&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">(</span> <span class="o">{</span>_id:1<span class="o">}</span>, <span class="o">{</span><span class="nv">$set</span>:<span class="o">{</span>           name:<span class="s2">&#34;哈哈哈&#34;</span>,age:100,gender:<span class="s2">&#34;男&#34;</span>       <span class="o">}</span> <span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哈哈哈&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>删除集合中某个数据的某个字段</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.update<span class="o">(</span> <span class="o">{</span>_id:1<span class="o">}</span>, <span class="o">{</span><span class="nv">$unset</span>:<span class="o">{</span>name:1 <span class="o">}</span> <span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>直接使用unset,删除是根据字段名删除的,值写不写都无所谓,写上等于多少都可以</p>
</blockquote>
</li>
<li>
<p>但是update只能默认修改第一个,如果想修改多个,有两种方式</p>
<ul>
<li>
<p>一,在update()方法的set参数中添加一个参数multi(多个的意思),使其值为true</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">(</span>
... <span class="o">{</span>name:<span class="s2">&#34;张三&#34;</span><span class="o">}</span>,
... <span class="o">{</span><span class="nv">$set</span>:<span class="o">{</span>name:<span class="s2">&#34;卧槽&#34;</span><span class="o">}}</span>,
... <span class="o">{</span>multi:true<span class="o">}</span>
... <span class="o">)</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 2, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">2</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;卧槽&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;卧槽&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>二,使用updateMany</p>
<blockquote>
<p>语法和update一样,知识这个方法会将所有符合条件的数据全都进行修改</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;卧槽&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;卧槽&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">(</span> <span class="o">{</span>name:<span class="s2">&#34;卧槽&#34;</span><span class="o">}</span>, <span class="o">{</span><span class="nv">$set</span>:<span class="o">{</span>name:<span class="s2">&#34;尼玛&#34;</span><span class="o">}}</span>, <span class="o">{</span>multi:true<span class="o">}</span> <span class="o">)</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 2, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">2</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; 
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>和findOne一样,也有updateOne()方法,和默认的update()方法(不加multi)是一样的</p>
</li>
</ul>
<hr>
<h1 id="step6删除数据">Step6.删除数据</h1>
<ul>
<li>
<p>删除数据有三个方法</p>
<blockquote>
<p>remove() &mdash;&gt; (删除符合条件的所有数据)既可以删除一个也可以删除多个</p>
<p>deleteOne() &mdash;&gt; 删除一个数据</p>
<p>deleteMany() &mdash;&gt; 删除多个数据</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 100, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; db.table1.deleteOne<span class="o">({</span>_id:1<span class="o">})</span>
<span class="o">{</span> <span class="s2">&#34;acknowledged&#34;</span> : true, <span class="s2">&#34;deletedCount&#34;</span> : <span class="m">1</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e42fa2248c11475ff63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;尼玛&#34;</span>, <span class="s2">&#34;age&#34;</span> : 1, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
&gt; db.table1.remove<span class="o">({</span>name:<span class="s2">&#34;尼玛&#34;</span><span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nRemoved&#34;</span> : <span class="m">2</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>remove方法不是删除所有满足条件的数据吗</p>
</li>
<li>
<p>这时候如果给remove方法的第二个参数传一个true</p>
</li>
<li>
<p>则只会删除第一个符合条件的数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.insert<span class="o">([</span> <span class="o">{</span>name:<span class="s2">&#34;哈哈&#34;</span>,age:19<span class="o">}</span>, <span class="o">{</span>name:<span class="s2">&#34;哈哈&#34;</span>,age:18<span class="o">}</span> <span class="o">])</span>
BulkWriteResult<span class="o">({</span>
  <span class="s2">&#34;writeErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;writeConcernErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;nInserted&#34;</span> : 2,
  <span class="s2">&#34;nUpserted&#34;</span> : 0,
  <span class="s2">&#34;nMatched&#34;</span> : 0,
  <span class="s2">&#34;nModified&#34;</span> : 0,
  <span class="s2">&#34;nRemoved&#34;</span> : 0,
  <span class="s2">&#34;upserted&#34;</span> : <span class="o">[</span> <span class="o">]</span>
<span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18de&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哈哈&#34;</span>, <span class="s2">&#34;age&#34;</span> : <span class="m">19</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哈哈&#34;</span>, <span class="s2">&#34;age&#34;</span> : <span class="m">18</span> <span class="o">}</span>
&gt; db.table1.remove<span class="o">({</span>name:<span class="s2">&#34;哈哈&#34;</span><span class="o">}</span>,true<span class="o">)</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nRemoved&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哈哈&#34;</span>, <span class="s2">&#34;age&#34;</span> : <span class="m">18</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>删除数据库和数据库集合的操作</p>
<blockquote>
<p>删除数据库:db.dropDatabase()</p>
<p>删除数据库中的集合:db.数据库名称.drop()</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; use testMongo
switched to db testMongo
&gt; db.testCollection.insert<span class="o">({</span>name:<span class="s2">&#34;张宇航&#34;</span>,age:18<span class="o">})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.testCollection.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618977577e1f245b746c2b3e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : <span class="m">18</span> <span class="o">}</span>
&gt; show dbs
gdp            0.000GB
<span class="nb">local</span>          0.000GB
race_day       0.000GB
testMongo      0.000GB
zhangyuhangDb  0.000GB
&gt; show collections
testCollection
&gt; db.testCollection.drop<span class="o">()</span>
<span class="nb">true</span>
&gt; db.dropDatabase<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;dropped&#34;</span> : <span class="s2">&#34;testMongo&#34;</span>, <span class="s2">&#34;ok&#34;</span> : <span class="m">1</span> <span class="o">}</span>
&gt; show dbs
gdp            0.000GB
<span class="nb">local</span>          0.000GB
race_day       0.000GB
zhangyuhangDb  0.000GB
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="step7小练习1">Step7.小练习1</h1>
<h2 id="使用replaceone替换一个数据">使用replaceOne替换一个数据</h2>
<ul>
<li>
<p>后面替换前面</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
&gt; db.table1.replaceOne<span class="o">({</span>name:<span class="s2">&#34;唐僧&#34;</span>,age:18<span class="o">}</span>,<span class="o">{</span>name:<span class="s2">&#34;傻逼&#34;</span><span class="o">})</span>
<span class="o">{</span> <span class="s2">&#34;acknowledged&#34;</span> : true, <span class="s2">&#34;matchedCount&#34;</span> : 1, <span class="s2">&#34;modifiedCount&#34;</span> : <span class="m">1</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>可以看到,{name=&quot;傻逼&rdquo;,age=18}和{age=18,name=&quot;傻逼&rdquo;}是不一样的</p>
<p>在MongoDB中,即使字段和value都相同,顺序不同也是无用的</p>
</blockquote>
</li>
</ul>
<h2 id="向一个数据中插入一个复杂字段">向一个数据中插入一个复杂字段</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.update<span class="o">({</span>name:<span class="s2">&#34;李四&#34;</span><span class="o">}</span>,<span class="o">{</span><span class="nv">$set</span>:<span class="o">{</span>hobby:<span class="o">{</span>cities:<span class="o">[</span><span class="s2">&#34;北京&#34;</span>,<span class="s2">&#34;上海&#34;</span>,<span class="s2">&#34;深圳&#34;</span><span class="o">]}}})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>	
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>单独提出来,看得更清晰</p>
<blockquote>
<p>db.table1.update({name:&ldquo;李四&rdquo;},{$set:{hobby:{cities:[&ldquo;北京&rdquo;,&ldquo;上海&rdquo;,&ldquo;深圳&rdquo;]}}})</p>
</blockquote>
</li>
<li>
<p>一个hobby文档内嵌了一个cities文档,这叫做内嵌文档</p>
</li>
<li>
<p>如何查询内嵌文档中的内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">({</span><span class="s2">&#34;hobby.cities&#34;</span>:<span class="s2">&#34;北京&#34;</span><span class="o">})</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意:查询内嵌文档的key一定要用引号引起来(单引号双引号都可以)</p>
</blockquote>
</li>
<li>
<p>更新内嵌文档中的数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">({</span>name:<span class="s2">&#34;李四&#34;</span><span class="o">}</span>,<span class="o">{</span><span class="nv">$push</span>:<span class="o">{</span><span class="s2">&#34;hobby.cities&#34;</span>:<span class="s2">&#34;瑞士&#34;</span><span class="o">}})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span>, <span class="s2">&#34;瑞士&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>和push类似的还有addToSet</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.update<span class="o">({</span>name:<span class="s2">&#34;李四&#34;</span><span class="o">}</span>,<span class="o">{</span><span class="nv">$addToSet</span>:<span class="o">{</span><span class="s2">&#34;hobby.cities&#34;</span>:<span class="s2">&#34;瑞士&#34;</span><span class="o">}})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">0</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span>, <span class="s2">&#34;瑞士&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
&gt; db.table1.update<span class="o">({</span>name:<span class="s2">&#34;李四&#34;</span><span class="o">}</span>,<span class="o">{</span><span class="nv">$push</span>:<span class="o">{</span><span class="s2">&#34;hobby.cities&#34;</span>:<span class="s2">&#34;瑞士&#34;</span><span class="o">}})</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nMatched&#34;</span> : 1, <span class="s2">&#34;nUpserted&#34;</span> : 0, <span class="s2">&#34;nModified&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e02b50ffa13900b741f4&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;傻逼&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span>, <span class="s2">&#34;age&#34;</span> : 2, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;女&#34;</span>, <span class="s2">&#34;hobby&#34;</span> : <span class="o">{</span> <span class="s2">&#34;cities&#34;</span> : <span class="o">[</span> <span class="s2">&#34;北京&#34;</span>, <span class="s2">&#34;上海&#34;</span>, <span class="s2">&#34;深圳&#34;</span>, <span class="s2">&#34;瑞士&#34;</span>, <span class="s2">&#34;瑞士&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;6188e4a4a2248c11475ff640&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;age&#34;</span> : 3, <span class="s2">&#34;gender&#34;</span> : <span class="s2">&#34;男&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618976a15dd6c5ab9ffe18df&#34;</span><span class="o">)</span>, <span class="s2">&#34;age&#34;</span> : 18, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;唐僧&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>可以看到,push是可重复的更新</p>
<p>而addToSet是如果数组中存在要添加的数据,则不会添加</p>
</blockquote>
</li>
</ul>
<h2 id="向集合中插入20000条数据">向集合中插入20000条数据</h2>
<ul>
<li>
<p>第一种,写个循环,一次insert一个数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.drop<span class="o">()</span>
<span class="nb">true</span>
&gt; db.table1.find<span class="o">()</span>
&gt; <span class="k">for</span><span class="o">(</span>var <span class="nv">i</span> <span class="o">=</span> 1<span class="p">;</span>i &lt;<span class="o">=</span> 20000<span class="p">;</span>i++<span class="o">){</span>
... db.table1.insert<span class="o">({</span>num:i<span class="o">})</span><span class="p">;</span>
... <span class="o">}</span>
db.WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd51&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd52&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd53&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd54&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd55&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd56&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd57&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd58&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd59&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">9</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a2e32b5dede3b8fccbd5a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">10</span> <span class="o">}</span>
...
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>第二种,向数组中插入20000条数据,然后将数组插入到collection中</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; var <span class="nv">array</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
&gt; <span class="k">for</span><span class="o">(</span>var <span class="nv">i</span> <span class="o">=</span> 1<span class="p">;</span>i &lt;<span class="o">=</span> 20000<span class="p">;</span>i++<span class="o">){</span>
... array.push<span class="o">({</span>num:i<span class="o">})</span>
... <span class="o">}</span>
20000
&gt; db.table1.insert<span class="o">(</span>array<span class="o">)</span><span class="p">;</span>
BulkWriteResult<span class="o">({</span>
  <span class="s2">&#34;writeErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;writeConcernErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
  <span class="s2">&#34;nInserted&#34;</span> : 20000,
  <span class="s2">&#34;nUpserted&#34;</span> : 0,
  <span class="s2">&#34;nMatched&#34;</span> : 0,
  <span class="s2">&#34;nModified&#34;</span> : 0,
  <span class="s2">&#34;nRemoved&#34;</span> : 0,
  <span class="s2">&#34;upserted&#34;</span> : <span class="o">[</span> <span class="o">]</span>
<span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79920&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79921&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79922&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79923&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79924&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79925&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79926&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79927&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79928&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">9</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f79929&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">10</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f7992a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">11</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618a3181a721f198f9f7992b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">12</span> <span class="o">}</span>
.
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="大于小于等于查询以及分页">大于、小于等于查询以及分页</h2>
<h3 id="范围查询">范围查询</h3>
<blockquote>
<p>$gt:大于</p>
<p>$lt:小于</p>
<p>$gte:大于等于</p>
<p>$lte:小于等于</p>
<p>$eq:和普通的find()查值相似,只是略有区别</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; var <span class="nv">array</span> <span class="o">=</span> <span class="o">[]</span>
&gt; <span class="k">for</span><span class="o">(</span>var <span class="nv">i</span> <span class="o">=</span> 1<span class="p">;</span>i &lt;<span class="o">=</span> 10<span class="p">;</span>i++<span class="o">){</span>
... array.push<span class="o">({</span>num:i<span class="o">})</span><span class="p">;</span>
... <span class="o">}</span>
10
&gt; db.table1.insert<span class="o">(</span>array<span class="o">)</span><span class="p">;</span>
BulkWriteResult<span class="o">({</span>
	<span class="s2">&#34;writeErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
	<span class="s2">&#34;writeConcernErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
	<span class="s2">&#34;nInserted&#34;</span> : 10,
	<span class="s2">&#34;nUpserted&#34;</span> : 0,
	<span class="s2">&#34;nMatched&#34;</span> : 0,
	<span class="s2">&#34;nModified&#34;</span> : 0,
	<span class="s2">&#34;nRemoved&#34;</span> : 0,
	<span class="s2">&#34;upserted&#34;</span> : <span class="o">[</span> <span class="o">]</span>
<span class="o">})</span>
&gt; db.table1.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab638&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab639&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab640&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">9</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab641&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">10</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">({</span>num:<span class="o">{</span><span class="nv">$gt</span>:5<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab640&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">9</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab641&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">10</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">({</span>num:<span class="o">{</span><span class="nv">$gte</span>:5<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab640&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">9</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab641&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">10</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">({</span>num:<span class="o">{</span><span class="nv">$lt</span>:5<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab638&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab639&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">({</span>num:<span class="o">{</span><span class="nv">$lte</span>:5<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab638&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab639&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">({</span>num:<span class="o">{</span><span class="nv">$eq</span>:5<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="分页查询">分页查询</h3>
<blockquote>
<p>limit指的是从默认位置开始查询几个</p>
<p>skip指的是从默认位置开始向后跳过几个</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.find<span class="o">()</span>.limit<span class="o">(</span>5<span class="o">)</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab638&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">1</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab639&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">2</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63a&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">3</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
&gt; db.table1.find<span class="o">()</span>.skip<span class="o">(</span>3<span class="o">)</span>.limit<span class="o">(</span>5<span class="o">)</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63b&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">4</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63c&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63d&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">6</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63e&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">7</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b15eccee8622ed21ab63f&#34;</span><span class="o">)</span>, <span class="s2">&#34;num&#34;</span> : <span class="m">8</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="step8小练习2">Step8.小练习2</h1>
<h2 id="一对一">一对一</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.insert<span class="o">(</span>
... <span class="o">{</span>wife:<span class="s2">&#34;MyWife&#34;</span>,husband:<span class="o">{</span>name:<span class="s2">&#34;张宇航&#34;</span><span class="o">}})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.insert<span class="o">(</span> <span class="o">{</span>wife:<span class="s2">&#34;张三&#34;</span>,husband:<span class="o">{</span>name:<span class="s2">&#34;李四&#34;</span><span class="o">}})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b1e0acee8622ed21ab642&#34;</span><span class="o">)</span>, <span class="s2">&#34;wife&#34;</span> : <span class="s2">&#34;MyWife&#34;</span>, <span class="s2">&#34;husband&#34;</span> : <span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b1e22cee8622ed21ab643&#34;</span><span class="o">)</span>, <span class="s2">&#34;wife&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;husband&#34;</span> : <span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;李四&#34;</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>一对一就没什么说的了</p>
</blockquote>
<h2 id="一对多">一对多</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.table1.insert<span class="o">(</span> <span class="o">{</span>wife:<span class="s2">&#34;张三&#34;</span>,husband:<span class="o">{</span>name:<span class="o">[</span><span class="s2">&#34;王五&#34;</span>,<span class="s2">&#34;赵六&#34;</span>,<span class="s2">&#34;韩七&#34;</span><span class="o">]}})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.insert<span class="o">(</span> <span class="o">{</span>wife:<span class="s2">&#34;111&#34;</span>,husband:<span class="o">{</span>name:<span class="o">[</span><span class="s2">&#34;222&#34;</span>,<span class="s2">&#34;333&#34;</span>,<span class="s2">&#34;444&#34;</span><span class="o">]}})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.table1.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b20bbcee8622ed21ab646&#34;</span><span class="o">)</span>, <span class="s2">&#34;wife&#34;</span> : <span class="s2">&#34;张三&#34;</span>, <span class="s2">&#34;husband&#34;</span> : <span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="o">[</span> <span class="s2">&#34;王五&#34;</span>, <span class="s2">&#34;赵六&#34;</span>, <span class="s2">&#34;韩七&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b20d1cee8622ed21ab647&#34;</span><span class="o">)</span>, <span class="s2">&#34;wife&#34;</span> : <span class="s2">&#34;111&#34;</span>, <span class="s2">&#34;husband&#34;</span> : <span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="o">[</span> <span class="s2">&#34;222&#34;</span>, <span class="s2">&#34;333&#34;</span>, <span class="s2">&#34;444&#34;</span> <span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>这个并不准确</p>
</blockquote>
<ul>
<li>通常是使用一个集合中的某个id和一个数组作为另一个集合的一个元素</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab648&#34;</span><span class="o">)</span>, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab649&#34;</span><span class="o">)</span>, <span class="s2">&#34;username&#34;</span> : <span class="s2">&#34;张宇航的老婆&#34;</span> <span class="o">}</span>
&gt; db.orders.insert<span class="o">(</span>
... <span class="o">{</span>
...     list:<span class="o">[</span><span class="s2">&#34;苹果&#34;</span>,<span class="s2">&#34;香蕉&#34;</span>,<span class="s2">&#34;大鸭梨&#34;</span><span class="o">]</span>,
...     user_id:ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab649&#34;</span><span class="o">)</span>
... <span class="o">}</span>
... <span class="o">)</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.orders.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2222cee8622ed21ab64a&#34;</span><span class="o">)</span>, <span class="s2">&#34;list&#34;</span> : <span class="o">[</span> <span class="s2">&#34;苹果&#34;</span>, <span class="s2">&#34;香蕉&#34;</span>, <span class="s2">&#34;大鸭梨&#34;</span> <span class="o">]</span>, <span class="s2">&#34;user_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab649&#34;</span><span class="o">)</span> <span class="o">}</span>
&gt; db.orders.insert<span class="o">(</span> <span class="o">{</span>     list:<span class="o">[</span><span class="s2">&#34;黄瓜&#34;</span>,<span class="s2">&#34;橙子&#34;</span>,<span class="s2">&#34;芒果&#34;</span><span class="o">]</span>,     user_id:ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab648&#34;</span><span class="o">)</span> <span class="o">}</span> <span class="o">)</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.orders.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2222cee8622ed21ab64a&#34;</span><span class="o">)</span>, <span class="s2">&#34;list&#34;</span> : <span class="o">[</span> <span class="s2">&#34;苹果&#34;</span>, <span class="s2">&#34;香蕉&#34;</span>, <span class="s2">&#34;大鸭梨&#34;</span> <span class="o">]</span>, <span class="s2">&#34;user_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab649&#34;</span><span class="o">)</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b227dcee8622ed21ab64b&#34;</span><span class="o">)</span>, <span class="s2">&#34;list&#34;</span> : <span class="o">[</span> <span class="s2">&#34;黄瓜&#34;</span>, <span class="s2">&#34;橙子&#34;</span>, <span class="s2">&#34;芒果&#34;</span> <span class="o">]</span>, <span class="s2">&#34;user_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b2196cee8622ed21ab648&#34;</span><span class="o">)</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="多对多">多对多</h2>
<ul>
<li>和上面的一对多类似,它就是一个id数组中的所有id都可以既绑定一个又可以绑定另一个</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.teacher.insert<span class="o">([{</span>name:<span class="s2">&#34;黄药师&#34;</span><span class="o">}</span>, <span class="o">{</span>name:<span class="s2">&#34;龟仙人&#34;</span><span class="o">}</span>,<span class="o">{</span>name:<span class="s2">&#34;洪七公&#34;</span><span class="o">}])</span><span class="p">;</span>
BulkWriteResult<span class="o">({</span>
	<span class="s2">&#34;writeErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
	<span class="s2">&#34;writeConcernErrors&#34;</span> : <span class="o">[</span> <span class="o">]</span>,
	<span class="s2">&#34;nInserted&#34;</span> : 3,
	<span class="s2">&#34;nUpserted&#34;</span> : 0,
	<span class="s2">&#34;nMatched&#34;</span> : 0,
	<span class="s2">&#34;nModified&#34;</span> : 0,
	<span class="s2">&#34;nRemoved&#34;</span> : 0,
	<span class="s2">&#34;upserted&#34;</span> : <span class="o">[</span> <span class="o">]</span>
<span class="o">})</span>
&gt; db.teacher.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;黄药师&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;龟仙人&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64e&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;洪七公&#34;</span> <span class="o">}</span>
&gt; db.student.insert<span class="o">(</span>
... ... <span class="o">{</span>name:<span class="s2">&#34;孙悟空&#34;</span>,teacher_ids:<span class="o">[</span>
... ... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>,
... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)]}</span>,
... <span class="o">{</span>name:<span class="s2">&#34;哪吒&#34;</span>,teacher_ids:<span class="o">[</span>
... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>,
... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span>,
... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64e&#34;</span><span class="o">)]})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.student.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b25a8cee8622ed21ab64f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;孙悟空&#34;</span>, <span class="s2">&#34;teacher_ids&#34;</span> : <span class="o">[</span> ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>, ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span> <span class="o">]</span> <span class="o">}</span>
&gt; db.student.insert<span class="o">({</span>name:<span class="s2">&#34;哪吒&#34;</span>,teacher_ids:<span class="o">[</span>
... ... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>,
... ... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span>,
... ... ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64e&#34;</span><span class="o">)]})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.student.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b25a8cee8622ed21ab64f&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;孙悟空&#34;</span>, <span class="s2">&#34;teacher_ids&#34;</span> : <span class="o">[</span> ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>, ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span> <span class="o">]</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : ObjectId<span class="o">(</span><span class="s2">&#34;618b26c5cee8622ed21ab650&#34;</span><span class="o">)</span>, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;哪吒&#34;</span>, <span class="s2">&#34;teacher_ids&#34;</span> : <span class="o">[</span> ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64c&#34;</span><span class="o">)</span>, ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64d&#34;</span><span class="o">)</span>, ObjectId<span class="o">(</span><span class="s2">&#34;618b249ecee8622ed21ab64e&#34;</span><span class="o">)</span> <span class="o">]</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>孙悟空的老师是黄药师和洪七公,哪吒的老师中也有它们两个</p>
<p>上面那种是这个学生绑定多个老师之后这几个老师就不能和别人绑定了</p>
</blockquote>
<hr>
<h1 id="step9小练习3">Step9.小练习3</h1>
<h2 id="将json文件导入到mongodb中">将JSON文件导入到MongoDB中</h2>
<ul>
<li>
<p>在根目录下创建两个json文件(因为在其他目录下我没试过,肯定行)</p>
<p><code>depa.json</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;销售部&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;前端&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;市场部&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;策划部&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;后端&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;中间件&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">70</span><span class="p">,</span>
    <span class="nt">&#34;depa&#34;</span><span class="p">:</span><span class="s2">&#34;研发部&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>emp.json</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>   
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;张宇航&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">10000000</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;ww&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">10000</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;zl&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">20000</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;Cc&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">100</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;ee&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">54</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">10000</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;bd&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">88</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">300000</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;_id&#34;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;qq&#34;</span><span class="p">,</span>
    <span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span>
    <span class="nt">&#34;salary&#34;</span><span class="p">:</span><span class="mi">10000000000</span>
                         
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mongoimport --db zhangyuhangDb --collection user --file emp.json
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>意思就是:将emp.json文件导入到<code>zhangyuhangDb</code>数据库下的<code>user</code>集合</p>
</blockquote>
<blockquote>
<p>开发者思维,CV就好,不会再查</p>
</blockquote>
</li>
</ul>
<h2 id="使用of进行多条件查询">使用of进行多条件查询</h2>
<ul>
<li>
<p>其实就是<code>||</code>的意思</p>
</li>
<li>
<p>比如需要查找<code>a&gt;3</code>||<code>a &lt; 1</code></p>
<blockquote>
<p>只要满足一个就可以</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.find<span class="o">({</span><span class="nv">$or</span>:<span class="o">[</span> <span class="o">{</span>salary:<span class="o">{</span><span class="nv">$lt</span>:10000<span class="o">}}</span>,<span class="o">{</span>salary:<span class="o">{</span><span class="nv">$gt</span>:20000<span class="o">}}</span> <span class="o">]})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 19, <span class="s2">&#34;salary&#34;</span> : <span class="m">10000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;Cc&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : <span class="m">100</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 88, <span class="s2">&#34;salary&#34;</span> : <span class="m">300000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : NumberLong<span class="o">(</span><span class="s2">&#34;10000000000&#34;</span><span class="o">)</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>整个集合中只要满足工资小于10000和大于20000这两个条件中的其中之一就可以</p>
</li>
</ul>
<h2 id="将导入的员工json和部门json进行多对多映射">将导入的员工json和部门json进行多对多映射</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
&gt; db.depa.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 20, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 30, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 40, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 50, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 60, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 70, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
&gt; var <span class="nv">depaName</span> <span class="o">=</span> db.depa.find<span class="o">({</span>_id:10<span class="o">})[</span>0<span class="o">]</span>.depa<span class="p">;</span>
&gt; db.user.find<span class="o">({</span>depa:depaName<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意:find();方法会将所有符合条件的数据以数组的形式返回</p>
<p>所以如果想获取数组中某一个数据的其中一个字段</p>
<p>需要先使用数组索引获取到一条数据,然后再通过<code>.depa</code>获取到这条数据中的某个字段的值</p>
</blockquote>
<h2 id="批量更新数据">批量更新数据</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.updateMany<span class="o">({</span>salary:<span class="o">{</span><span class="nv">$lte</span>:30000<span class="o">}}</span>,<span class="o">{</span><span class="nv">$inc</span>:<span class="o">{</span>salary:1<span class="o">}})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;acknowledged&#34;</span> : true, <span class="s2">&#34;matchedCount&#34;</span> : 3, <span class="s2">&#34;modifiedCount&#34;</span> : <span class="m">3</span> <span class="o">}</span>
&gt; db.user.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>$inc就是自增的意思</p>
<p>这段代码的意思就是:查询所有工资小于30000的对象,然后将他们的工资全部增加1</p>
</blockquote>
<hr>
<h1 id="step10sort和投影">Step10.sort和投影</h1>
<h2 id="sort">sort</h2>
<ul>
<li>
<p>就是按照集合中的字段,将整个数据表中的数据进行正序显示还是倒序显示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.find<span class="o">()</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
&gt; db.user.find<span class="o">()</span>.sort<span class="o">({</span>salary:1<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
&gt; db.user.find<span class="o">()</span>.sort<span class="o">({</span>salary:-1<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 13, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zo&#34;</span>, <span class="s2">&#34;age&#34;</span> : 31, <span class="s2">&#34;salary&#34;</span> : 3000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 14, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zj&#34;</span>, <span class="s2">&#34;age&#34;</span> : 32, <span class="s2">&#34;salary&#34;</span> : 3000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 12, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zz&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 2000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 11, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ii&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 100000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;反正不是销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>1就是正序,-1就是倒序</p>
</blockquote>
<ul>
<li>多个字段同时进行排序</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.insert<span class="o">({</span> <span class="s2">&#34;_id&#34;</span> : 14, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zj&#34;</span>, <span class="s2">&#34;age&#34;</span> : 32, <span class="s2">&#34;salary&#34;</span> : 3000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">})</span><span class="p">;</span>
WriteResult<span class="o">({</span> <span class="s2">&#34;nInserted&#34;</span> : <span class="m">1</span> <span class="o">})</span>
&gt; db.user.find<span class="o">()</span>.sort<span class="o">({</span>salary:1,age:-1<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 10001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;age&#34;</span> : 20, <span class="s2">&#34;salary&#34;</span> : 20001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;age&#34;</span> : 23, <span class="s2">&#34;salary&#34;</span> : 30001, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;市场部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 25, <span class="s2">&#34;salary&#34;</span> : 50000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;后端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;age&#34;</span> : 26, <span class="s2">&#34;salary&#34;</span> : 60000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;中间件&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 11, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ii&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 100000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;反正不是销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;age&#34;</span> : 24, <span class="s2">&#34;salary&#34;</span> : 400000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;策划部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;age&#34;</span> : 27, <span class="s2">&#34;salary&#34;</span> : 700000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;age&#34;</span> : 28, <span class="s2">&#34;salary&#34;</span> : 800000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;研发部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;age&#34;</span> : 29, <span class="s2">&#34;salary&#34;</span> : 900000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;前端&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 1000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;销售部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 12, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zz&#34;</span>, <span class="s2">&#34;age&#34;</span> : 30, <span class="s2">&#34;salary&#34;</span> : 2000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 14, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zj&#34;</span>, <span class="s2">&#34;age&#34;</span> : 32, <span class="s2">&#34;salary&#34;</span> : 3000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 13, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zo&#34;</span>, <span class="s2">&#34;age&#34;</span> : 31, <span class="s2">&#34;salary&#34;</span> : 3000000, <span class="s2">&#34;depa&#34;</span> : <span class="s2">&#34;美女部&#34;</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>先按照salary进行正序排序,排序后的结果中如果存在相邻的两个对象的age是一样的,则将这两个数据进行倒序排序</p>
</blockquote>
<h2 id="投影">投影</h2>
<ul>
<li>投影的格式是db.collectionName.find({},{&hellip;&hellip;..});</li>
</ul>
<blockquote>
<p>显示结果默认为第二个大括号中的所有字段和id</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">&gt; db.user.find<span class="o">({}</span>,<span class="o">{</span>name:1,salary:1<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 2, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">10001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 1, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">20001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 3, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">30001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 4, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">400000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 5, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">50000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 6, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">60000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 7, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">700000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 8, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">800000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 9, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">900000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 10, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">1000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 11, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ii&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">100000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 12, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zz&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">2000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 13, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zo&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">3000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;_id&#34;</span> : 14, <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zj&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">3000000</span> <span class="o">}</span>
&gt; db.user.find<span class="o">({}</span>,<span class="o">{</span>name:1,salary:1,_id:0<span class="o">})</span><span class="p">;</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ww&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">10001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;张宇航&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">20001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zl&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">30001</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">400000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ee&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">50000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;bd&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">60000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;qq&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">700000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;kk&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">800000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;hh&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">900000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;xx&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">1000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;ii&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">100000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zz&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">2000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zo&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">3000000</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;zj&#34;</span>, <span class="s2">&#34;salary&#34;</span> : <span class="m">3000000</span> <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>如果想让哪个字段不显示,那就让它为0</p>
</blockquote>
</li>
</ul>
<hr>
<h1 id="step11mongoose">Step11.Mongoose</h1>
<p><code>Mongoose官方文档</code></p>
<p><a href="https://mongoosejs.com/">Mongoosejs</a></p>
<ul>
<li>我windows安装MongoDB费死劲了</li>
<li>而且Mongoose开发需要使用图形界面</li>
<li>所以接下来都使用Ubuntu操作</li>
</ul>
<h2 id="ubuntu安装mongodb以及配置">Ubuntu安装MongoDB以及配置</h2>
<p><a href="https://www.cnblogs.com/shileima/p/7823434.html">相关博客</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">zhangyuhang-BOHK-WAX9X% sudo apt-get install mongodb

<span class="c1"># 进入mongoDB</span>
zhangyuhang-BOHK-WAX9X% mongo

<span class="c1"># 设置用户名和密码</span>
&gt; use admin<span class="p">;</span>
&gt; db.addUser<span class="o">(</span><span class="s2">&#34;root&#34;</span>,<span class="s2">&#34;123456&#34;</span><span class="o">)</span><span class="p">;</span>

&gt; show dbs<span class="p">;</span>
&gt; use zhangyuhangDb<span class="p">;</span>
&gt; db.collectionTest01.insert<span class="o">({</span>name:<span class="s2">&#34;张宇航&#34;</span><span class="o">})</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>第一次会报错,这是因为之前设置了密码</p>
<p>然后我百度了一下如何使用密码连接MongoDB</p>
<p>但是都没有什么卵用</p>
<p>最后找到一个教程是这样的</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">zhangyuhang-BOHK-WAX9X% mongo
&gt; use admin<span class="p">;</span>
&gt; db.createUser<span class="o">(</span>  
...   <span class="o">{</span>  
...     user: <span class="s2">&#34;admin&#34;</span>,  
...     pwd: <span class="s2">&#34;admin&#34;</span>,  
...     roles: <span class="o">[</span> <span class="o">{</span> role: <span class="s2">&#34;userAdminAnyDatabase&#34;</span>, db: <span class="s2">&#34;admin&#34;</span> <span class="o">}</span> <span class="o">]</span>  
...   <span class="o">}</span>  
... <span class="o">)</span><span class="p">;</span>
&gt; db.auth<span class="o">(</span><span class="s2">&#34;admin&#34;</span>,<span class="s2">&#34;admin&#34;</span><span class="o">)</span><span class="p">;</span>
1
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>二次使用admin设置用户名和密码</p>
<p>这里是使用json格式设置,所以说上面那个错了</p>
</blockquote>
<h2 id="mongoose环境的配置">Mongoose环境的配置</h2>
<ul>
<li>开始我用VSCODE开发,然后又百度了一堆运行js脚本的命令</li>
<li>发现没什么卵用</li>
<li>下面就是用WebStorm开发</li>
</ul>
<h3 id="安装npm和mongoose">安装npm和Mongoose</h3>
<blockquote>
<p>mongoose是使用npm下载的</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install nodejs-dev node-gyp libssl1.0-dev
sudo apt install npm
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>创建一个文件夹<code>Mongoose</code>,使用WebStorm打开</p>
</blockquote>
<blockquote>
<p>创建一个js文件</p>
</blockquote>
<p>​		<code>helloMongoose.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>
<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>运行文件,发现需要安装mongoose</p>
</blockquote>
<blockquote>
<p>在WebStorm的终端中安装mongoose并添加到环境变量中</p>
</blockquote>
<blockquote>
<p>将鼠标放到require上,<code>More actions</code></p>
</blockquote>
<blockquote>
<p>点击带dev的那个<code>install mongoose</code></p>
</blockquote>
<blockquote>
<p>下载完成后运行还会报错</p>
</blockquote>
<blockquote>
<p>说什么</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">const <span class="nv">utf8Encoder</span> <span class="o">=</span> new TextEncoder<span class="o">()</span><span class="p">;</span>
                    ^

ReferenceError: TextEncoder is not defined
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>进入encoding.js</p>
</blockquote>
<ul>
<li>将</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">utf8Encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TextEncoder</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">utf8Decoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TextEncoder</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ignoreBOM</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>换成</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">util</span><span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;util&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">utf8Encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">util</span><span class="p">.</span><span class="nx">TextEncoder</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">utf8Decoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">util</span><span class="p">.</span><span class="nx">TextEncoder</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ignoreBOM</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>再次运行,就好了</p>
</blockquote>
<h3 id="mongoose的基本操作">Mongoose的基本操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>

<span class="c1">// Connect to the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">);</span>

<span class="c1">// Bind events to methods.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;open&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Database is connected.&#34;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Disconnect from the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="schema和model">Schema和Model</h2>
<blockquote>
<p>向zhangyuhangDb数据库下的<code>students</code>集合插入一条数据</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>

<span class="c1">// Connect to the database.
</span><span class="c1">// 这里使用useMongoClient是没用的,据说是版本过低给废弃掉了
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">,{</span><span class="nx">useNewUrlParser</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>

<span class="c1">// Bind events to methods.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;open&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Database is connected.&#34;</span><span class="p">);</span>
<span class="p">});</span>



<span class="c1">// Schema赋值给一个变量
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">;</span>

<span class="c1">// 创建Schema模式对象
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">studentSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
   <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
   <span class="nx">age</span><span class="o">:</span><span class="nb">Number</span><span class="p">,</span>
   <span class="nx">gender</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
      <span class="k">default</span><span class="o">:</span><span class="s2">&#34;female&#34;</span>
   <span class="p">},</span>
   <span class="nx">address</span><span class="o">:</span><span class="nb">String</span>
<span class="p">});</span>

<span class="cm">/*
</span><span class="cm"> * Schema创建Model
</span><span class="cm"> * Model是数据库中的集合,通过Model才能对数据库进行操作
</span><span class="cm"> * mongoose.model(集合名,限制集合的Schema(上面创建的Schema));
</span><span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">studentModel</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s2">&#34;student&#34;</span><span class="p">,</span><span class="nx">studentSchema</span><span class="p">);</span>

<span class="c1">// 插入数据
</span><span class="c1"></span><span class="nx">studentModel</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s2">&#34;zhangyuhang&#34;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">19</span><span class="p">,</span><span class="nx">address</span><span class="o">:</span><span class="s2">&#34;ShangHai&#34;</span><span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Inserted into the database.&#34;</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">});</span>

<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;close&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Disconnect from the database.&#34;</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// Disconnect from the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://img-blog.csdnimg.cn/ce7d32b44de54af7bf2c8888dc67f781.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/be2f1ad5889a46518b9b3805e055ea8d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a2k5ZCNQA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<hr>
<h2 id="model的方法">Model的方法</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>

<span class="c1">// Connect to the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">,{</span><span class="nx">useNewUrlParser</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>

<span class="c1">// Bind events to methods.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;open&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Database is connected.&#34;</span><span class="p">);</span>
<span class="p">});</span>



<span class="c1">// Schema赋值给一个变量
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">;</span>

<span class="c1">// 创建Schema模式对象
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">studentSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
   <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
   <span class="nx">age</span><span class="o">:</span><span class="nb">Number</span><span class="p">,</span>
   <span class="nx">gender</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
      <span class="k">default</span><span class="o">:</span><span class="s2">&#34;female&#34;</span>
   <span class="p">},</span>
   <span class="nx">address</span><span class="o">:</span><span class="nb">String</span>
<span class="p">});</span>

<span class="cm">/*
</span><span class="cm"> * Schema创建Model
</span><span class="cm"> * Model是数据库中的集合,通过Model才能对数据库进行操作
</span><span class="cm"> * mongoose.model(集合名,限制集合的Schema(上面创建的Schema));
</span><span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">studentModel</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s2">&#34;student&#34;</span><span class="p">,</span><span class="nx">studentSchema</span><span class="p">);</span>

<span class="nx">studentModel</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s2">&#34;zhangyuhang&#34;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">19</span><span class="p">,</span><span class="nx">address</span><span class="o">:</span><span class="s2">&#34;ShangHai&#34;</span><span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Inserted into the database.&#34;</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">});</span>


<span class="c1">//最简单的查询,function是model方法执行完毕后调用的函数(第一个参数使用boolean值代表执行是否成功,第二个参数是model方法返回的信息/数据)
</span><span class="c1">// studentModel.find({name:&#34;zhangyuhang&#34;}, function (err,results){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(results);
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>

<span class="c1">//参数: [查询条件,要显示的字段(参数整体使用&#34;&#34;包裹,多个字段之间使用空格分割,不使用json数据) 查询选项(分页、步长等) function]
</span><span class="c1">// studentModel.find({},&#34;name _id&#34;,{limit:5}, function (err,results){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(results);
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>
<span class="c1">// studentModel.findOne({name:&#34;zhangyuhang&#34;}, function (err,result){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(result.age);
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>

<span class="c1">// 参数: [查询条件 要更改的字段信息 function]
</span><span class="c1">// studentModel.updateOne({name:&#34;zhangyuhang&#34;}, {$set:{age:20}}, function (err){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(&#34;The Object has been changed.&#34;);
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>
<span class="c1">// studentModel.remove({name:&#34;zhangyuhang&#34;,age:20}, function (err){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(&#34;The Object has been deleted.&#34;);
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>
<span class="c1">// studentModel.count({}, function(err,count){
</span><span class="c1">//    if(!err){
</span><span class="c1">//       console.log(count)
</span><span class="c1">//    }
</span><span class="c1">// });
</span><span class="c1"></span>
<span class="c1">// mongoose.connection.once(&#34;close&#34;,function(){
</span><span class="c1">//    console.log(&#34;Disconnect from the database.&#34;);
</span><span class="c1">// });
</span><span class="c1">// // Disconnect from the database.
</span><span class="c1">// mongoose.disconnect();
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意:在执行CURD操作时,下面进行关闭数据库操作会报错</p>
</blockquote>
<hr>
<h2 id="mongoose模块化">Mongoose模块化</h2>
<ul>
<li>
<p>就是说每次写新文件都要写一次连接操作</p>
</li>
<li>
<p>是否可以只写一次,然后通过一些方式调用呢</p>
<p><code>commonMongoose.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>
  
<span class="c1">// Connect to the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">,{</span><span class="nx">useNewUrlParser</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
  
<span class="c1">// Bind events to methods.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;open&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Database is connected.&#34;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p><code>test.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;/home/zhangyuhang/Mongoose/js/commonMongoose.js&#34;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">/usr/bin/node /home/zhangyuhang/Mongoose/js/ModuleMongoose/test.js
Database is connected.
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>尝试着进行一次查找</p>
<blockquote>
<p>连接操作放在<code>commonMongoose.js</code>中,创建Schema和Model的模板放在<code>user.js</code>模板中</p>
<p>在<code>test.js</code>中调用二者</p>
</blockquote>
<p><code>commMongoose.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>
  
<span class="c1">// Connect to the database.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&#34;mongodb://127.0.0.1/zhangyuhangDb&#34;</span><span class="p">,{</span><span class="nx">useNewUrlParser</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
  
<span class="c1">// Bind events to methods.
</span><span class="c1"></span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&#34;open&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Database is connected.&#34;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p><code>user.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Import mongoose.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mongoose&#34;</span><span class="p">);</span>
  
<span class="kd">var</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">;</span>
  
<span class="kd">var</span> <span class="nx">studentSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span><span class="nb">Number</span><span class="p">,</span>
    <span class="nx">gender</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span>
        <span class="k">default</span><span class="o">:</span><span class="s2">&#34;female&#34;</span>
    <span class="p">},</span>
    <span class="nx">address</span><span class="o">:</span><span class="nb">String</span>
<span class="p">});</span>
  
<span class="c1">// 将生成的Model对象暴露出去,这样其他js文件就可以导入了
</span><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s2">&#34;student&#34;</span><span class="p">,</span><span class="nx">studentSchema</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p><code>test.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// 连接数据库
</span><span class="c1"></span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;/home/zhangyuhang/Mongoose/js/ModuleMongoose/commonMongoose.js&#34;</span><span class="p">);</span>
  
<span class="c1">// 创建Model模板
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;/home/zhangyuhang/Mongoose/js/ModuleMongoose/user.js&#34;</span><span class="p">);</span>
  
<span class="nx">model</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s2">&#34;zhangyuhang&#34;</span><span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">results</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">results</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>效果是一样的</p>
</blockquote>
<blockquote>
<p>其实结果就是这三个文件的拼接,这是前端,应该可以拼接的吧😂</p>
</blockquote>
</li>
</ul>
<hr>
<h1 id="step12ubuntu下mongodb设置密码">Step12.Ubuntu下MongoDB设置密码</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo service mongodb stop <span class="c1"># 关闭mongo的服务进程</span>       
sudo service mongodb start <span class="c1"># 开启mongo服务</span>
<span class="c1"># 进入mongo，添加账号密码</span>
       use admin  //用admin身份
 
       db.createUser<span class="o">({</span>user:<span class="s2">&#34;user_test&#34;</span>,pwd:<span class="s2">&#34;pwd_test&#34;</span>,roles:<span class="o">[</span><span class="s2">&#34;root&#34;</span><span class="o">]})</span>//创建账号
 
       db.auth<span class="o">(</span><span class="s2">&#34;user_test&#34;</span>,<span class="s2">&#34;pwd_test&#34;</span><span class="o">)</span>//就可以进入了
</code></pre></td></tr></table>
</div>
</div><ul>
<li>终端连接MongoDB不需要密码,这个密码是为了用于编译器连接的,也可以防止外来渗透等</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Zhang's Blog</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2022-01-10
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/database/">DataBase</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/kali/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">kali</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/%E7%88%AC%E8%99%AB/">
            <span class="next-text nav-default">爬虫</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://www.linkedin.com/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://www.google.com/" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://getpocket.com/" class="iconfont icon-pocket" title="pocket"></a>
      <a href="https://www.tumblr.com/" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="https://www.instagram.com/" class="iconfont icon-instagram" title="instagram"></a>
      <a href="https://about.gitlab.com/" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="https://www.bilibili.com/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://golang.org/">GoLang</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Author - 
    <a class="theme-link" href="https://space.bilibili.com/628950169/">Mr'zhang</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Zhang's Blog</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>








</body>
</html>
